import{r as e,ay as a,j as t,e as l,av as r}from"./react-core-XCdXHkeW.js";import{p as o}from"./productService-CHIPryK1.js";import{L as i}from"./index-D7IercYq.js";import{d as s,b as n}from"./react-router-G9IXNjIc.js";import"./vendor-BcMaAnXF.js";import"./state-QrSTFgAv.js";import"./react-dom-BslC4xag.js";import"./utils-BtzqxagS.js";import"./forms-Bk6aQ3xQ.js";const m=()=>{const{id:m}=s(),c=n(),[d,u]=e.useState(!0),[h,p]=e.useState(!1),[b,g]=e.useState({name:"",brand:"",category:"",sku:"",description:"",claims:"",nutritionalInfo:"",imageUrl:""});e.useEffect((()=>{m&&x()}),[m]);const x=async()=>{var e;try{u(!0);const e=await o.getProductById(m);g({name:e.name||"",brand:e.brand||"",category:e.category||"",sku:e.sku||"",description:e.description||"",claims:e.claims||"",nutritionalInfo:e.nutritionalInfo?JSON.stringify(e.nutritionalInfo,null,2):"",imageUrl:e.imageUrl||""})}catch(t){404===(null==(e=t.response)?void 0:e.status)?(a.error("Produto n\xe3o encontrado"),c("/dashboard/products")):a.error("Erro ao carregar produto")}finally{u(!1)}},f=e=>{const{name:a,value:t}=e.target;g((e=>({...e,[a]:t})))};return d?t.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:t.jsx(i,{size:"lg"})}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsxs("button",{onClick:()=>c(`/dashboard/products/${m}`),className:"btn btn-outline btn-sm flex items-center",children:[t.jsx(l,{className:"h-4 w-4 mr-2"}),"Voltar"]}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Editar Produto"}),t.jsx("p",{className:"text-gray-600",children:"Atualize as informa\xe7\xf5es do produto"})]})]}),t.jsxs("form",{onSubmit:async e=>{var t,l,r;if(e.preventDefault(),b.name&&b.brand&&b.category&&b.sku)try{p(!0);let e=null;if(b.nutritionalInfo.trim())try{e=JSON.parse(b.nutritionalInfo)}catch(i){return void a.error("Formato JSON inv\xe1lido nas informa\xe7\xf5es nutricionais")}const t={...b,nutritionalInfo:e};await o.updateProduct(m,t),a.success("Produto atualizado com sucesso!"),c(`/dashboard/products/${m}`)}catch(s){400===(null==(t=s.response)?void 0:t.status)?a.error("Dados inv\xe1lidos. Verifique os campos."):409===(null==(l=s.response)?void 0:l.status)?a.error("SKU j\xe1 existe. Use um SKU \xfanico."):401===(null==(r=s.response)?void 0:r.status)?a.error("Sess\xe3o expirada. Fa\xe7a login novamente."):a.error("Erro ao atualizar produto. Tente novamente.")}finally{p(!1)}else a.error("Preencha todos os campos obrigat\xf3rios")},className:"space-y-6",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Informa\xe7\xf5es B\xe1sicas"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome do Produto *"}),t.jsx("input",{type:"text",id:"name",name:"name",required:!0,value:b.name,onChange:f,className:"input w-full",placeholder:"Ex: Whey Protein Premium"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"brand",className:"block text-sm font-medium text-gray-700 mb-2",children:"Marca *"}),t.jsx("input",{type:"text",id:"brand",name:"brand",required:!0,value:b.brand,onChange:f,className:"input w-full",placeholder:"Ex: NutriMax"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 mb-2",children:"Categoria *"}),t.jsxs("select",{id:"category",name:"category",required:!0,value:b.category,onChange:f,className:"input w-full",children:[t.jsx("option",{value:"",children:"Selecione uma categoria"}),["Alimentos","Bebidas","Suplementos","Cosm\xe9ticos","Higiene Pessoal","Produtos Naturais","Outros"].map((e=>t.jsx("option",{value:e,children:e},e)))]})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"sku",className:"block text-sm font-medium text-gray-700 mb-2",children:"SKU *"}),t.jsx("input",{type:"text",id:"sku",name:"sku",required:!0,value:b.sku,onChange:f,className:"input w-full",placeholder:"Ex: WP-001-VAN"})]})]}),t.jsxs("div",{className:"mt-6",children:[t.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Descri\xe7\xe3o"}),t.jsx("textarea",{id:"description",name:"description",rows:4,value:b.description,onChange:f,className:"input w-full",placeholder:"Descreva o produto, seus benef\xedcios e caracter\xedsticas..."})]}),t.jsxs("div",{className:"mt-6",children:[t.jsx("label",{htmlFor:"imageUrl",className:"block text-sm font-medium text-gray-700 mb-2",children:"URL da Imagem"}),t.jsx("input",{type:"url",id:"imageUrl",name:"imageUrl",value:b.imageUrl,onChange:f,className:"input w-full",placeholder:"https://exemplo.com/imagem-produto.jpg"})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Claims e Alega\xe7\xf5es"}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"claims",className:"block text-sm font-medium text-gray-700 mb-2",children:"Claims do Produto"}),t.jsx("textarea",{id:"claims",name:"claims",rows:4,value:b.claims,onChange:f,className:"input w-full",placeholder:"Ex: Rico em prote\xednas, Sem a\xe7\xfacar adicionado, Fonte de vitaminas..."}),t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Separe m\xfaltiplos claims por v\xedrgula"})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Informa\xe7\xf5es Nutricionais"}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"nutritionalInfo",className:"block text-sm font-medium text-gray-700 mb-2",children:"Informa\xe7\xf5es Nutricionais (JSON)"}),t.jsx("textarea",{id:"nutritionalInfo",name:"nutritionalInfo",rows:6,value:b.nutritionalInfo,onChange:f,className:"input w-full font-mono text-sm",placeholder:'{\n  "calorias": "120 kcal",\n  "proteinas": "25g",\n  "carboidratos": "2g",\n  "gorduras": "1g",\n  "fibras": "0g",\n  "sodio": "50mg"\n}'}),t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Formato JSON v\xe1lido. Deixe em branco se n\xe3o aplic\xe1vel."})]})]}),t.jsxs("div",{className:"flex justify-end space-x-4",children:[t.jsx("button",{type:"button",onClick:()=>c(`/dashboard/products/${m}`),className:"btn btn-secondary",disabled:h,children:"Cancelar"}),t.jsx("button",{type:"submit",className:"btn btn-primary",disabled:h,children:h?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"loading-spinner w-4 h-4 mr-2"}),"Salvando..."]}):t.jsxs(t.Fragment,{children:[t.jsx(r,{className:"w-4 h-4 mr-2"}),"Salvar Altera\xe7\xf5es"]})})]})]})]})};export{m as default};
