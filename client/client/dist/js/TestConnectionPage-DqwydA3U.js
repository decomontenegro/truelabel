import{r as e,j as r}from"./react-core-XCdXHkeW.js";import{b as t,a}from"./index-D7IercYq.js";import{p as s}from"./productService-CHIPryK1.js";import"./vendor-BcMaAnXF.js";import"./state-QrSTFgAv.js";import"./react-dom-BslC4xag.js";import"./react-router-G9IXNjIc.js";import"./utils-BtzqxagS.js";import"./forms-Bk6aQ3xQ.js";const o=()=>{const[o,n]=e.useState([{name:"Health Check",status:"pending",message:"Aguardando..."},{name:"Login Admin",status:"pending",message:"Aguardando..."},{name:"Listar Produtos",status:"pending",message:"Aguardando..."},{name:"Criar Produto",status:"pending",message:"Aguardando..."}]),[d,c]=e.useState(!1),i=(e,r,t,a)=>{n((s=>s.map(((s,o)=>o===e?{...s,status:r,message:t,data:a}:s))))},l=e=>{switch(e){case"pending":default:return"\u23f3";case"success":return"\u2705";case"error":return"\u274c"}},m=e=>{switch(e){case"pending":return"text-yellow-600";case"success":return"text-green-600";case"error":return"text-red-600";default:return"text-gray-600"}};return r.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:r.jsx("div",{className:"max-w-4xl mx-auto px-4",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"\ud83e\uddea Teste de Conex\xe3o Frontend \u2194 Backend"}),r.jsx("p",{className:"text-gray-600",children:"Verificando se o frontend React consegue se comunicar com o backend Node.js"})]}),r.jsx("div",{className:"mb-6",children:r.jsx("button",{onClick:async()=>{var e,r,o,n,d,l;c(!0);try{i(0,"pending","Testando conex\xe3o...");try{const e=await t.get("/health");i(0,"success","Conex\xe3o estabelecida",e.data)}catch(m){return i(0,"error",`Erro: ${m.message}`),void c(!1)}i(1,"pending","Fazendo login...");try{const e=await a.login({email:"admin@truelabel.com",password:"admin123"});i(1,"success",`Login realizado: ${e.user.name}`,e)}catch(m){return i(1,"error",`Erro no login: ${(null==(r=null==(e=m.response)?void 0:e.data)?void 0:r.error)||m.message}`),void c(!1)}i(2,"pending","Listando produtos...");try{const e=await s.getProducts();i(2,"success",`${e.data.length} produtos encontrados`,e)}catch(m){i(2,"error",`Erro ao listar produtos: ${(null==(n=null==(o=m.response)?void 0:o.data)?void 0:n.error)||m.message}`)}i(3,"pending","Criando produto de teste...");try{const e={name:`Produto Teste ${Date.now()}`,brand:"Marca Teste",category:"Teste",sku:`TEST${Date.now()}`,claims:"Teste,Funcional"},r=await s.createProduct(e);i(3,"success",`Produto criado: ${r.product.name}`,r)}catch(m){i(3,"error",`Erro ao criar produto: ${(null==(l=null==(d=m.response)?void 0:d.data)?void 0:l.error)||m.message}`)}}catch(m){}finally{c(!1)}},disabled:d,className:`w-full py-3 px-6 rounded-lg font-medium transition-colors ${d?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"} text-white`,children:d?"\ud83d\udd04 Executando Testes...":"\ud83d\ude80 Executar Testes"})}),r.jsx("div",{className:"space-y-4",children:o.map(((e,t)=>r.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("h3",{className:"font-medium text-gray-900",children:[l(e.status)," ",e.name]}),r.jsx("span",{className:`text-sm font-medium ${m(e.status)}`,children:e.status.toUpperCase()})]}),r.jsx("p",{className:`text-sm ${m(e.status)}`,children:e.message}),e.data&&"success"===e.status&&r.jsxs("details",{className:"mt-2",children:[r.jsx("summary",{className:"cursor-pointer text-xs text-gray-500 hover:text-gray-700",children:"Ver dados da resposta"}),r.jsx("pre",{className:"mt-2 text-xs bg-gray-100 p-2 rounded overflow-auto max-h-32",children:JSON.stringify(e.data,null,2)})]})]},t)))}),r.jsxs("div",{className:"mt-8 p-4 bg-blue-50 rounded-lg",children:[r.jsx("h3",{className:"font-medium text-blue-900 mb-2",children:"\u2139\ufe0f Informa\xe7\xf5es do Sistema"}),r.jsxs("div",{className:"text-sm text-blue-800 space-y-1",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Frontend:"})," React + TypeScript (http://localhost:3000)"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Backend:"})," Node.js + Express (http://localhost:3001)"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Banco:"})," SQLite com Prisma ORM"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Autentica\xe7\xe3o:"})," JWT"]})]})]}),r.jsx("div",{className:"mt-6 text-center",children:r.jsx("a",{href:"/",className:"text-blue-600 hover:text-blue-800 font-medium",children:"\u2190 Voltar para Dashboard"})})]})})})};export{o as TestConnectionPage,o as default};
