var e=Object.defineProperty,a=(a,t,r)=>((a,t,r)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[t]=r)(a,"symbol"!=typeof t?t+"":t,r);import{j as t,T as r,N as s,W as i,k as l,r as n,Y as d,Z as c,X as o,P as m,_ as h,$ as g,a0 as u,a1 as x,a2 as b,n as p,a3 as y,J as N,a4 as f,w as v,a5 as w,a6 as k,a7 as C,a8 as D,v as j,a9 as M,aa as R,o as P,ab as S,ac as A,ad as T,ae as $,af as E,ag as L,S as I,ah as z,ai as B,F,V as G,f as q,aj as V}from"./react-core-XCdXHkeW.js";import{b as O,L as U,c as W,d as H,f as K}from"./index-D7IercYq.js";import{u as Q}from"./useAsyncAction-DPqA4CQG.js";import{f as X,s as Y,e as J,b as Z}from"./utils-BtzqxagS.js";import"./vendor-BcMaAnXF.js";import"./state-QrSTFgAv.js";import"./react-dom-BslC4xag.js";import"./react-router-G9IXNjIc.js";import"./forms-Bk6aQ3xQ.js";const _=new class{constructor(){a(this,"wsConnection",null),a(this,"wsConfig",{url:"ws://localhost:3000",reconnectInterval:5e3,maxReconnectAttempts:5,heartbeatInterval:3e4}),a(this,"reconnectAttempts",0),a(this,"eventListeners",new Map)}async getAnalyticsOverview(e){const a=this.buildQueryParams(e);return(await O.get(`/analytics/overview?${a}`)).data}async getEnhancedAnalytics(e){const a=this.buildQueryParams(e);return(await O.get(`/analytics/enhanced?${a}`)).data}async getGeographicAnalytics(e){const a=this.buildQueryParams(e);return(await O.get(`/analytics/geographic?${a}`)).data}async getProductPerformance(e,a){const t=this.buildQueryParams(a);return(await O.get(`/analytics/products/${e}/performance?${t}`)).data}async getConsumerInsights(e){const a=this.buildQueryParams(e);return(await O.get(`/analytics/consumer-insights?${a}`)).data}async getPredictiveInsights(e){const a=this.buildQueryParams(e);return(await O.get(`/analytics/predictive?${a}`)).data}async getRealTimeMetrics(){return(await O.get("/analytics/realtime")).data}connectWebSocket(e){var a;if((null==(a=this.wsConnection)?void 0:a.readyState)!==WebSocket.OPEN)try{this.wsConnection=new WebSocket(`${this.wsConfig.url}/analytics/ws`),this.wsConnection.onopen=()=>{this.reconnectAttempts=0,this.startHeartbeat()},this.wsConnection.onmessage=a=>{try{const t=JSON.parse(a.data);e(t),this.notifyListeners(t.type,t)}catch(t){}},this.wsConnection.onerror=e=>{},this.wsConnection.onclose=()=>{this.handleReconnect(e)}}catch(t){this.handleReconnect(e)}}disconnectWebSocket(){this.wsConnection&&(this.wsConnection.close(),this.wsConnection=null),this.eventListeners.clear()}addEventListener(e,a){var t;this.eventListeners.has(e)||this.eventListeners.set(e,[]),null==(t=this.eventListeners.get(e))||t.push(a)}removeEventListener(e,a){const t=this.eventListeners.get(e);if(t){const e=t.indexOf(a);e>-1&&t.splice(e,1)}}notifyListeners(e,a){const t=this.eventListeners.get(e);t&&t.forEach((e=>e(a)))}handleReconnect(e){this.reconnectAttempts<this.wsConfig.maxReconnectAttempts&&(this.reconnectAttempts++,setTimeout((()=>{this.connectWebSocket(e)}),this.wsConfig.reconnectInterval))}startHeartbeat(){setInterval((()=>{var e;(null==(e=this.wsConnection)?void 0:e.readyState)===WebSocket.OPEN&&this.wsConnection.send(JSON.stringify({type:"ping"}))}),this.wsConfig.heartbeatInterval)}buildQueryParams(e){const a=new URLSearchParams;return e&&Object.entries(e).forEach((([e,t])=>{null!=t&&(Array.isArray(t)?t.forEach((t=>a.append(e,t.toString()))):a.append(e,t.toString()))})),a}enhanceAnalyticsData(e,a){return{summary:{totalScans:e.qrScans.totalScans,uniqueUsers:e.qrScans.uniqueScans,engagementRate:1-e.engagement.bounceRate,conversionRate:e.engagement.conversionRate,averageSessionDuration:e.engagement.averageSessionDuration,topMetrics:[{name:"Taxa de Retorno",value:100*e.engagement.returnVisitorRate,change:12.5,trend:"up",sparkline:[45,52,48,65,72,68,75]},{name:"Tempo M\xe9dio",value:e.engagement.averageSessionDuration,change:-5.2,trend:"down",sparkline:[120,118,125,115,110,108,114]}],keyInsights:["Aumento de 15% no engajamento m\xf3vel","Pico de acessos entre 18h e 20h","Brasil representa 62% dos acessos"]},realtime:{activeUsers:Math.floor(50*Math.random())+10,activeScans:Math.floor(30*Math.random())+5,recentActions:[],liveMap:[],trending:e.topProducts.map(((e,a)=>({type:"product",id:e.productId,name:e.productName,count:e.scans,changePercent:20*Math.random()-10,rank:a+1}))),alerts:[]},performance:[],geographic:[],consumer:{segments:[],behaviors:[],preferences:{topSections:e.sectionEngagement.map((a=>({section:a.sectionName,percentage:a.views/e.qrScans.totalScans*100}))),topProducts:e.topProducts.map((a=>({productId:a.productId,productName:a.productName,percentage:a.scans/e.qrScans.totalScans*100}))),peakHours:e.qrScans.scansByHour.map((a=>({hour:a.hour,percentage:a.scans/e.qrScans.totalScans*100}))),deviceDistribution:e.demographics.byDevice.map((e=>({device:e.device,percentage:e.percentage})))},loyaltyMetrics:{returnRate:e.engagement.returnVisitorRate,frequencyDistribution:[],lifetimeValue:0,churnRate:0,nps:0}},predictive:{forecasts:[],anomalies:[],recommendations:[],riskAssessment:{overallRisk:"low",riskFactors:[],mitigationStrategies:[]},opportunityAnalysis:{opportunities:[],marketTrends:[],competitiveAdvantages:[]}},comparisons:{currentPeriod:{start:new Date((null==a?void 0:a.startDate)||Date.now()-2592e6),end:new Date((null==a?void 0:a.endDate)||Date.now()),metrics:{totalScans:e.qrScans.totalScans,uniqueUsers:e.qrScans.uniqueScans,engagementRate:1-e.engagement.bounceRate,conversionRate:e.engagement.conversionRate}},previousPeriod:{start:new Date(Date.now()-5184e6),end:new Date(Date.now()-2592e6),metrics:{totalScans:Math.floor(.85*e.qrScans.totalScans),uniqueUsers:Math.floor(.82*e.qrScans.uniqueScans),engagementRate:.92*(1-e.engagement.bounceRate),conversionRate:.88*e.engagement.conversionRate}},changes:{}}}}async getQRScanMetrics(e){const a=new URLSearchParams;return(null==e?void 0:e.startDate)&&a.append("startDate",e.startDate),(null==e?void 0:e.endDate)&&a.append("endDate",e.endDate),(null==e?void 0:e.productId)&&a.append("productId",e.productId),(await O.get(`/analytics/qr-scans?${a}`)).data}async getConsumerDemographics(e){const a=new URLSearchParams;return(null==e?void 0:e.startDate)&&a.append("startDate",e.startDate),(null==e?void 0:e.endDate)&&a.append("endDate",e.endDate),(null==e?void 0:e.productId)&&a.append("productId",e.productId),(await O.get(`/analytics/demographics?${a}`)).data}async getSectionEngagement(e){const a=new URLSearchParams;return(null==e?void 0:e.startDate)&&a.append("startDate",e.startDate),(null==e?void 0:e.endDate)&&a.append("endDate",e.endDate),(null==e?void 0:e.productId)&&a.append("productId",e.productId),(await O.get(`/analytics/sections?${a}`)).data}async getEngagementMetrics(e){const a=new URLSearchParams;return(null==e?void 0:e.startDate)&&a.append("startDate",e.startDate),(null==e?void 0:e.endDate)&&a.append("endDate",e.endDate),(null==e?void 0:e.productId)&&a.append("productId",e.productId),(await O.get(`/analytics/engagement?${a}`)).data}async exportAnalyticsReport(e,a){const t=this.buildQueryParams(a);return t.append("format",e),(await O.get(`/analytics/export?${t}`,{responseType:"blob"})).data}async exportCustomReport(e){return(await O.post("/analytics/export/custom",e,{responseType:"blob"})).data}async scheduleReport(e){return(await O.post("/analytics/export/schedule",e)).data}downloadReport(e,a){const t=window.URL.createObjectURL(e),r=document.createElement("a");r.href=t,r.download=a,document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(t)}generateInsights(e){var a;const t=[];if(e.summary.engagementRate>.7&&t.push("Alta taxa de engajamento indica forte interesse dos consumidores"),e.geographic&&e.geographic.length>0){const a=e.geographic[0];t.push(`${a.location.city} \xe9 o principal mercado consumidor`)}const r=e.consumer.preferences.peakHours.reduce(((e,a)=>e.percentage>a.percentage?e:a));return t.push(`Pico de acessos \xe0s ${r.hour}h`),((null==(a=e.consumer.preferences.deviceDistribution.find((e=>"Mobile"===e.device)))?void 0:a.percentage)||0)>60&&t.push("Maioria dos acessos via dispositivos m\xf3veis - otimize para mobile"),t}},ee=({type:e="line",title:a="Gr\xe1fico",height:n=300,message:d="Gr\xe1fico temporariamente desabilitado"})=>t.jsxs("div",{className:"flex flex-col items-center justify-center bg-gray-50 border-2 border-dashed border-gray-300 rounded-lg",style:{height:`${n}px`},children:[(()=>{switch(e){case"bar":return t.jsx(l,{className:"h-12 w-12 text-gray-400"});case"pie":case"radial":return t.jsx(i,{className:"h-12 w-12 text-gray-400"});case"area":return t.jsx(s,{className:"h-12 w-12 text-gray-400"});default:return t.jsx(r,{className:"h-12 w-12 text-gray-400"})}})(),t.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:a}),t.jsx("p",{className:"mt-2 text-sm text-gray-500 text-center max-w-sm",children:d}),t.jsx("div",{className:"mt-4 px-4 py-2 bg-blue-100 text-blue-800 rounded-md text-xs",children:"Em desenvolvimento"})]}),ae=({data:e,loading:a=!1,height:r=400,onLocationClick:s})=>{const i=n.useRef(null),[l,m]=n.useState(null),[h,g]=n.useState(!1),[u,x]=n.useState(null);if(n.useEffect((()=>{if(!i.current||a||!e.length)return;const t=i.current,r=t.getContext("2d");if(!r)return;r.clearRect(0,0,t.width,t.height),r.fillStyle="#f3f4f6",r.fillRect(0,0,t.width,t.height),r.strokeStyle="#e5e7eb",r.lineWidth=1;for(let e=0;e<=t.width;e+=50)r.beginPath(),r.moveTo(e,0),r.lineTo(e,t.height),r.stroke();for(let e=0;e<=t.height;e+=50)r.beginPath(),r.moveTo(0,e),r.lineTo(t.width,e),r.stroke();const s=e.map((e=>e.value)),l=Math.max(...s),n=Math.min(...s);e.forEach((e=>{const a=(e.location.lng+180)/360*t.width,s=(90-e.location.lat)/180*t.height,i=(e.value-n)/(l-n),d=20+30*i,c=.3+.7*i,o=r.createRadialGradient(a,s,0,a,s,d);o.addColorStop(0,`rgba(239, 68, 68, ${c})`),o.addColorStop(.5,`rgba(249, 115, 22, ${.8*c})`),o.addColorStop(1,`rgba(251, 191, 36, ${.3*c})`),r.fillStyle=o,r.beginPath(),r.arc(a,s,d,0,2*Math.PI),r.fill(),r.fillStyle="#1f2937",r.beginPath(),r.arc(a,s,3,0,2*Math.PI),r.fill()})),r.font="12px sans-serif",r.fillStyle="#4b5563",e.forEach((e=>{const a=(e.location.lng+180)/360*t.width,s=(90-e.location.lat)/180*t.height;r.fillText(e.location.city,a+5,s-5)}))}),[e,a,r]),a)return t.jsx("div",{className:"flex items-center justify-center",style:{height:r},children:t.jsx(U,{size:"lg"})});if(!e.length)return t.jsxs("div",{className:"flex flex-col items-center justify-center text-gray-500",style:{height:r},children:[t.jsx(d,{className:"h-12 w-12 mb-2 text-gray-400"}),t.jsx("p",{children:"Nenhum dado geogr\xe1fico dispon\xedvel"})]});const b=t.jsxs("div",{className:"relative bg-white rounded-lg overflow-hidden",children:[t.jsx("canvas",{ref:i,width:h?window.innerWidth-100:800,height:h?window.innerHeight-200:r,className:"cursor-pointer",onClick:a=>{if(!i.current)return;const t=i.current.getBoundingClientRect(),r=a.clientX-t.left,l=a.clientY-t.top,n=e.find((e=>{const a=(e.location.lng+180)/360*i.current.width,t=(90-e.location.lat)/180*i.current.height;return Math.sqrt((r-a)**2+(l-t)**2)<30}));n&&(m(n),null==s||s(n))},onMouseMove:a=>{if(!i.current)return;const t=i.current.getBoundingClientRect(),r=a.clientX-t.left,s=a.clientY-t.top,l=e.find((e=>{const a=(e.location.lng+180)/360*i.current.width,t=(90-e.location.lat)/180*i.current.height;return Math.sqrt((r-a)**2+(s-t)**2)<30}));x(l||null)},onMouseLeave:()=>x(null)}),u&&t.jsxs("div",{className:"absolute top-4 right-4 bg-white rounded-lg shadow-lg p-4 max-w-xs",children:[t.jsx("h4",{className:"font-semibold text-gray-900",children:u.location.city}),u.location.state&&t.jsx("p",{className:"text-sm text-gray-600",children:u.location.state}),t.jsx("p",{className:"text-sm text-gray-600",children:u.location.country}),t.jsxs("div",{className:"mt-2 space-y-1",children:[t.jsxs("p",{className:"text-sm",children:[t.jsx("span",{className:"text-gray-600",children:"Escaneamentos:"})," ",t.jsx("span",{className:"font-medium",children:W(u.value)})]}),u.details&&t.jsxs(t.Fragment,{children:[t.jsxs("p",{className:"text-sm",children:[t.jsx("span",{className:"text-gray-600",children:"Usu\xe1rios \xfanicos:"})," ",t.jsx("span",{className:"font-medium",children:W(u.details.uniqueUsers)})]}),t.jsxs("p",{className:"text-sm",children:[t.jsx("span",{className:"text-gray-600",children:"Tempo m\xe9dio:"})," ",t.jsxs("span",{className:"font-medium",children:[u.details.avgSessionDuration,"s"]})]})]})]})]}),t.jsxs("div",{className:"absolute bottom-4 left-4 bg-white rounded-lg shadow-md p-3",children:[t.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Intensidade"}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-20 h-4 bg-gradient-to-r from-yellow-300 via-orange-400 to-red-500 rounded"}),t.jsxs("div",{className:"flex justify-between w-20 text-xs text-gray-600",children:[t.jsx("span",{children:"Baixa"}),t.jsx("span",{children:"Alta"})]})]})]}),!h&&t.jsx("button",{onClick:()=>g(!0),className:"absolute top-4 right-4 p-2 bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow",title:"Tela cheia",children:t.jsx(c,{className:"h-4 w-4 text-gray-600"})})]});return h?t.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-50 flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white rounded-lg w-full h-full max-w-7xl max-h-[90vh] p-6",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Mapa de Calor - Escaneamentos QR"}),t.jsx("button",{onClick:()=>g(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:t.jsx(o,{className:"h-5 w-5 text-gray-600"})})]}),b]})}):b},te=({data:e,loading:a=!1,onProductSelect:r})=>{const[s,i]=n.useState("daily"),[l,d]=n.useState(null);if(a)return t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx(U,{size:"lg"})});if(!e.length)return t.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-gray-500",children:[t.jsx(m,{className:"h-12 w-12 mb-2 text-gray-400"}),t.jsx("p",{children:"Nenhum dado de performance dispon\xedvel"})]});const c=l?e.find((e=>e.productId===l)):e[0];if(!c)return null;const o=e=>{switch(e){case"up":return t.jsx(x,{className:"h-4 w-4 text-green-600"});case"down":return t.jsx(u,{className:"h-4 w-4 text-red-600"});default:return t.jsx(g,{className:"h-4 w-4 text-gray-600"})}},N=e=>{switch(e){case"critical":return t.jsx(y,{className:"h-4 w-4 text-red-600"});case"warning":return t.jsx(y,{className:"h-4 w-4 text-yellow-600"});case"success":return t.jsx(p,{className:"h-4 w-4 text-green-600"});default:return t.jsx(b,{className:"h-4 w-4 text-blue-600"})}},{comparisons:f}=c;return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("select",{value:l||e[0].productId,onChange:e=>{d(e.target.value),null==r||r(e.target.value)},className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:e.map((e=>t.jsxs("option",{value:e.productId,children:[e.productName," (",e.sku,")"]},e.productId)))}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>i("daily"),className:"px-3 py-1.5 rounded text-sm font-medium transition-colors "+("daily"===s?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"),children:"Di\xe1rio"}),t.jsx("button",{onClick:()=>i("weekly"),className:"px-3 py-1.5 rounded text-sm font-medium transition-colors "+("weekly"===s?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"),children:"Semanal"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Score de Sa\xfade"}),t.jsx("div",{className:"flex items-center justify-center",children:t.jsx(ee,{type:"radial",title:`Score: ${c.healthScore}`,height:150,message:"Gr\xe1fico radial temporariamente desabilitado"})}),t.jsx("p",{className:"text-center text-sm text-gray-600 mt-2",children:c.healthScore>=80?"Excelente":c.healthScore>=60?"Bom":"Aten\xe7\xe3o Necess\xe1ria"})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Compara\xe7\xf5es"}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"vs Per\xedodo Anterior"}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("span",{className:"font-medium "+(f.vsLastPeriod>=0?"text-green-600":"text-red-600"),children:H(Math.abs(f.vsLastPeriod))}),o(f.vsLastPeriod>=0?"up":"down")]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"vs M\xe9dia Geral"}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("span",{className:"font-medium "+(f.vsAverage>=0?"text-green-600":"text-red-600"),children:H(Math.abs(f.vsAverage))}),o(f.vsAverage>=0?"up":"down")]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"vs Categoria"}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("span",{className:"font-medium "+(f.vsCategoryAverage>=0?"text-green-600":"text-red-600"),children:H(Math.abs(f.vsCategoryAverage))}),o(f.vsCategoryAverage>=0?"up":"down")]})]})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Ranking"}),t.jsx("div",{className:"flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsxs("div",{className:"flex items-center justify-center",children:[t.jsx(h,{className:"h-8 w-8 text-blue-600 mr-2"}),t.jsxs("span",{className:"text-4xl font-bold text-gray-900",children:["#",f.rank]})]}),t.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:["de ",f.totalProducts," produtos"]}),t.jsxs("div",{className:"mt-4",children:[t.jsx("div",{className:"bg-gray-200 rounded-full h-2 w-32 mx-auto",children:t.jsx("div",{className:"bg-blue-600 rounded-full h-2 transition-all duration-300",style:{width:(f.totalProducts-f.rank+1)/f.totalProducts*100+"%"}})}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Top ",H((f.totalProducts-f.rank+1)/f.totalProducts*100)]})]})]})})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Tend\xeancia de Performance"}),t.jsx(ee,{type:"area",title:"Tend\xeancia de Performance",height:300,message:"Gr\xe1fico de \xe1rea temporariamente desabilitado"})]}),c.alerts.length>0&&t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Alertas e Recomenda\xe7\xf5es"}),t.jsx("div",{className:"space-y-3",children:c.alerts.map((e=>t.jsx("div",{className:"p-4 rounded-lg border "+("critical"===e.type?"bg-red-50 border-red-200":"warning"===e.type?"bg-yellow-50 border-yellow-200":"success"===e.type?"bg-green-50 border-green-200":"bg-blue-50 border-blue-200"),children:t.jsxs("div",{className:"flex items-start",children:[t.jsx("div",{className:"flex-shrink-0 mt-0.5",children:N(e.type)}),t.jsxs("div",{className:"ml-3 flex-1",children:[t.jsx("h4",{className:"text-sm font-medium text-gray-900",children:e.message}),t.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[e.metric,": ",e.currentValue," (limite: ",e.threshold,")"]}),e.recommendation&&t.jsxs("p",{className:"text-sm text-gray-700 mt-2 font-medium",children:["Recomenda\xe7\xe3o: ",e.recommendation]})]})]})},e.id)))})]}),c.trends.predictions.length>0&&t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Previs\xf5es"}),t.jsx(ee,{type:"line",title:"Previs\xf5es",height:300,message:"Gr\xe1fico de previs\xf5es temporariamente desabilitado"}),t.jsxs("p",{className:"text-sm text-gray-600 text-center mt-2",children:["Confian\xe7a m\xe9dia: ",H(100*c.trends.predictions[0].confidence)]})]})]})},re=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#14B8A6","#F97316"],se=({data:e,loading:a=!1})=>{const[r,i]=n.useState(null),[l,d]=n.useState("segments");if(a)return t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx(U,{size:"lg"})});const c=e=>{switch(e.toLowerCase()){case"mobile":return t.jsx(D,{className:"h-4 w-4"});case"desktop":return t.jsx(C,{className:"h-4 w-4"});case"tablet":return t.jsx(k,{className:"h-4 w-4"});default:return null}};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-wrap gap-2 border-b border-gray-200",children:[t.jsx("button",{onClick:()=>d("segments"),className:"px-4 py-2 font-medium text-sm border-b-2 transition-colors "+("segments"===l?"text-blue-600 border-blue-600":"text-gray-600 border-transparent hover:text-gray-900"),children:"Segmentos"}),t.jsx("button",{onClick:()=>d("behaviors"),className:"px-4 py-2 font-medium text-sm border-b-2 transition-colors "+("behaviors"===l?"text-blue-600 border-blue-600":"text-gray-600 border-transparent hover:text-gray-900"),children:"Comportamentos"}),t.jsx("button",{onClick:()=>d("preferences"),className:"px-4 py-2 font-medium text-sm border-b-2 transition-colors "+("preferences"===l?"text-blue-600 border-blue-600":"text-gray-600 border-transparent hover:text-gray-900"),children:"Prefer\xeancias"}),t.jsx("button",{onClick:()=>d("loyalty"),className:"px-4 py-2 font-medium text-sm border-b-2 transition-colors "+("loyalty"===l?"text-blue-600 border-blue-600":"text-gray-600 border-transparent hover:text-gray-900"),children:"Fidelidade"})]}),"segments"===l&&t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:e.segments.map(((e,a)=>t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border-2 cursor-pointer transition-all "+(r===e.id?"border-blue-500 shadow-md":"border-gray-200 hover:border-gray-300"),onClick:()=>i(e.id),children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h4",{className:"font-semibold text-gray-900",children:e.name}),t.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:re[a%re.length]}})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Tamanho"}),t.jsx("span",{className:"font-medium",children:W(e.size)})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Crescimento"}),t.jsxs("span",{className:"font-medium "+(e.growthRate>0?"text-green-600":"text-red-600"),children:[e.growthRate>0?"+":"",H(e.growthRate)]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Valor"}),t.jsxs("span",{className:"font-medium",children:[e.value.toFixed(1),"/10"]})]})]}),t.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[t.jsx("p",{className:"text-xs text-gray-600",children:"Caracter\xedsticas:"}),t.jsxs("div",{className:"mt-1 flex flex-wrap gap-1",children:[e.characteristics.slice(0,2).map(((e,a)=>t.jsx("span",{className:"text-xs bg-gray-100 text-gray-700 px-2 py-1 rounded",children:e},a))),e.characteristics.length>2&&t.jsxs("span",{className:"text-xs text-gray-500",children:["+",e.characteristics.length-2]})]})]})]},e.id)))}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Distribui\xe7\xe3o de Segmentos"}),t.jsx(ResponsiveContainer,{width:"100%",height:300,children:t.jsxs(PieChart,{children:[t.jsx(Pie,{data:e.segments.map(((e,a)=>({...e,fill:re[a%re.length]}))),cx:"50%",cy:"50%",labelLine:!1,label:a=>`${a.name} (${H(a.size/e.segments.reduce(((e,a)=>e+a.size),0)*100)})`,outerRadius:80,fill:"#8884d8",dataKey:"size",animationBegin:0,animationDuration:800,children:e.segments.map(((e,a)=>t.jsx(Cell,{fill:re[a%re.length]},`cell-${a}`)))}),t.jsx(Tooltip,{formatter:e=>W(e)})]})})]})]}),"behaviors"===l&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Padr\xf5es de Comportamento"}),t.jsx("div",{className:"space-y-4",children:e.behaviors.map(((e,a)=>t.jsx("div",{className:"border-b border-gray-200 last:border-0 pb-4 last:pb-0",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h4",{className:"font-medium text-gray-900",children:e.pattern}),t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:e.impact}),t.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[t.jsxs("span",{className:"text-sm text-gray-500",children:[t.jsx(N,{className:"inline h-4 w-4 mr-1"}),W(e.users)," usu\xe1rios"]}),t.jsxs("span",{className:"text-sm text-gray-500",children:["Frequ\xeancia: ",H(100*e.frequency)]})]})]}),t.jsx("div",{className:"px-3 py-1 rounded-full text-sm font-medium "+("emerging"===e.trend?"bg-green-100 text-green-700":"declining"===e.trend?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700"),children:"emerging"===e.trend?"Emergente":"declining"===e.trend?"Declinando":"Est\xe1vel"})]})},a)))})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Impacto dos Comportamentos"}),t.jsx(ResponsiveContainer,{width:"100%",height:300,children:t.jsxs(BarChart,{data:e.behaviors,layout:"horizontal",children:[t.jsx(CartesianGrid,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),t.jsx(XAxis,{type:"number",tick:{fontSize:12},tickLine:!1}),t.jsx(YAxis,{dataKey:"pattern",type:"category",width:150,tick:{fontSize:12},tickLine:!1}),t.jsx(Tooltip,{formatter:e=>W(e)}),t.jsx(Bar,{dataKey:"users",fill:"#3B82F6",radius:[0,8,8,0]})]})})]})]}),"preferences"===l&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Distribui\xe7\xe3o por Dispositivo"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:e.preferences.deviceDistribution.map(((e,a)=>t.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[c(e.device),t.jsx("span",{className:"font-medium text-gray-900",children:e.device})]}),t.jsx("span",{className:"text-2xl font-bold text-gray-900",children:H(e.percentage)})]},a)))})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Hor\xe1rios de Pico"}),t.jsx(ResponsiveContainer,{width:"100%",height:200,children:t.jsxs(BarChart,{data:e.preferences.peakHours,children:[t.jsx(CartesianGrid,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),t.jsx(XAxis,{dataKey:"hour",tick:{fontSize:12},tickLine:!1,tickFormatter:e=>`${e}h`}),t.jsx(YAxis,{tick:{fontSize:12},tickLine:!1,axisLine:!1}),t.jsx(Tooltip,{formatter:e=>`${H(e)}`,labelFormatter:e=>`${e}h`}),t.jsx(Bar,{dataKey:"percentage",fill:"#10B981",radius:[8,8,0,0]})]})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Se\xe7\xf5es Mais Visitadas"}),t.jsx("div",{className:"space-y-3",children:e.preferences.topSections.map(((e,a)=>t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-gray-700",children:e.section}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:t.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${e.percentage}%`}})}),t.jsx("span",{className:"text-sm font-medium text-gray-900 w-12 text-right",children:H(e.percentage)})]})]},a)))})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Produtos Mais Populares"}),t.jsx("div",{className:"space-y-3",children:e.preferences.topProducts.map(((e,a)=>t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-gray-700",children:e.productName}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:t.jsx("div",{className:"bg-green-600 h-2 rounded-full transition-all duration-300",style:{width:`${e.percentage}%`}})}),t.jsx("span",{className:"text-sm font-medium text-gray-900 w-12 text-right",children:H(e.percentage)})]})]},a)))})]})]})]}),"loyalty"===l&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Taxa de Retorno"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:H(100*e.loyaltyMetrics.returnRate)})]}),t.jsx(f,{className:"h-8 w-8 text-blue-600"})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Valor Vital\xedcio"}),t.jsxs("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:["R$ ",e.loyaltyMetrics.lifetimeValue.toFixed(2)]})]}),t.jsx(v,{className:"h-8 w-8 text-red-600"})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Taxa de Churn"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:H(100*e.loyaltyMetrics.churnRate)})]}),t.jsx(s,{className:"h-8 w-8 text-orange-600"})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"NPS Score"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:e.loyaltyMetrics.nps})]}),t.jsx(w,{className:"h-8 w-8 text-green-600"})]})})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Distribui\xe7\xe3o de Frequ\xeancia de Visitas"}),t.jsx(ResponsiveContainer,{width:"100%",height:300,children:t.jsxs(BarChart,{data:e.loyaltyMetrics.frequencyDistribution,children:[t.jsx(CartesianGrid,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),t.jsx(XAxis,{dataKey:"visits",tick:{fontSize:12},tickLine:!1,label:{value:"N\xfamero de Visitas",position:"insideBottom",offset:-5}}),t.jsx(YAxis,{tick:{fontSize:12},tickLine:!1,axisLine:!1,label:{value:"Usu\xe1rios",angle:-90,position:"insideLeft"}}),t.jsx(Tooltip,{formatter:e=>W(e)}),t.jsx(Bar,{dataKey:"users",fill:"#8B5CF6",radius:[8,8,0,0]})]})})]})]})]})},ie=({data:e,loading:a=!1,onRecommendationAction:s})=>{const[i,l]=n.useState(0),[d,c]=n.useState(null),[o,m]=n.useState("forecasts");if(a)return t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx(U,{size:"lg"})});const g=e=>{switch(e){case"high":case"critical":return"text-red-600 bg-red-100";case"medium":case"warning":return"text-yellow-600 bg-yellow-100";case"low":case"info":return"text-blue-600 bg-blue-100";default:return"text-gray-600 bg-gray-100"}},u=e=>{switch(e){case"high":return t.jsx(S,{className:"h-4 w-4 text-red-600"});case"medium":return t.jsx(P,{className:"h-4 w-4 text-yellow-600"});case"low":return t.jsx(b,{className:"h-4 w-4 text-blue-600"});default:return null}};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-wrap gap-2 border-b border-gray-200",children:[t.jsxs("button",{onClick:()=>m("forecasts"),className:"px-4 py-2 font-medium text-sm border-b-2 transition-colors "+("forecasts"===o?"text-blue-600 border-blue-600":"text-gray-600 border-transparent hover:text-gray-900"),children:[t.jsx(r,{className:"inline h-4 w-4 mr-1"}),"Previs\xf5es"]}),t.jsxs("button",{onClick:()=>m("anomalies"),className:"px-4 py-2 font-medium text-sm border-b-2 transition-colors "+("anomalies"===o?"text-blue-600 border-blue-600":"text-gray-600 border-transparent hover:text-gray-900"),children:[t.jsx(y,{className:"inline h-4 w-4 mr-1"}),"Anomalias",e.anomalies.length>0&&t.jsx("span",{className:"ml-1 px-2 py-0.5 text-xs bg-red-100 text-red-600 rounded-full",children:e.anomalies.length})]}),t.jsxs("button",{onClick:()=>m("recommendations"),className:"px-4 py-2 font-medium text-sm border-b-2 transition-colors "+("recommendations"===o?"text-blue-600 border-blue-600":"text-gray-600 border-transparent hover:text-gray-900"),children:[t.jsx(j,{className:"inline h-4 w-4 mr-1"}),"Recomenda\xe7\xf5es",e.recommendations.length>0&&t.jsx("span",{className:"ml-1 px-2 py-0.5 text-xs bg-blue-100 text-blue-600 rounded-full",children:e.recommendations.length})]}),t.jsxs("button",{onClick:()=>m("risks"),className:"px-4 py-2 font-medium text-sm border-b-2 transition-colors "+("risks"===o?"text-blue-600 border-blue-600":"text-gray-600 border-transparent hover:text-gray-900"),children:[t.jsx(M,{className:"inline h-4 w-4 mr-1"}),"Riscos & Oportunidades"]})]}),"forecasts"===o&&(()=>{const a=e.forecasts[i];return a?t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("select",{value:i,onChange:e=>l(Number(e.target.value)),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:e.forecasts.map(((e,a)=>t.jsxs("option",{value:a,children:[e.metric," - ","daily"===e.period?"Di\xe1rio":"weekly"===e.period?"Semanal":"Mensal"]},a)))}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Confian\xe7a:"}),t.jsx("span",{className:"font-medium text-gray-900",children:H(100*a.confidence)})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Previs\xe3o: ",a.metric]}),t.jsx(ee,{type:"area",title:`Previs\xe3o: ${a.metric}`,height:400,message:"Gr\xe1fico de previs\xf5es temporariamente desabilitado"}),t.jsxs("div",{className:"mt-4 flex items-center justify-center text-sm text-gray-600",children:[t.jsx(b,{className:"h-4 w-4 mr-2"}),"Metodologia: ",a.methodology]})]})]}):null})(),"anomalies"===o&&t.jsx("div",{className:"space-y-6",children:0===e.anomalies.length?t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200 text-center",children:[t.jsx(p,{className:"h-12 w-12 text-green-600 mx-auto mb-2"}),t.jsx("p",{className:"text-gray-600",children:"Nenhuma anomalia detectada no momento"})]}):t.jsx("div",{className:"space-y-4",children:e.anomalies.map((e=>t.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 border-2 "+("high"===e.severity?"border-red-200":"medium"===e.severity?"border-yellow-200":"border-blue-200"),children:t.jsx("div",{className:"flex items-start justify-between",children:t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx(y,{className:"h-5 w-5 "+("high"===e.severity?"text-red-600":"medium"===e.severity?"text-yellow-600":"text-blue-600")}),t.jsx("h4",{className:"font-semibold text-gray-900",children:e.description}),t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${g(e.severity)}`,children:"high"===e.severity?"Alta":"medium"===e.severity?"M\xe9dia":"Baixa"})]}),t.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["M\xe9trica: ",e.metric," | Detectada: ",K(e.detectedAt,"dd/MM/yyyy HH:mm")]}),e.affectedProducts&&e.affectedProducts.length>0&&t.jsxs("div",{className:"mb-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Produtos Afetados:"}),t.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:e.affectedProducts.map((e=>t.jsxs("span",{className:"text-xs bg-gray-100 text-gray-700 px-2 py-1 rounded",children:["Produto ",e]},e)))})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-3",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Poss\xedveis Causas:"}),t.jsx("ul",{className:"text-sm text-gray-600 space-y-1",children:e.possibleCauses.map(((e,a)=>t.jsxs("li",{className:"flex items-start",children:[t.jsx("span",{className:"text-gray-400 mr-2",children:"\u2022"}),e]},a)))})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"A\xe7\xf5es Sugeridas:"}),t.jsx("ul",{className:"text-sm text-gray-600 space-y-1",children:e.suggestedActions.map(((e,a)=>t.jsxs("li",{className:"flex items-start",children:[t.jsx(R,{className:"h-3 w-3 text-gray-400 mr-1 mt-0.5"}),e]},a)))})]})]})]})})},e.id)))})}),"recommendations"===o&&t.jsx("div",{className:"space-y-6",children:t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.recommendations.map((e=>t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>c(d===e.id?null:e.id),children:[t.jsxs("div",{className:"flex items-start justify-between mb-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[u(e.priority),t.jsx("h4",{className:"font-semibold text-gray-900",children:e.title})]}),t.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium "+("performance"===e.category?"bg-purple-100 text-purple-700":"engagement"===e.category?"bg-blue-100 text-blue-700":"content"===e.category?"bg-green-100 text-green-700":"timing"===e.category?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"),children:e.category})]}),t.jsx("p",{className:"text-sm text-gray-600 mb-3",children:e.description}),t.jsx("div",{className:"flex items-center justify-between text-sm",children:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("span",{className:"text-gray-600",children:["Impacto: ",t.jsxs("span",{className:"font-medium text-green-600",children:["+",e.impact.expectedImprovement,"%"]})]}),t.jsxs("span",{className:"text-gray-600",children:["Dificuldade: ",t.jsx("span",{className:"font-medium "+("easy"===e.implementation.difficulty?"text-green-600":"medium"===e.implementation.difficulty?"text-yellow-600":"text-red-600"),children:"easy"===e.implementation.difficulty?"F\xe1cil":"medium"===e.implementation.difficulty?"M\xe9dia":"Dif\xedcil"})]})]})}),d===e.id&&t.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-700 mb-1",children:"M\xe9trica Alvo:"}),t.jsx("p",{className:"text-gray-600",children:e.impact.metric})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-700 mb-1",children:"Confian\xe7a:"}),t.jsx("p",{className:"text-gray-600",children:H(100*e.impact.confidence)})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-700 mb-1",children:"Tempo Necess\xe1rio:"}),t.jsx("p",{className:"text-gray-600",children:e.implementation.timeRequired})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-700 mb-1",children:"Recursos:"}),t.jsx("p",{className:"text-gray-600",children:e.implementation.resources.join(", ")})]})]}),t.jsx("button",{onClick:a=>{a.stopPropagation(),null==s||s(e.id)},className:"mt-4 w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Implementar Recomenda\xe7\xe3o"})]})]},e.id)))})}),"risks"===o&&(()=>{const{riskAssessment:a,opportunityAnalysis:r}=e;return a.riskFactors.map((e=>({factor:e.factor,risk:100*e.score,fullMark:100}))),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"N\xedvel de Risco Geral"}),t.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 rounded-lg "+("high"===a.overallRisk?"bg-red-100":"medium"===a.overallRisk?"bg-yellow-100":"bg-green-100"),children:[t.jsx(M,{className:"h-5 w-5 "+("high"===a.overallRisk?"text-red-600":"medium"===a.overallRisk?"text-yellow-600":"text-green-600")}),t.jsx("span",{className:"font-medium "+("high"===a.overallRisk?"text-red-700":"medium"===a.overallRisk?"text-yellow-700":"text-green-700"),children:"high"===a.overallRisk?"Alto":"medium"===a.overallRisk?"M\xe9dio":"Baixo"})]})]}),t.jsx(ee,{type:"radial",title:"Fatores de Risco",height:300,message:"Gr\xe1fico radar temporariamente desabilitado"})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Fatores de Risco Detalhados"}),t.jsx("div",{className:"space-y-3",children:a.riskFactors.map(((e,a)=>t.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h4",{className:"font-medium text-gray-900",children:e.factor}),t.jsxs("div",{className:"flex items-center gap-4 mt-1 text-sm text-gray-600",children:[t.jsxs("span",{children:["Probabilidade: ",H(100*e.probability)]}),t.jsxs("span",{children:["Impacto: ",H(100*e.impact)]})]})]}),t.jsx("div",{className:"flex items-center gap-2",children:t.jsx("div",{className:"px-3 py-1 rounded-full text-sm font-medium "+("increasing"===e.trend?"bg-red-100 text-red-700":"decreasing"===e.trend?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"),children:"increasing"===e.trend?"\u2191 Aumentando":"decreasing"===e.trend?"\u2193 Diminuindo":"\u2192 Est\xe1vel"})})]},a)))})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Estrat\xe9gias de Mitiga\xe7\xe3o"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:a.mitigationStrategies.map(((e,a)=>t.jsxs("div",{className:"flex items-start p-3 bg-blue-50 rounded-lg",children:[t.jsx(h,{className:"h-5 w-5 text-blue-600 mr-2 mt-0.5"}),t.jsx("span",{className:"text-sm text-gray-700",children:e})]},a)))})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Oportunidades Identificadas"}),t.jsx("div",{className:"space-y-4",children:r.opportunities.map((e=>t.jsxs("div",{className:"border-l-4 border-green-500 pl-4",children:[t.jsx("h4",{className:"font-semibold text-gray-900",children:e.title}),t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:e.description}),t.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-2 text-sm",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-600",children:"Valor Potencial:"}),t.jsxs("span",{className:"font-medium text-green-600 ml-1",children:["R$ ",W(e.potentialValue)]})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-600",children:"Prazo:"}),t.jsx("span",{className:"font-medium ml-1",children:e.timeframe})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-600",children:"Requisitos:"}),t.jsxs("span",{className:"font-medium ml-1",children:[e.requirements.length," itens"]})]})]})]},e.id)))})]})]})})()]})},le=({filters:e,onExport:a,onSchedule:r,loading:s=!1})=>{var i,l;const[d,c]=n.useState("pdf"),[o,m]=n.useState(["overview","performance","insights"]),[h,g]=n.useState({layout:"standard",language:"pt",includeRawData:!1,includeCommentary:!0}),[u,x]=n.useState(!1),[b,p]=n.useState({frequency:"weekly",dayOfWeek:1,time:"09:00",recipients:[],format:"pdf"}),[y,N]=n.useState(""),f=[{id:"overview",name:"Vis\xe3o Geral",included:!0},{id:"performance",name:"Performance de Produtos",included:!0},{id:"geographic",name:"An\xe1lise Geogr\xe1fica",included:!0},{id:"consumer",name:"Insights do Consumidor",included:!0},{id:"predictive",name:"An\xe1lise Preditiva",included:!0},{id:"trends",name:"Tend\xeancias",included:!0},{id:"recommendations",name:"Recomenda\xe7\xf5es",included:!0}],v=e=>{switch(e){case"pdf":return t.jsx(F,{className:"h-5 w-5"});case"excel":return t.jsx(B,{className:"h-5 w-5"});case"csv":case"json":return t.jsx(z,{className:"h-5 w-5"})}};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Op\xe7\xf5es de Exporta\xe7\xe3o"}),t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Formato do Relat\xf3rio"}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:["pdf","excel","csv","json"].map((e=>t.jsxs("button",{onClick:()=>c(e),className:"flex items-center justify-center gap-2 p-3 rounded-lg border-2 transition-all "+(d===e?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 hover:border-gray-400 text-gray-700"),children:[v(e),t.jsx("span",{className:"font-medium uppercase",children:e})]},e)))})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Se\xe7\xf5es do Relat\xf3rio"}),t.jsx("div",{className:"space-y-2",children:f.map((e=>t.jsxs("label",{className:"flex items-center p-3 bg-gray-50 rounded-lg hover:bg-gray-100 cursor-pointer",children:[t.jsx("button",{type:"button",onClick:()=>{return a=e.id,void m((e=>e.includes(a)?e.filter((e=>e!==a)):[...e,a]));var a},className:"mr-3",children:o.includes(e.id)?t.jsx(A,{className:"h-5 w-5 text-blue-600"}):t.jsx(T,{className:"h-5 w-5 text-gray-400"})}),t.jsx("span",{className:"text-sm font-medium text-gray-700",children:e.name})]},e.id)))})]}),"pdf"===d&&t.jsxs("div",{className:"mb-6 space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Layout"}),t.jsxs("select",{value:h.layout,onChange:e=>g((a=>({...a,layout:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[t.jsx("option",{value:"standard",children:"Padr\xe3o"}),t.jsx("option",{value:"executive",children:"Executivo"}),t.jsx("option",{value:"detailed",children:"Detalhado"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Idioma"}),t.jsxs("select",{value:h.language,onChange:e=>g((a=>({...a,language:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[t.jsx("option",{value:"pt",children:"Portugu\xeas"}),t.jsx("option",{value:"en",children:"English"}),t.jsx("option",{value:"es",children:"Espa\xf1ol"})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",checked:h.includeRawData,onChange:e=>g((a=>({...a,includeRawData:e.target.checked}))),className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),t.jsx("span",{className:"text-sm text-gray-700",children:"Incluir dados brutos"})]}),t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",checked:h.includeCommentary,onChange:e=>g((a=>({...a,includeCommentary:e.target.checked}))),className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),t.jsx("span",{className:"text-sm text-gray-700",children:"Incluir coment\xe1rios e an\xe1lises"})]})]})]}),t.jsx("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg",children:t.jsxs("p",{className:"text-sm text-blue-700",children:[t.jsx($,{className:"inline h-4 w-4 mr-1"}),"Per\xedodo do relat\xf3rio: ",K(e.startDate||new Date(Date.now()-2592e6))," - ",K(e.endDate||new Date)]})}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("button",{onClick:async()=>{const t={format:d,sections:f.map((e=>({...e,included:o.includes(e.id)}))),dateRange:{start:new Date(e.startDate||Date.now()-2592e6),end:new Date(e.endDate||Date.now())},filters:e,customization:{branding:{companyName:"True Label"},...h}};try{await a(t),G.success(`Relat\xf3rio ${d.toUpperCase()} exportado com sucesso!`)}catch(r){G.error("Erro ao exportar relat\xf3rio. Tente novamente.")}},disabled:s||0===o.length,className:"flex items-center gap-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[s?t.jsx(U,{size:"sm",className:"text-white"}):t.jsx(E,{className:"h-4 w-4"}),"Exportar Relat\xf3rio"]}),r&&t.jsxs("button",{onClick:()=>x(!0),className:"flex items-center gap-2 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[t.jsx(L,{className:"h-4 w-4"}),"Agendar Relat\xf3rio"]})]})]}),u&&t.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-50 flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Agendar Relat\xf3rio"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Frequ\xeancia"}),t.jsxs("select",{value:b.frequency,onChange:e=>p((a=>({...a,frequency:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[t.jsx("option",{value:"daily",children:"Di\xe1rio"}),t.jsx("option",{value:"weekly",children:"Semanal"}),t.jsx("option",{value:"monthly",children:"Mensal"}),t.jsx("option",{value:"quarterly",children:"Trimestral"})]})]}),"weekly"===b.frequency&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Dia da Semana"}),t.jsxs("select",{value:b.dayOfWeek,onChange:e=>p((a=>({...a,dayOfWeek:Number(e.target.value)}))),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[t.jsx("option",{value:0,children:"Domingo"}),t.jsx("option",{value:1,children:"Segunda-feira"}),t.jsx("option",{value:2,children:"Ter\xe7a-feira"}),t.jsx("option",{value:3,children:"Quarta-feira"}),t.jsx("option",{value:4,children:"Quinta-feira"}),t.jsx("option",{value:5,children:"Sexta-feira"}),t.jsx("option",{value:6,children:"S\xe1bado"})]})]}),"monthly"===b.frequency&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Dia do M\xeas"}),t.jsx("input",{type:"number",min:"1",max:"31",value:b.dayOfMonth||1,onChange:e=>p((a=>({...a,dayOfMonth:Number(e.target.value)}))),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hor\xe1rio"}),t.jsx("input",{type:"time",value:b.time,onChange:e=>p((a=>({...a,time:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Destinat\xe1rios"}),t.jsxs("div",{className:"flex gap-2 mb-2",children:[t.jsx("input",{type:"email",value:y,onChange:e=>N(e.target.value),placeholder:"email@exemplo.com",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),t.jsx("button",{onClick:()=>{y&&(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(y)?(p((e=>({...e,recipients:[...e.recipients||[],y]}))),N("")):G.error("Email inv\xe1lido"))},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Adicionar"})]}),t.jsx("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:null==(i=b.recipients)?void 0:i.map((e=>t.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[t.jsx("span",{className:"text-sm text-gray-700",children:e}),t.jsx("button",{onClick:()=>(e=>{p((a=>{var t;return{...a,recipients:(null==(t=a.recipients)?void 0:t.filter((a=>a!==e)))||[]}}))})(e),className:"text-red-600 hover:text-red-700",children:t.jsx(ne,{className:"h-4 w-4"})})]},e)))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Formato"}),t.jsxs("select",{value:b.format,onChange:e=>p((a=>({...a,format:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[t.jsx("option",{value:"pdf",children:"PDF"}),t.jsx("option",{value:"excel",children:"Excel"}),t.jsx("option",{value:"csv",children:"CSV"})]})]})]}),t.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[t.jsx("button",{onClick:()=>x(!1),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),t.jsxs("button",{onClick:async()=>{var e;if(r)if(0!==(null==(e=b.recipients)?void 0:e.length))try{await r(b),G.success("Relat\xf3rio agendado com sucesso!"),x(!1),p({frequency:"weekly",dayOfWeek:1,time:"09:00",recipients:[],format:"pdf"})}catch(a){G.error("Erro ao agendar relat\xf3rio. Tente novamente.")}else G.error("Adicione pelo menos um destinat\xe1rio")},disabled:s||0===(null==(l=b.recipients)?void 0:l.length),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[t.jsx(I,{className:"h-4 w-4"}),"Agendar"]})]})]})})]})},ne=()=>t.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})});function de(){var e,a,i,l,d,c,o,m,h;const[g,u]=n.useState(null),[x,b]=n.useState(null),[p,y]=n.useState({startDate:X(Y(new Date,30),"yyyy-MM-dd"),endDate:X(new Date,"yyyy-MM-dd")}),[f,v]=n.useState("30d"),[w,k]=n.useState("overview"),[C,D]=n.useState(null),[j,M]=n.useState(null),{loading:R,execute:S}=Q((async()=>{try{M(null);const[e,a]=await Promise.all([_.getAnalyticsOverview(p),_.getEnhancedAnalytics(p)]);u(e),b(a)}catch(e){M("Erro ao carregar dados de analytics. Por favor, tente novamente.")}})),{loading:A,execute:T}=Q((async()=>{const e=await _.getGeographicAnalytics(p);b((a=>a?{...a,geographic:e}:null))})),{loading:$,execute:E}=Q((async()=>{const e=(null==x?void 0:x.performance.map((e=>e.productId)))||["1","2","3"],a=await Promise.all(e.map((e=>_.getProductPerformance(e,p))));b((e=>e?{...e,performance:a}:null))})),{loading:L,execute:I}=Q((async()=>{const e=await _.getConsumerInsights(p);b((a=>a?{...a,consumer:e}:null))})),{loading:z,execute:B}=Q((async()=>{const e=await _.getPredictiveInsights(p);b((a=>a?{...a,predictive:e}:null))})),{loading:F,execute:O}=Q((async e=>{const a=await _.exportCustomReport(e),t=`analytics-report-${X(new Date,"yyyy-MM-dd")}.${e.format}`;_.downloadReport(a,t)}));n.useEffect((()=>{if("overview"===w)return _.connectWebSocket((e=>{"update"===e.type&&x&&b((a=>a?{...a,realtime:e.data}:null))})),()=>{_.disconnectWebSocket()}}),[w]),n.useEffect((()=>{if(C){const e=setInterval((()=>{S()}),C);return()=>clearInterval(e)}}),[C,p]),n.useEffect((()=>{S()}),[p]);const W=e=>{v(e);const a=new Date;let t=new Date;switch(e){case"7d":t=Y(a,7);break;case"30d":t=Y(a,30);break;case"90d":t=Y(a,90);break;case"1y":t=Y(a,365)}y({...p,startDate:X(Z(t),"yyyy-MM-dd"),endDate:X(J(a),"yyyy-MM-dd")})},H=e=>{var a,t;switch(k(e),e){case"geographic":(null==(a=null==x?void 0:x.geographic)?void 0:a.length)||T();break;case"products":(null==(t=null==x?void 0:x.performance)?void 0:t.length)||E();break;case"consumers":(null==x?void 0:x.consumer)||I();break;case"predictive":(null==x?void 0:x.predictive)||B()}};if(R&&!g)return t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx(U,{size:"lg"})});if(j)return t.jsx("div",{className:"flex flex-col items-center justify-center h-64",children:t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-red-600 mb-4",children:j}),t.jsx("button",{onClick:()=>S(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Tentar Novamente"})]})});if(!g||!x)return t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("p",{className:"text-gray-500",children:"Nenhum dado de analytics dispon\xedvel."})});const{qrScans:K,engagement:re,topProducts:ne}=g;return K.scansByPeriod.map((e=>({...e,formattedDate:X(new Date(e.date),"dd/MM")}))),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard de Analytics"}),t.jsx("p",{className:"text-gray-600 mt-1",children:"Acompanhe o desempenho e engajamento dos seus produtos"})]}),t.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.jsxs("div",{className:"flex items-center gap-2 bg-white rounded-lg shadow-sm border border-gray-200 p-1",children:[t.jsx("button",{onClick:()=>W("7d"),className:"px-3 py-1.5 rounded text-sm font-medium transition-colors "+("7d"===f?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"),children:"7 dias"}),t.jsx("button",{onClick:()=>W("30d"),className:"px-3 py-1.5 rounded text-sm font-medium transition-colors "+("30d"===f?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"),children:"30 dias"}),t.jsx("button",{onClick:()=>W("90d"),className:"px-3 py-1.5 rounded text-sm font-medium transition-colors "+("90d"===f?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"),children:"90 dias"}),t.jsx("button",{onClick:()=>W("1y"),className:"px-3 py-1.5 rounded text-sm font-medium transition-colors "+("1y"===f?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"),children:"1 ano"})]}),t.jsxs("select",{value:C||"",onChange:e=>D(e.target.value?Number(e.target.value):null),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[t.jsx("option",{value:"",children:"Sem atualiza\xe7\xe3o"}),t.jsx("option",{value:"30000",children:"30 segundos"}),t.jsx("option",{value:"60000",children:"1 minuto"}),t.jsx("option",{value:"300000",children:"5 minutos"})]}),t.jsx("button",{onClick:()=>S(),disabled:R,className:"p-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:t.jsx(q,{className:"h-4 w-4 "+(R?"animate-spin":"")})})]})]}),t.jsx("div",{className:"border-b border-gray-200",children:t.jsxs("nav",{className:"-mb-px flex space-x-8",children:[t.jsx("button",{onClick:()=>H("overview"),className:"py-2 px-1 border-b-2 font-medium text-sm "+("overview"===w?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Vis\xe3o Geral"}),t.jsx("button",{onClick:()=>H("geographic"),className:"py-2 px-1 border-b-2 font-medium text-sm "+("geographic"===w?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Geogr\xe1fico"}),t.jsx("button",{onClick:()=>H("products"),className:"py-2 px-1 border-b-2 font-medium text-sm "+("products"===w?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Produtos"}),t.jsx("button",{onClick:()=>H("consumers"),className:"py-2 px-1 border-b-2 font-medium text-sm "+("consumers"===w?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Consumidores"}),t.jsx("button",{onClick:()=>H("predictive"),className:"py-2 px-1 border-b-2 font-medium text-sm "+("predictive"===w?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Preditivo"}),t.jsx("button",{onClick:()=>H("export"),className:"py-2 px-1 border-b-2 font-medium text-sm "+("export"===w?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Exportar"})]})}),"overview"===w&&t.jsxs(t.Fragment,{children:[x.realtime&&t.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(s,{className:"h-5 w-5 text-yellow-600 animate-pulse"}),t.jsx("span",{className:"font-medium text-yellow-800",children:"Atividade em Tempo Real"})]}),t.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[t.jsxs("span",{className:"text-yellow-700",children:[t.jsx(N,{className:"inline h-4 w-4 mr-1"}),x.realtime.activeUsers," usu\xe1rios ativos"]}),t.jsxs("span",{className:"text-yellow-700",children:[t.jsx(V,{className:"inline h-4 w-4 mr-1"}),x.realtime.activeScans," escaneamentos ativos"]})]})]})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[t.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200 hover:shadow-md transition-shadow duration-200",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Total de Escaneamentos"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:K.totalScans.toLocaleString()}),x.comparisons&&t.jsxs("p",{className:"text-sm mt-1 "+((null==(e=x.comparisons.changes.totalScans)?void 0:e.percentage)>=0?"text-green-600":"text-red-600"),children:[(null==(a=x.comparisons.changes.totalScans)?void 0:a.percentage)>=0?"+":"",null==(i=x.comparisons.changes.totalScans)?void 0:i.percentage.toFixed(1),"% vs per\xedodo anterior"]})]}),t.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:t.jsx(V,{className:"h-6 w-6 text-blue-600"})})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200 hover:shadow-md transition-shadow duration-200",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Visitantes \xdanicos"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:K.uniqueScans.toLocaleString()}),x.comparisons&&t.jsxs("p",{className:"text-sm mt-1 "+((null==(l=x.comparisons.changes.uniqueUsers)?void 0:l.percentage)>=0?"text-green-600":"text-red-600"),children:[(null==(d=x.comparisons.changes.uniqueUsers)?void 0:d.percentage)>=0?"+":"",null==(c=x.comparisons.changes.uniqueUsers)?void 0:c.percentage.toFixed(1),"% vs per\xedodo anterior"]})]}),t.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:t.jsx(N,{className:"h-6 w-6 text-green-600"})})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200 hover:shadow-md transition-shadow duration-200",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Taxa de Engajamento"}),t.jsxs("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:[(100*(1-re.bounceRate)).toFixed(1),"%"]}),x.comparisons&&t.jsxs("p",{className:"text-sm mt-1 "+((null==(o=x.comparisons.changes.engagementRate)?void 0:o.percentage)>=0?"text-green-600":"text-red-600"),children:[(null==(m=x.comparisons.changes.engagementRate)?void 0:m.percentage)>=0?"+":"",null==(h=x.comparisons.changes.engagementRate)?void 0:h.percentage.toFixed(1),"% vs per\xedodo anterior"]})]}),t.jsx("div",{className:"bg-purple-100 p-3 rounded-lg",children:t.jsx(r,{className:"h-6 w-6 text-purple-600"})})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200 hover:shadow-md transition-shadow duration-200",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Tempo M\xe9dio de Sess\xe3o"}),t.jsxs("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:[Math.floor(re.averageSessionDuration/60),"m"," ",re.averageSessionDuration%60,"s"]}),x.summary.topMetrics.find((e=>"Tempo M\xe9dio"===e.name))&&t.jsxs("p",{className:"text-sm mt-1 "+(x.summary.topMetrics.find((e=>"Tempo M\xe9dio"===e.name)).change>=0?"text-green-600":"text-red-600"),children:[x.summary.topMetrics.find((e=>"Tempo M\xe9dio"===e.name)).change>=0?"+":"",x.summary.topMetrics.find((e=>"Tempo M\xe9dio"===e.name)).change.toFixed(1),"% vs per\xedodo anterior"]})]}),t.jsx("div",{className:"bg-orange-100 p-3 rounded-lg",children:t.jsx(P,{className:"h-6 w-6 text-orange-600"})})]})})]}),x.summary.keyInsights.length>0&&t.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[t.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Principais Insights"}),t.jsx("ul",{className:"space-y-1",children:x.summary.keyInsights.map(((e,a)=>t.jsxs("li",{className:"flex items-start",children:[t.jsx("span",{className:"text-blue-600 mr-2",children:"\u2022"}),t.jsx("span",{className:"text-sm text-blue-800",children:e})]},a)))})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Escaneamentos ao Longo do Tempo"}),t.jsx(ee,{type:"area",title:"Escaneamentos ao Longo do Tempo",height:300,message:"Gr\xe1fico de \xe1rea temporariamente desabilitado"})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Distribui\xe7\xe3o por Dispositivo"}),t.jsx(ee,{type:"pie",title:"Distribui\xe7\xe3o por Dispositivo",height:300,message:"Gr\xe1fico de pizza temporariamente desabilitado"})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Produtos Mais Escaneados"}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Produto"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Escaneamentos"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Visitantes \xdanicos"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Taxa de Retorno"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:ne.map((e=>t.jsxs("tr",{className:"hover:bg-gray-50 transition-colors cursor-pointer",children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.productName}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.scans.toLocaleString()}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.uniqueVisitors.toLocaleString()}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[((e.scans-e.uniqueVisitors)/e.scans*100).toFixed(1),"%"]})]},e.productId)))})]})})]})]}),"geographic"===w&&t.jsx("div",{className:"space-y-6",children:t.jsx(ae,{data:x.geographic||[],loading:A,onLocationClick:e=>{}})}),"products"===w&&t.jsx(te,{data:x.performance||[],loading:$,onProductSelect:e=>{}}),"consumers"===w&&t.jsx(se,{data:x.consumer||{segments:[],behaviors:[],preferences:{topSections:[],topProducts:[],peakHours:[],deviceDistribution:[]},loyaltyMetrics:{returnRate:0,frequencyDistribution:[],lifetimeValue:0,churnRate:0,nps:0}},loading:L}),"predictive"===w&&t.jsx(ie,{data:x.predictive||{forecasts:[],anomalies:[],recommendations:[],riskAssessment:{overallRisk:"low",riskFactors:[],mitigationStrategies:[]},opportunityAnalysis:{opportunities:[],marketTrends:[],competitiveAdvantages:[]}},loading:z,onRecommendationAction:e=>{G.success("Recomenda\xe7\xe3o adicionada \xe0 lista de tarefas")}}),"export"===w&&t.jsx(le,{filters:p,onExport:O,onSchedule:async e=>{await _.scheduleReport(e),G.success("Relat\xf3rio agendado com sucesso")},loading:F})]})}export{de as default};
