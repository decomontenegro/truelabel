import{r as e,j as a,C as t,a9 as s,n as r,o as l,G as i,ae as d,Q as c,a2 as m}from"./react-core-XCdXHkeW.js";import{d as n,b as o,L as h}from"./react-router-G9IXNjIc.js";import{j as x,L as p,k as g,g as N,e as u,l as b,q as v}from"./index-D7IercYq.js";import"./vendor-BcMaAnXF.js";import"./state-QrSTFgAv.js";import"./react-dom-BslC4xag.js";import"./utils-BtzqxagS.js";import"./forms-Bk6aQ3xQ.js";const f=()=>{const{qrCode:f}=n(),y=o(),[w,j]=e.useState(null),[V,k]=e.useState(!0),[P,C]=e.useState(null),{checkLimit:L,isBlocked:A,timeUntilReset:$}=x(v,`qr-validation-${f||"unknown"}`,"Muitas valida\xe7\xf5es. Aguarde um momento antes de tentar novamente.");if(e.useEffect((()=>{(async()=>{if(f){if(!L())return C(`Muitas tentativas. Aguarde ${$} segundos.`),void k(!1);try{k(!0);const e=`${b.apiUrl}/qr/validate/${f}`,a=await fetch(e);if(!a.ok){if(await a.text(),429===a.status)throw new Error("Muitas requisi\xe7\xf5es. Tente novamente mais tarde.");throw new Error("Produto n\xe3o encontrado")}const t=await a.json();j(t)}catch(e){C(e.message||"Erro ao carregar valida\xe7\xe3o")}finally{k(!1)}}})()}),[f,L]),V)return a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx(p,{size:"lg"}),a.jsx("p",{className:"mt-4 text-gray-600",children:"Carregando valida\xe7\xe3o..."})]})});if(P||!w)return a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"max-w-md mx-auto text-center",children:[a.jsx(t,{className:"h-16 w-16 text-red-500 mx-auto mb-4"}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:A?"Limite de tentativas excedido":"Produto n\xe3o encontrado"}),a.jsx("p",{className:"text-gray-600 mb-6",children:P||"O QR code escaneado n\xe3o corresponde a nenhum produto v\xe1lido."}),A&&$>0&&a.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["Aguarde ",$," segundos antes de tentar novamente."]}),a.jsx(h,{to:"/",className:"btn-primary",children:"Voltar ao in\xedcio"})]})});const{product:E,validation:R,isValidated:q}=w;return e.useEffect((()=>{E&&E.enableSmartLabel&&E.smartLabelUrl&&y(`/smart-label/${E.id}`)}),[E,y]),a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("div",{className:"bg-gradient-to-r from-primary-600 to-primary-700 text-white",children:a.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(s,{className:"h-8 w-8"}),a.jsx("span",{className:"text-xl font-semibold",children:"True Label"})]}),a.jsx(h,{to:"/",className:"text-white/80 hover:text-white transition-colors",children:"Conhecer a plataforma"})]}),a.jsxs("div",{className:"flex flex-col md:flex-row items-center md:items-start space-y-6 md:space-y-0 md:space-x-8",children:[E.imageUrl&&a.jsx("img",{src:E.imageUrl,alt:E.name,className:"w-32 h-32 md:w-40 md:h-40 object-cover rounded-lg shadow-lg bg-white"}),a.jsxs("div",{className:"text-center md:text-left flex-1",children:[a.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-2",children:E.name}),a.jsx("p",{className:"text-xl opacity-90 mb-1",children:E.brand}),a.jsx("p",{className:"text-sm opacity-80",children:E.category}),E.description&&a.jsx("p",{className:"mt-4 text-white/90 max-w-2xl",children:E.description})]})]})]})}),a.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsx("div",{className:"bg-white rounded-lg shadow-sm border mb-6 overflow-hidden",children:a.jsx("div",{className:"p-6 "+(q?"bg-green-50":"bg-yellow-50"),children:a.jsxs("div",{className:"flex items-center space-x-3",children:[q?a.jsx(r,{className:"h-10 w-10 text-green-600"}):a.jsx(l,{className:"h-10 w-10 text-yellow-600"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:q?"Produto Validado":"Valida\xe7\xe3o Pendente"}),a.jsx("p",{className:"text-gray-700 mt-1",children:q?`Validado por ${null==R?void 0:R.laboratory.name} em ${(null==R?void 0:R.validatedAt)?g(R.validatedAt):""}`:"Este produto ainda n\xe3o foi validado por laborat\xf3rio acreditado"})]})]})})}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border mb-6",children:[a.jsx("div",{className:"border-b",children:a.jsxs("nav",{className:"flex -mb-px",children:[a.jsx("button",{className:"px-6 py-3 border-b-2 border-primary-600 text-primary-600 font-medium",children:"Valida\xe7\xe3o"}),a.jsx("button",{className:"px-6 py-3 border-b-2 border-transparent text-gray-600 hover:text-gray-900",children:"Informa\xe7\xf5es"}),a.jsx("button",{className:"px-6 py-3 border-b-2 border-transparent text-gray-600 hover:text-gray-900",children:"Laborat\xf3rio"})]})}),a.jsx("div",{className:"p-6",children:R?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Status da Valida\xe7\xe3o"}),a.jsx("span",{className:`inline-flex px-3 py-1 text-sm font-semibold rounded-full ${u(R.status)}`,children:N(R.status)})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Data da Valida\xe7\xe3o"}),a.jsx("p",{className:"text-gray-900",children:R.validatedAt?g(R.validatedAt):"Pendente"})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Validade"}),a.jsx("p",{className:"text-gray-900",children:R.validatedAt?"V\xe1lido por 12 meses":"N/A"})]})]}),R.summary&&a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Resumo da Valida\xe7\xe3o"}),a.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:a.jsx("p",{className:"text-gray-900",children:R.summary})})]}),a.jsxs("div",{className:"border-t pt-6",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-4",children:"Laborat\xf3rio Respons\xe1vel"}),a.jsxs("div",{className:"flex items-start space-x-4",children:[a.jsx(i,{className:"h-12 w-12 text-gray-400"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-900",children:R.laboratory.name}),a.jsx("p",{className:"text-sm text-gray-600",children:R.laboratory.accreditation}),a.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[a.jsx(r,{className:"h-4 w-4 text-green-500"}),a.jsx("span",{className:"text-sm text-gray-600",children:"Laborat\xf3rio Acreditado"})]})]})]})]})]}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx(l,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Este produto ainda n\xe3o foi validado"}),a.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Entre em contato com a marca para mais informa\xe7\xf5es"})]})})]}),(()=>{const e=(t=E.claims)?Array.isArray(t)?t:"string"==typeof t?t.split(",").map((e=>e.trim())).filter((e=>e.length>0)):[]:[];var t;return e.length>0&&a.jsx("div",{className:"bg-white rounded-lg shadow-sm border mb-6",children:a.jsxs("div",{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Claims do Produto"}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:e.map(((e,t)=>{var s;return a.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-gray-50 rounded-lg",children:[(null==(s=null==R?void 0:R.claimsValidated)?void 0:s[e])?a.jsx(r,{className:"h-5 w-5 text-green-500 flex-shrink-0"}):a.jsx(l,{className:"h-5 w-5 text-yellow-500 flex-shrink-0"}),a.jsx("span",{className:"text-sm font-medium text-gray-900",children:e})]},t)}))})]})})})(),E.nutritionalInfo&&a.jsx("div",{className:"bg-white rounded-lg shadow-sm border mb-6",children:a.jsxs("div",{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informa\xe7\xf5es Nutricionais"}),a.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:a.jsx("pre",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:JSON.stringify(E.nutritionalInfo,null,2)})})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm border mb-6",children:a.jsxs("div",{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Seguran\xe7a & Confian\xe7a"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx(s,{className:"h-6 w-6 text-primary-600 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Plataforma Verificada"}),a.jsx("p",{className:"text-xs text-gray-500",children:"True Label Platform"})]})]}),R&&a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx(i,{className:"h-6 w-6 text-blue-600 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Lab Acreditado"}),a.jsx("p",{className:"text-xs text-gray-500",children:R.laboratory.accreditation})]})]}),a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx(d,{className:"h-6 w-6 text-green-600 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:"\xdaltima Atualiza\xe7\xe3o"}),a.jsx("p",{className:"text-xs text-gray-500",children:g(w.lastUpdated)})]})]}),a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx(c,{className:"h-6 w-6 text-purple-600 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:"QR Code \xdanico"}),a.jsx("p",{className:"text-xs text-gray-500",children:f})]})]})]}),a.jsx("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex",children:[a.jsx(m,{className:"h-5 w-5 text-blue-400 flex-shrink-0"}),a.jsx("div",{className:"ml-3",children:a.jsx("p",{className:"text-sm text-blue-800",children:"Este QR code \xe9 \xfanico e rastre\xe1vel. Cada escaneamento \xe9 registrado para garantir a autenticidade do produto."})})]})})]})}),a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"inline-flex items-center space-x-2 text-sm text-gray-500",children:[a.jsx(m,{className:"h-4 w-4"}),a.jsxs("span",{children:["Valida\xe7\xe3o fornecida pela"," ",a.jsx(h,{to:"/",className:"text-primary-600 hover:text-primary-500",children:"CPG Validation Platform"})]})]}),a.jsx("div",{className:"mt-4",children:a.jsx(h,{to:"/",className:"btn-outline",children:"Conhecer a Plataforma"})})]})]})]})};export{f as default};
