import{r as e,j as l,F as a,o as t,n as s,au as r,aT as d,C as i,k as n}from"./react-core-XCdXHkeW.js";import{u as c,b as o,L as m,f as h}from"./index-D7IercYq.js";import{b as g}from"./react-router-G9IXNjIc.js";import"./vendor-BcMaAnXF.js";import"./state-QrSTFgAv.js";import"./react-dom-BslC4xag.js";import"./utils-BtzqxagS.js";import"./forms-Bk6aQ3xQ.js";function p(){const p=g(),u=c((e=>e.user)),[x,N]=e.useState(!0),[v,b]=e.useState(null),[y,f]=e.useState(null);e.useEffect((()=>{w()}),[]);const w=async()=>{var e;try{N(!0);const[l,a]=await Promise.all([o.get("/api/reports?limit=5"),o.get("/api/validations/queue")]),t=l.data.reports||[],s=a.data.validations||[],r=(new Date).toDateString(),d=t.filter((e=>new Date(e.createdAt).toDateString()===r)).length,i=s.length,n=s.filter((e=>"REJECTED"===e.status)).length,c=i>0?n/i*100:0;b({totalReports:(null==(e=l.data.pagination)?void 0:e.total)||0,pendingValidations:s.filter((e=>"PENDING"===e.status)).length,completedToday:d,rejectionRate:Math.round(c),recentReports:t,pendingTasks:s.filter((e=>"PENDING"===e.status)).slice(0,5)})}catch(l){f("Erro ao carregar dados do dashboard")}finally{N(!1)}};return x?l.jsx("div",{className:"flex items-center justify-center min-h-screen",children:l.jsx(m,{size:"lg"})}):y?l.jsx("div",{className:"p-6",children:l.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:l.jsx("p",{className:"text-red-800",children:y})})}):l.jsxs("div",{className:"p-6 space-y-6",children:[l.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard do Laborat\xf3rio"}),l.jsxs("p",{className:"text-gray-600 mt-1",children:["Bem-vindo, ",null==u?void 0:u.name,"! Gerencie seus relat\xf3rios e valida\xe7\xf5es."]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[l.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total de Relat\xf3rios"}),l.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-1",children:(null==v?void 0:v.totalReports)||0})]}),l.jsx("div",{className:"bg-primary-100 rounded-full p-3",children:l.jsx(a,{className:"h-6 w-6 text-primary-600"})})]})}),l.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Valida\xe7\xf5es Pendentes"}),l.jsx("p",{className:"text-3xl font-bold text-yellow-600 mt-1",children:(null==v?void 0:v.pendingValidations)||0})]}),l.jsx("div",{className:"bg-yellow-100 rounded-full p-3",children:l.jsx(t,{className:"h-6 w-6 text-yellow-600"})})]})}),l.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Conclu\xeddos Hoje"}),l.jsx("p",{className:"text-3xl font-bold text-green-600 mt-1",children:(null==v?void 0:v.completedToday)||0})]}),l.jsx("div",{className:"bg-green-100 rounded-full p-3",children:l.jsx(s,{className:"h-6 w-6 text-green-600"})})]})}),l.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Taxa de Rejei\xe7\xe3o"}),l.jsxs("p",{className:"text-3xl font-bold text-red-600 mt-1",children:[(null==v?void 0:v.rejectionRate)||0,"%"]})]}),l.jsx("div",{className:"bg-red-100 rounded-full p-3",children:l.jsx(r,{className:"h-6 w-6 text-red-600"})})]})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[l.jsxs("button",{onClick:()=>p("/lab/reports/new"),className:"bg-primary-600 text-white rounded-lg p-6 hover:bg-primary-700 transition-colors",children:[l.jsx(d,{className:"h-8 w-8 mb-3"}),l.jsx("h3",{className:"text-lg font-semibold",children:"Novo Relat\xf3rio"}),l.jsx("p",{className:"text-sm mt-1 opacity-90",children:"Fazer upload de an\xe1lise"})]}),l.jsxs("button",{onClick:()=>p("/lab/validations"),className:"bg-white border-2 border-gray-200 rounded-lg p-6 hover:border-primary-600 transition-colors",children:[l.jsx(i,{className:"h-8 w-8 mb-3 text-gray-600"}),l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Fila de Valida\xe7\xe3o"}),l.jsxs("p",{className:"text-sm mt-1 text-gray-600",children:[(null==v?void 0:v.pendingValidations)||0," pendentes"]})]}),l.jsxs("button",{onClick:()=>p("/lab/analytics"),className:"bg-white border-2 border-gray-200 rounded-lg p-6 hover:border-primary-600 transition-colors",children:[l.jsx(n,{className:"h-8 w-8 mb-3 text-gray-600"}),l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Relat\xf3rios"}),l.jsx("p",{className:"text-sm mt-1 text-gray-600",children:"Ver estat\xedsticas"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Tarefas Pendentes"}),(null==v?void 0:v.pendingTasks)&&v.pendingTasks.length>0?l.jsx("div",{className:"space-y-3",children:v.pendingTasks.map((e=>{var a;return l.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 cursor-pointer",onClick:()=>p(`/lab/validations/${e.id}`),children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx(t,{className:"h-5 w-5 text-yellow-600"}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-gray-900",children:(null==(a=e.product)?void 0:a.name)||"Produto"}),l.jsxs("p",{className:"text-sm text-gray-600",children:["Solicitado em ",h(e.createdAt)]})]})]}),l.jsx("span",{className:"text-sm font-medium text-yellow-600",children:"Pendente"})]},e.id)}))}):l.jsx("p",{className:"text-gray-500 text-center py-8",children:"Nenhuma tarefa pendente"})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Relat\xf3rios Recentes"}),(null==v?void 0:v.recentReports)&&v.recentReports.length>0?l.jsx("div",{className:"space-y-3",children:v.recentReports.map((e=>{var t,s,r,d,i,n,c,o,m;return l.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 cursor-pointer",onClick:()=>p(`/lab/reports/${e.id}`),children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx(a,{className:"h-5 w-5 text-primary-600"}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-gray-900",children:(null==(t=e.product)?void 0:t.name)||"Produto"}),l.jsx("p",{className:"text-sm text-gray-600",children:h(e.createdAt)})]})]}),l.jsx("span",{className:"text-sm font-medium "+("VALIDATED"===(null==(r=null==(s=e.validations)?void 0:s[0])?void 0:r.status)?"text-green-600":"REJECTED"===(null==(i=null==(d=e.validations)?void 0:d[0])?void 0:i.status)?"text-red-600":"text-yellow-600"),children:"VALIDATED"===(null==(c=null==(n=e.validations)?void 0:n[0])?void 0:c.status)?"Validado":"REJECTED"===(null==(m=null==(o=e.validations)?void 0:o[0])?void 0:m.status)?"Rejeitado":"Pendente"})]},e.id)}))}):l.jsx("p",{className:"text-gray-500 text-center py-8",children:"Nenhum relat\xf3rio recente"})]})]})]})}export{p as default};
