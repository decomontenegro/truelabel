import{r as e,j as a,V as s}from"./react-core-XCdXHkeW.js";import{s as r}from"./sealService-DAr2tClY.js";import"./vendor-BcMaAnXF.js";import"./state-QrSTFgAv.js";import"./react-dom-BslC4xag.js";import"./index-D7IercYq.js";import"./react-router-G9IXNjIc.js";import"./utils-BtzqxagS.js";import"./forms-Bk6aQ3xQ.js";const i=()=>{const[i,o]=e.useState([]),[d,t]=e.useState([]),[l,c]=e.useState(!1),n="04aa9c1a-c7c2-48a9-84ce-560e50914dfe",m=async()=>{var e;try{c(!0);const a=await r.getSeals({isActive:!0});o(a.seals||[]),s.success(`Carregados ${(null==(e=a.seals)?void 0:e.length)||0} selos`)}catch(a){s.error("Erro ao carregar selos")}finally{c(!1)}},h=async()=>{var e;try{c(!0);const a=await r.getProductSeals({productId:n});t(a.productSeals||[]),s.success(`Carregados ${(null==(e=a.productSeals)?void 0:e.length)||0} selos do produto`)}catch(a){s.error("Erro ao carregar selos do produto")}finally{c(!1)}};return e.useEffect((()=>{m(),h()}),[]),a.jsxs("div",{className:"container mx-auto px-4 py-8",children:[a.jsx("h1",{className:"text-2xl font-bold mb-6",children:"\ud83e\uddea Teste de Selos"}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h2",{className:"text-lg font-semibold",children:["Selos Dispon\xedveis (",i.length,")"]}),a.jsx("button",{onClick:m,disabled:l,className:"btn btn-outline btn-sm",children:"\ud83d\udd04 Recarregar"})]}),a.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:i.map((e=>a.jsxs("div",{className:"p-2 border rounded",children:[a.jsx("div",{className:"font-medium",children:e.name}),a.jsx("div",{className:"text-sm text-gray-600",children:e.purpose}),a.jsxs("div",{className:"text-xs text-gray-400",children:[e.category," \u2022 ",e.isRequired?"Obrigat\xf3rio":"Opcional"]})]},e.id)))})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h2",{className:"text-lg font-semibold",children:["Selos do Produto (",d.length,")"]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:h,disabled:l,className:"btn btn-outline btn-sm",children:"\ud83d\udd04 Recarregar"}),a.jsx("button",{onClick:async()=>{try{c(!0);const e={productId:n,sealId:"sif",certificateNumber:"TEST123",issuedDate:"2024-01-01",expiryDate:"2025-01-01",validatingLaboratory:"Laborat\xf3rio Teste",notes:"Teste de adi\xe7\xe3o de selo"};await r.addProductSeal(e),s.success("Selo adicionado com sucesso!"),await h()}catch(e){s.error("Erro ao adicionar selo")}finally{c(!1)}},disabled:l,className:"btn btn-primary btn-sm",children:"\u2795 Adicionar SIF"})]})]}),a.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:d.map((e=>{var s;return a.jsxs("div",{className:"p-2 border rounded",children:[a.jsx("div",{className:"font-medium",children:(null==(s=e.seal)?void 0:s.name)||e.sealId}),a.jsxs("div",{className:"text-sm text-gray-600",children:["Certificado: ",e.certificateNumber||"N/A"]}),a.jsxs("div",{className:"text-xs text-gray-400",children:["Status: ",e.status," \u2022 Criado: ",new Date(e.createdAt).toLocaleDateString()]})]},e.id)}))})]})]}),a.jsxs("div",{className:"mt-6 bg-gray-100 p-4 rounded-lg",children:[a.jsx("h3",{className:"font-semibold mb-2",children:"\ud83d\udccb Instru\xe7\xf5es:"}),a.jsxs("ul",{className:"text-sm space-y-1",children:[a.jsx("li",{children:"1. Verifique se os selos dispon\xedveis s\xe3o carregados"}),a.jsx("li",{children:"2. Verifique se os selos do produto s\xe3o carregados"}),a.jsx("li",{children:"3. Teste adicionar um selo SIF"}),a.jsx("li",{children:"4. Abra o console do navegador para ver os logs detalhados"})]})]}),l&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:a.jsxs("div",{className:"bg-white p-4 rounded-lg",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto"}),a.jsx("div",{className:"mt-2 text-sm",children:"Carregando..."})]})})]})};export{i as default};
