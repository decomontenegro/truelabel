import{b as t,m as a}from"./index-D7IercYq.js";import{f as i,a as e}from"./fallbackService-QR578FZI.js";const r={async getCertifications(a={}){try{const i=new URLSearchParams;Object.entries(a).forEach((([t,a])=>{void 0!==a&&""!==a&&i.append(t,String(a))}));const e=await t.get(`/certifications?${i.toString()}`);return{data:e.data.certifications||[],pagination:e.data.pagination||{page:1,limit:10,total:0,totalPages:0}}}catch(r){if(i.shouldUseFallback(r)){i.logFallbackUsage("certificationService","getCertifications",r),await i.simulateDelay();let t=[...e.certifications];a.status&&(t=t.filter((t=>t.status===a.status))),a.type&&(t=t.filter((t=>t.type===a.type)));const n=a.page||1,c=a.limit||10,s=(n-1)*c,o=s+c;return{data:t.slice(s,o),pagination:{page:n,limit:c,total:t.length,totalPages:Math.ceil(t.length/c)}}}throw r}},getCertificationById:async a=>(await t.get(`/certifications/${a}`)).data.certification,createCertification:async a=>(await t.post("/certifications",a)).data,updateCertification:async(a,i)=>(await t.put(`/certifications/${a}`,i)).data,deleteCertification:async a=>(await t.delete(`/certifications/${a}`)).data,getProductCertifications:async a=>(await t.get(`/products/${a}/certifications`)).data.certifications||[],addProductCertification:async a=>(await t.post("/product-certifications",a)).data,removeProductCertification:async a=>(await t.delete(`/product-certifications/${a}`)).data,updateProductCertification:async(a,i)=>(await t.put(`/product-certifications/${a}`,i)).data,verifyCertification:async(a,i)=>(await t.post(`/certifications/${a}/verify`,{certificateNumber:i})).data,async getCertificationStatistics(a){const i=new URLSearchParams;return a&&Object.entries(a).forEach((([t,a])=>{a&&i.append(t,a)})),(await t.get(`/certifications/statistics?${i.toString()}`)).data},getCertificationTimeline:async a=>(await t.get(`/certifications/${a}/timeline`)).data,async uploadCertificateDocument(i,e){const r=a({file:e});return(await t.post(`/certifications/${i}/document`,r,{headers:{"Content-Type":"multipart/form-data"}})).data},generateBadge:async a=>(await t.post("/certifications/badges/generate",a)).data,getCertificationBadges:async a=>(await t.get(`/certifications/${a}/badges`)).data.badges||[],async bulkUploadCertifications(i){const e=a({file:i.file,mapping:JSON.stringify(i.mapping)});return(await t.post("/certifications/bulk-upload",e,{headers:{"Content-Type":"multipart/form-data"}})).data},async getCertificationAlerts(a){const i=new URLSearchParams;return a&&Object.entries(a).forEach((([t,a])=>{void 0!==a&&i.append(t,String(a))})),(await t.get(`/certifications/alerts?${i.toString()}`)).data.alerts||[]},markAlertAsRead:async a=>(await t.put(`/certifications/alerts/${a}/read`)).data,configureAlertSettings:async a=>(await t.put("/certifications/alerts/settings",a)).data,isCertificationExpired:t=>new Date(t)<new Date,getCertificationStatusColor(t){switch(t){case"ACTIVE":return"green";case"EXPIRED":case"REVOKED":return"red";case"PENDING":return"yellow";case"SUSPENDED":return"orange";default:return"gray"}},getCertificationStatusLabel(t){switch(t){case"ACTIVE":return"Ativo";case"EXPIRED":return"Expirado";case"PENDING":return"Pendente";case"SUSPENDED":return"Suspenso";case"REVOKED":return"Revogado";default:return t}},getCertificationTypeLabel:t=>({ISO:"ISO",HACCP:"HACCP",ORGANIC:"Org\xe2nico",FAIRTRADE:"Com\xe9rcio Justo",KOSHER:"Kosher",HALAL:"Halal",VEGAN:"Vegano",NON_GMO:"N\xe3o-OGM",GLUTEN_FREE:"Sem Gl\xfaten",RAINFOREST_ALLIANCE:"Rainforest Alliance",BRC:"BRC",IFS:"IFS",OTHER:"Outro"}[t]||t),formatExpiryDate(t){if(!t)return"Data n\xe3o informada";const a=new Date(t);if(isNaN(a.getTime()))return"Data inv\xe1lida";const i=new Date,e=a.getTime()-i.getTime(),r=Math.ceil(e/864e5);return r<0?`Expirado h\xe1 ${Math.abs(r)} dias`:0===r?"Expira hoje":1===r?"Expira amanh\xe3":r<=30?`Expira em ${r} dias`:new Intl.DateTimeFormat("pt-BR").format(a)},getDaysUntilExpiry(t){if(!t)return 0;const a=new Date,i=new Date(t);if(isNaN(i.getTime()))return 0;const e=i.getTime()-a.getTime();return Math.ceil(e/864e5)}};export{r as c};
