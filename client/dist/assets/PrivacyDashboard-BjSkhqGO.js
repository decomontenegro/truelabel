import{c as e,u as s,U as a,V as t,j as r,L as i,D as l,b as c,C as o,X as d,d as n}from"./index--pVY8JWu.js";import{e as m,r as x}from"./vendor-BDxjXY-2.js";import{C as h,B as p}from"./Card-Dz1czHrv.js";import{S as u}from"./square-pen-DyGEqmGt.js";import{T as j}from"./trash-2-CpdeicjR.js";import{S as v}from"./shield-CfWOCZ2j.js";import{T as N}from"./triangle-alert-DpA1U4cI.js";import"./charts-C38Ohhsz.js";
/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f=e("cookie",[["path",{d:"M12 2a10 10 0 1 0 10 10 4 4 0 0 1-5-5 4 4 0 0 1-5-5",key:"laymnq"}],["path",{d:"M8.5 8.5v.01",key:"ue8clq"}],["path",{d:"M16 15.5v.01",key:"14dtrp"}],["path",{d:"M12 12v.01",key:"u5ubse"}],["path",{d:"M11 17v.01",key:"1hyl5a"}],["path",{d:"M7 14v.01",key:"uct60s"}]]);function y(){const e=m(),{user:y}=s(),[g,b]=x.useState(!0),[w,C]=x.useState([]),[E,k]=x.useState(null),[S,P]=x.useState(!1),[D,T]=x.useState(!1),[R,L]=x.useState(""),[O,M]=x.useState(""),[q,A]=x.useState(!1);x.useEffect((()=>{y?I():e("/login")}),[y,e]);const I=async()=>{try{const[e,s]=await Promise.all([a.get("/privacy/requests"),a.get("/privacy/consents")]);C(e.data.requests),k(s.data)}catch(e){t.error("Erro ao carregar dados de privacidade")}finally{b(!1)}},z=async e=>{try{const s=await a.get(`/privacy/data/export?format=${e}`,{responseType:"blob"}),r=new Blob([s.data],{type:"json"===e?"application/json":"text/csv"}),i=window.URL.createObjectURL(r),l=document.createElement("a");l.href=i,l.download=`meus-dados-truelabel.${e}`,document.body.appendChild(l),l.click(),window.URL.revokeObjectURL(i),document.body.removeChild(l),t.success("Dados exportados com sucesso!")}catch(s){t.error("Erro ao exportar dados")}},U=async(e,s)=>{try{await a.post("/privacy/consents",{consents:{[e]:s}}),t.success("Preferências atualizadas"),I()}catch(r){t.error("Erro ao atualizar preferências")}};return g?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsx(i,{size:"large"})}):r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Central de Privacidade"}),r.jsx("p",{className:"mt-2 text-gray-600",children:"Gerencie seus dados pessoais e preferências de privacidade"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[r.jsxs(h,{className:"p-6 text-center hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>T(!0),children:[r.jsx(l,{className:"h-8 w-8 text-primary-600 mx-auto mb-3"}),r.jsx("h3",{className:"font-semibold",children:"Exportar Dados"}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Baixe seus dados pessoais"})]}),r.jsxs(h,{className:"p-6 text-center hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>e("/settings/profile"),children:[r.jsx(u,{className:"h-8 w-8 text-primary-600 mx-auto mb-3"}),r.jsx("h3",{className:"font-semibold",children:"Editar Dados"}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Atualize suas informações"})]}),r.jsxs(h,{className:"p-6 text-center hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>window.open("/privacy-policy","_blank"),children:[r.jsx(c,{className:"h-8 w-8 text-primary-600 mx-auto mb-3"}),r.jsx("h3",{className:"font-semibold",children:"Política de Privacidade"}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Leia nossa política"})]}),r.jsxs(h,{className:"p-6 text-center hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>P(!0),children:[r.jsx(j,{className:"h-8 w-8 text-red-600 mx-auto mb-3"}),r.jsx("h3",{className:"font-semibold text-red-600",children:"Excluir Conta"}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Remova todos seus dados"})]})]}),r.jsx(h,{className:"mb-8",children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx(f,{className:"h-6 w-6 text-primary-600 mr-3"}),r.jsx("h2",{className:"text-xl font-semibold",children:"Preferências de Cookies"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium",children:"Cookies Necessários"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Essenciais para o funcionamento do site"})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"text-sm text-gray-500 mr-3",children:"Sempre ativos"}),r.jsx("input",{type:"checkbox",checked:!0,disabled:!0,className:"h-5 w-5 text-primary-600 rounded cursor-not-allowed"})]})]}),r.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium",children:"Cookies Analíticos"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Nos ajudam a melhorar o site através de estatísticas"})]}),r.jsx("input",{type:"checkbox",checked:(null==E?void 0:E.analytics)||!1,onChange:e=>U("analytics",e.target.checked),className:"h-5 w-5 text-primary-600 rounded focus:ring-primary-500"})]}),r.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium",children:"Cookies de Marketing"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Usados para personalizar anúncios e conteúdo"})]}),r.jsx("input",{type:"checkbox",checked:(null==E?void 0:E.marketing)||!1,onChange:e=>U("marketing",e.target.checked),className:"h-5 w-5 text-primary-600 rounded focus:ring-primary-500"})]})]})]})}),r.jsx(h,{children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx(v,{className:"h-6 w-6 text-primary-600 mr-3"}),r.jsx("h2",{className:"text-xl font-semibold",children:"Histórico de Solicitações"})]}),0===w.length?r.jsx("p",{className:"text-gray-600",children:"Nenhuma solicitação de privacidade registrada."}):r.jsx("div",{className:"space-y-3",children:w.map((e=>r.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center",children:["COMPLETED"===e.status?r.jsx(o,{className:"h-5 w-5 text-green-600 mr-3"}):"REJECTED"===e.status?r.jsx(d,{className:"h-5 w-5 text-red-600 mr-3"}):r.jsx(n,{className:"h-5 w-5 text-yellow-600 mr-3"}),r.jsxs("div",{children:[r.jsxs("p",{className:"font-medium",children:["DELETION"===e.type&&"Exclusão de Dados","ACCESS"===e.type&&"Acesso aos Dados","RECTIFICATION"===e.type&&"Retificação de Dados","PORTABILITY"===e.type&&"Portabilidade de Dados"]}),r.jsxs("p",{className:"text-sm text-gray-600",children:["Solicitado em ",new Date(e.requestedAt).toLocaleDateString("pt-BR")]})]})]}),r.jsxs("span",{className:"px-3 py-1 rounded-full text-sm font-medium "+("COMPLETED"===e.status?"bg-green-100 text-green-800":"REJECTED"===e.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:["COMPLETED"===e.status&&"Concluída","REJECTED"===e.status&&"Rejeitada","PENDING"===e.status&&"Pendente","IN_PROGRESS"===e.status&&"Em Progresso"]})]},e.id)))})]})}),D&&r.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:r.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4",children:[r.jsx("div",{className:"fixed inset-0 bg-black opacity-50",onClick:()=>T(!1)}),r.jsxs("div",{className:"relative bg-white rounded-lg max-w-md w-full p-6",children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Exportar Dados Pessoais"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"Escolha o formato para exportar seus dados pessoais. O arquivo conterá todas as informações que temos sobre você."}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx(p,{variant:"outline",onClick:()=>{z("json"),T(!1)},className:"flex-1",children:"Exportar JSON"}),r.jsx(p,{variant:"primary",onClick:()=>{z("csv"),T(!1)},className:"flex-1",children:"Exportar CSV"})]}),r.jsx(p,{variant:"ghost",onClick:()=>T(!1),className:"w-full mt-3",children:"Cancelar"})]})]})}),S&&r.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:r.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4",children:[r.jsx("div",{className:"fixed inset-0 bg-black opacity-50",onClick:()=>P(!1)}),r.jsxs("div",{className:"relative bg-white rounded-lg max-w-md w-full p-6",children:[r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx(N,{className:"h-6 w-6 text-red-600 mr-3"}),r.jsx("h2",{className:"text-xl font-semibold",children:"Excluir Conta"})]}),r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:[r.jsxs("p",{className:"text-sm text-red-800",children:[r.jsx("strong",{children:"Atenção:"})," Esta ação é irreversível. Todos os seus dados serão permanentemente removidos de nossos sistemas, incluindo:"]}),r.jsxs("ul",{className:"mt-2 text-sm text-red-700 list-disc list-inside",children:[r.jsx("li",{children:"Informações pessoais"}),r.jsx("li",{children:"Produtos e validações"}),r.jsx("li",{children:"Histórico de atividades"}),r.jsx("li",{children:"Acesso à plataforma"})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Motivo da exclusão"}),r.jsx("textarea",{value:R,onChange:e=>L(e.target.value),className:"w-full p-3 border rounded-lg resize-none",rows:3,placeholder:"Por favor, nos diga por que está excluindo sua conta..."})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirme seu email"}),r.jsx("input",{type:"email",value:O,onChange:e=>M(e.target.value),className:"w-full p-3 border rounded-lg",placeholder:null==y?void 0:y.email})]})]}),r.jsxs("div",{className:"flex gap-3 mt-6",children:[r.jsx(p,{variant:"outline",onClick:()=>P(!1),disabled:q,className:"flex-1",children:"Cancelar"}),r.jsx(p,{variant:"danger",onClick:async()=>{var r,i;if(R&&O)if(O===(null==y?void 0:y.email)){A(!0);try{await a.post("/privacy/data/delete",{reason:R,confirmEmail:O}),t.success("Solicitação de exclusão processada. Você receberá um email de confirmação."),P(!1),setTimeout((()=>{s.getState().logout(),e("/")}),3e3)}catch(l){t.error((null==(i=null==(r=l.response)?void 0:r.data)?void 0:i.error)||"Erro ao processar solicitação")}finally{A(!1)}}else t.error("O email de confirmação não corresponde");else t.error("Por favor, preencha todos os campos")},loading:q,className:"flex-1",children:"Excluir Permanentemente"})]})]})]})})]})}export{y as default};
