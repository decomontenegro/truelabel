var e,s,t,a,i,r,n,l,o,c,h,d,u,m,p,x,f,j,g,y,v,N,w,b,R,C,k=e=>{throw TypeError(e)},S=(e,s,t)=>s.has(e)||k("Cannot "+t),O=(e,s,t)=>(S(e,s,"read from private field"),t?t.call(e):s.get(e)),M=(e,s,t)=>s.has(e)?k("Cannot add the same private member more than once"):s instanceof WeakSet?s.add(e):s.set(e,t),A=(e,s,t,a)=>(S(e,s,"write to private field"),a?a.call(e,t):s.set(e,t),t),P=(e,s,t)=>(S(e,s,"access private method"),t);import{k as E,p as D,r as Q,s as T,l as U,n as I,m as q,o as W,t as F,q as _,v as L,w as B,x as V,y as $,z,c as G,j as H,A as K,B as X,f as J,Q as Y,D as Z,E as ee,u as se,G as te}from"./index-DeKtUJAc.js";import{r as ae,L as ie,e as re}from"./vendor-BDxjXY-2.js";import{p as ne}from"./productService-DtNiporo.js";import{u as le}from"./qrStore-DmEC1IPf.js";import{E as oe}from"./eye-CKGr823U.js";import{S as ce}from"./square-pen-DsrxxnjO.js";import{S as he}from"./shield-DaRYoi6m.js";import{M as de}from"./map-pin-CYFbGecx.js";import{P as ue}from"./Pagination-tXnSgtxh.js";import{S as me}from"./search-C2yUKuVE.js";import{P as pe}from"./plus-DeicFfk_.js";import{F as xe}from"./funnel-BfqhAz3v.js";import"./charts-C38Ohhsz.js";var fe=(C=class extends E{constructor(f,j){super(),M(this,x),M(this,e),M(this,s),M(this,t),M(this,a),M(this,i),M(this,r),M(this,n),M(this,l),M(this,o),M(this,c),M(this,h),M(this,d),M(this,u),M(this,m),M(this,p,new Set),this.options=j,A(this,e,f),A(this,l,null),A(this,n,D()),this.options.experimental_prefetchInRender||O(this,n).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(j)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(O(this,s).addObserver(this),je(O(this,s),this.options)?P(this,x,f).call(this):this.updateResult(),P(this,x,v).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return ge(O(this,s),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return ge(O(this,s),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,P(this,x,N).call(this),P(this,x,w).call(this),O(this,s).removeObserver(this)}setOptions(t){const a=this.options,i=O(this,s);if(this.options=O(this,e).defaultQueryOptions(t),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled&&"function"!=typeof this.options.enabled&&"boolean"!=typeof Q(this.options.enabled,O(this,s)))throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");P(this,x,b).call(this),O(this,s).setOptions(this.options),a._defaulted&&!T(this.options,a)&&O(this,e).getQueryCache().notify({type:"observerOptionsUpdated",query:O(this,s),observer:this});const r=this.hasListeners();r&&ye(O(this,s),i,this.options,a)&&P(this,x,f).call(this),this.updateResult(),!r||O(this,s)===i&&Q(this.options.enabled,O(this,s))===Q(a.enabled,O(this,s))&&U(this.options.staleTime,O(this,s))===U(a.staleTime,O(this,s))||P(this,x,j).call(this);const n=P(this,x,g).call(this);!r||O(this,s)===i&&Q(this.options.enabled,O(this,s))===Q(a.enabled,O(this,s))&&n===O(this,m)||P(this,x,y).call(this,n)}getOptimisticResult(t){const n=O(this,e).getQueryCache().build(O(this,e),t),l=this.createResult(n,t);return function(e,s){if(!T(e.getCurrentResult(),s))return!0;return!1}(this,l)&&(A(this,a,l),A(this,r,this.options),A(this,i,O(this,s).state)),l}getCurrentResult(){return O(this,a)}trackResult(e,s){return new Proxy(e,{get:(e,t)=>(this.trackProp(t),null==s||s(t),Reflect.get(e,t))})}trackProp(e){O(this,p).add(e)}getCurrentQuery(){return O(this,s)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(s){const t=O(this,e).defaultQueryOptions(s),a=O(this,e).getQueryCache().build(O(this,e),t);return a.fetch().then((()=>this.createResult(a,t)))}fetch(e){return P(this,x,f).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then((()=>(this.updateResult(),O(this,a))))}createResult(e,d){var u;const m=O(this,s),p=this.options,x=O(this,a),f=O(this,i),j=O(this,r),g=e!==m?e.state:O(this,t),{state:y}=e;let v,N={...y},w=!1;if(d._optimisticResults){const s=this.hasListeners(),t=!s&&je(e,d),a=s&&ye(e,m,d,p);(t||a)&&(N={...N,...L(y.data,e.options)}),"isRestoring"===d._optimisticResults&&(N.fetchStatus="idle")}let{error:b,errorUpdatedAt:R,status:C}=N;v=N.data;let k=!1;if(void 0!==d.placeholderData&&void 0===v&&"pending"===C){let e;(null==x?void 0:x.isPlaceholderData)&&d.placeholderData===(null==j?void 0:j.placeholderData)?(e=x.data,k=!0):e="function"==typeof d.placeholderData?d.placeholderData(null==(u=O(this,h))?void 0:u.state.data,O(this,h)):d.placeholderData,void 0!==e&&(C="success",v=B(null==x?void 0:x.data,e,d),w=!0)}if(d.select&&void 0!==v&&!k)if(x&&v===(null==f?void 0:f.data)&&d.select===O(this,o))v=O(this,c);else try{A(this,o,d.select),v=d.select(v),v=B(null==x?void 0:x.data,v,d),A(this,c,v),A(this,l,null)}catch(U){A(this,l,U)}O(this,l)&&(b=O(this,l),v=O(this,c),R=Date.now(),C="error");const S="fetching"===N.fetchStatus,M="pending"===C,P="error"===C,E=M&&S,Q=void 0!==v,T={status:C,fetchStatus:N.fetchStatus,isPending:M,isSuccess:"success"===C,isError:P,isInitialLoading:E,isLoading:E,data:v,dataUpdatedAt:N.dataUpdatedAt,error:b,errorUpdatedAt:R,failureCount:N.fetchFailureCount,failureReason:N.fetchFailureReason,errorUpdateCount:N.errorUpdateCount,isFetched:N.dataUpdateCount>0||N.errorUpdateCount>0,isFetchedAfterMount:N.dataUpdateCount>g.dataUpdateCount||N.errorUpdateCount>g.errorUpdateCount,isFetching:S,isRefetching:S&&!M,isLoadingError:P&&!Q,isPaused:"paused"===N.fetchStatus,isPlaceholderData:w,isRefetchError:P&&Q,isStale:ve(e,d),refetch:this.refetch,promise:O(this,n)};if(this.options.experimental_prefetchInRender){const s=e=>{"error"===T.status?e.reject(T.error):void 0!==T.data&&e.resolve(T.data)},t=()=>{const e=A(this,n,T.promise=D());s(e)},a=O(this,n);switch(a.status){case"pending":e.queryHash===m.queryHash&&s(a);break;case"fulfilled":"error"!==T.status&&T.data===a.value||t();break;case"rejected":"error"===T.status&&T.error===a.reason||t()}}return T}updateResult(){const e=O(this,a),t=this.createResult(O(this,s),this.options);if(A(this,i,O(this,s).state),A(this,r,this.options),void 0!==O(this,i).data&&A(this,h,O(this,s)),T(t,e))return;A(this,a,t);P(this,x,R).call(this,{listeners:(()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,t="function"==typeof s?s():s;if("all"===t||!t&&!O(this,p).size)return!0;const i=new Set(t??O(this,p));return this.options.throwOnError&&i.add("error"),Object.keys(O(this,a)).some((s=>{const t=s;return O(this,a)[t]!==e[t]&&i.has(t)}))})()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&P(this,x,v).call(this)}},e=new WeakMap,s=new WeakMap,t=new WeakMap,a=new WeakMap,i=new WeakMap,r=new WeakMap,n=new WeakMap,l=new WeakMap,o=new WeakMap,c=new WeakMap,h=new WeakMap,d=new WeakMap,u=new WeakMap,m=new WeakMap,p=new WeakMap,x=new WeakSet,f=function(e){P(this,x,b).call(this);let t=O(this,s).fetch(this.options,e);return(null==e?void 0:e.throwOnError)||(t=t.catch(I)),t},j=function(){P(this,x,N).call(this);const e=U(this.options.staleTime,O(this,s));if(q||O(this,a).isStale||!W(e))return;const t=F(O(this,a).dataUpdatedAt,e);A(this,d,setTimeout((()=>{O(this,a).isStale||this.updateResult()}),t+1))},g=function(){return("function"==typeof this.options.refetchInterval?this.options.refetchInterval(O(this,s)):this.options.refetchInterval)??!1},y=function(e){P(this,x,w).call(this),A(this,m,e),!q&&!1!==Q(this.options.enabled,O(this,s))&&W(O(this,m))&&0!==O(this,m)&&A(this,u,setInterval((()=>{(this.options.refetchIntervalInBackground||_.isFocused())&&P(this,x,f).call(this)}),O(this,m)))},v=function(){P(this,x,j).call(this),P(this,x,y).call(this,P(this,x,g).call(this))},N=function(){O(this,d)&&(clearTimeout(O(this,d)),A(this,d,void 0))},w=function(){O(this,u)&&(clearInterval(O(this,u)),A(this,u,void 0))},b=function(){const a=O(this,e).getQueryCache().build(O(this,e),this.options);if(a===O(this,s))return;const i=O(this,s);A(this,s,a),A(this,t,a.state),this.hasListeners()&&(null==i||i.removeObserver(this),a.addObserver(this))},R=function(t){V.batch((()=>{t.listeners&&this.listeners.forEach((e=>{e(O(this,a))})),O(this,e).getQueryCache().notify({query:O(this,s),type:"observerResultsUpdated"})}))},C);function je(e,s){return function(e,s){return!1!==Q(s.enabled,e)&&void 0===e.state.data&&!("error"===e.state.status&&!1===s.retryOnMount)}(e,s)||void 0!==e.state.data&&ge(e,s,s.refetchOnMount)}function ge(e,s,t){if(!1!==Q(s.enabled,e)&&"static"!==U(s.staleTime,e)){const a="function"==typeof t?t(e):t;return"always"===a||!1!==a&&ve(e,s)}return!1}function ye(e,s,t,a){return(e!==s||!1===Q(a.enabled,e))&&(!t.suspense||"error"!==e.state.status)&&ve(e,t)}function ve(e,s){return!1!==Q(s.enabled,e)&&e.isStaleByTime(U(s.staleTime,e))}var Ne=ae.createContext(!1);Ne.Provider;var we=ae.createContext(function(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}()),be=(e,s,t)=>s.fetchOptimistic(e).catch((()=>{t.clearReset()}));function Re(e,s,t){var a,i,r,n,l;const o=ae.useContext(Ne),c=ae.useContext(we),h=z(),d=h.defaultQueryOptions(e);null==(i=null==(a=h.getDefaultOptions().queries)?void 0:a._experimental_beforeQuery)||i.call(a,d),d._optimisticResults=o?"isRestoring":"optimistic",(e=>{if(e.suspense){const s=e=>"static"===e?e:Math.max(e??1e3,1e3),t=e.staleTime;e.staleTime="function"==typeof t?(...e)=>s(t(...e)):s(t),"number"==typeof e.gcTime&&(e.gcTime=Math.max(e.gcTime,1e3))}})(d),((e,s)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(s.isReset()||(e.retryOnMount=!1))})(d,c),(e=>{ae.useEffect((()=>{e.clearReset()}),[e])})(c);const u=!h.getQueryCache().get(d.queryHash),[m]=ae.useState((()=>new s(h,d))),p=m.getOptimisticResult(d),x=!o&&!1!==e.subscribed;if(ae.useSyncExternalStore(ae.useCallback((e=>{const s=x?m.subscribe(V.batchCalls(e)):I;return m.updateResult(),s}),[m,x]),(()=>m.getCurrentResult()),(()=>m.getCurrentResult())),ae.useEffect((()=>{m.setOptions(d)}),[d,m]),((e,s)=>(null==e?void 0:e.suspense)&&s.isPending)(d,p))throw be(d,m,c);if((({result:e,errorResetBoundary:s,throwOnError:t,query:a,suspense:i})=>e.isError&&!s.isReset()&&!e.isFetching&&a&&(i&&void 0===e.data||$(t,[e.error,a])))({result:p,errorResetBoundary:c,throwOnError:d.throwOnError,query:h.getQueryCache().get(d.queryHash),suspense:d.suspense}))throw p.error;if(null==(n=null==(r=h.getDefaultOptions().queries)?void 0:r._experimental_afterQuery)||n.call(r,d,p),d.experimental_prefetchInRender&&!q&&((e,s)=>e.isLoading&&e.isFetching&&!s)(p,o)){const e=u?be(d,m,c):null==(l=h.getQueryCache().get(d.queryHash))?void 0:l.promise;null==e||e.catch(I).finally((()=>{m.updateResult()}))}return d.notifyOnChangeProps?p:m.trackResult(p)}function Ce(e,s){return Re(e,fe)}
/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=G("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),Se=G("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),Oe=G("inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]),Me=ae.memo((({product:e,userRole:s,onQRCodeClick:t})=>{const a="BRAND"===s||"ADMIN"===s;return H.jsxs("tr",{className:"hover:bg-gray-50",children:[H.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:H.jsxs("div",{className:"flex items-center",children:[e.imageUrl&&H.jsx("img",{className:"h-10 w-10 rounded-lg object-cover mr-3",src:e.imageUrl,alt:e.name,loading:"lazy"}),H.jsxs("div",{children:[H.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.name}),H.jsxs("div",{className:"text-sm text-gray-500",children:[e.brand," • SKU: ",e.sku]})]})]})}),H.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.category}),H.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:H.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${X(e.status)}`,children:K(e.status)})}),H.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:J(e.createdAt)}),H.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:H.jsxs("div",{className:"flex items-center space-x-2",children:[H.jsx(ie,{to:`/dashboard/products/${e.id}`,className:"text-primary-600 hover:text-primary-900",title:"Ver detalhes",children:H.jsx(oe,{className:"h-4 w-4"})}),a&&H.jsxs(H.Fragment,{children:[H.jsx(ie,{to:`/dashboard/products/${e.id}/edit`,className:"text-gray-600 hover:text-gray-900",title:"Editar",children:H.jsx(ce,{className:"h-4 w-4"})}),H.jsx("button",{onClick:()=>t(e),className:"text-green-600 hover:text-green-900",title:e.qrCode?"Ver QR Code":"Gerar QR Code",children:H.jsx(Y,{className:"h-4 w-4"})}),H.jsx(ie,{to:`/dashboard/products/${e.id}/seals`,className:"text-blue-600 hover:text-blue-900",title:"Gerenciar Selos",children:H.jsx(he,{className:"h-4 w-4"})}),H.jsx(ie,{to:`/dashboard/products/${e.id}/traceability`,className:"text-purple-600 hover:text-purple-900",title:"Rastreabilidade",children:H.jsx(de,{className:"h-4 w-4"})})]}),H.jsx("button",{className:"text-gray-400 hover:text-gray-600",children:H.jsx(Se,{className:"h-4 w-4"})})]})})]})}));Me.displayName="ProductRow";const Ae=ae.memo((({product:e,userRole:s,onQRCodeClick:t})=>{const a="BRAND"===s||"ADMIN"===s;return H.jsxs("div",{className:"card-hover border-b border-neutral-200 p-4 transition-all duration-200 ease-in-out hover:bg-neutral-50",children:[H.jsxs("div",{className:"flex items-start justify-between",children:[H.jsxs("div",{className:"flex items-center flex-1",children:[e.imageUrl&&H.jsx("img",{className:"h-12 w-12 rounded-lg object-cover mr-3 flex-shrink-0 transition-transform duration-200 hover:scale-105",src:e.imageUrl,alt:e.name,loading:"lazy"}),H.jsxs("div",{className:"flex-1 min-w-0",children:[H.jsx("h3",{className:"text-sm font-medium text-neutral-900 truncate",children:e.name}),H.jsx("p",{className:"text-sm text-neutral-500 truncate",children:e.brand}),H.jsxs("p",{className:"text-xs text-neutral-400",children:["SKU: ",e.sku]})]})]}),H.jsxs("div",{className:"flex items-center space-x-2 ml-2",children:[H.jsx(ie,{to:`/dashboard/products/${e.id}`,className:"icon-btn text-primary-600 hover:text-primary-700",title:"Ver detalhes",children:H.jsx(oe,{className:"h-4 w-4"})}),a&&H.jsxs(H.Fragment,{children:[H.jsx("button",{onClick:()=>t(e),className:"icon-btn text-success-600 hover:text-success-700",title:e.qrCode?"Ver QR Code":"Gerar QR Code",children:H.jsx(Y,{className:"h-4 w-4"})}),H.jsx(ie,{to:`/dashboard/products/${e.id}/seals`,className:"icon-btn text-info-600 hover:text-info-700",title:"Gerenciar Selos",children:H.jsx(he,{className:"h-4 w-4"})})]})]})]}),H.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[H.jsxs("div",{className:"flex items-center space-x-4",children:[H.jsx("span",{className:`badge ${X(e.status).replace("bg-","badge-").split(" ")[0]}`,children:K(e.status)}),H.jsx("span",{className:"text-xs text-neutral-500",children:e.category})]}),H.jsx("span",{className:"text-xs text-neutral-400",children:J(e.createdAt)})]})]})}));Ae.displayName="ProductCard";const Pe=({className:e,width:s,height:t})=>H.jsx("div",{className:Z("animate-pulse bg-gray-200 dark:bg-gray-700 rounded",e),style:{width:s,height:t}}),Ee=({variant:e="card",count:s=1,className:t})=>{const a=()=>{switch(e){case"card":return H.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 space-y-4",children:[H.jsxs("div",{className:"flex items-center space-x-4",children:[H.jsx(Pe,{className:"h-12 w-12 rounded-full"}),H.jsxs("div",{className:"flex-1 space-y-2",children:[H.jsx(Pe,{className:"h-4 w-3/4"}),H.jsx(Pe,{className:"h-3 w-1/2"})]})]}),H.jsx(Pe,{className:"h-20 w-full"}),H.jsxs("div",{className:"flex justify-between",children:[H.jsx(Pe,{className:"h-8 w-24"}),H.jsx(Pe,{className:"h-8 w-24"})]})]});case"list":return H.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4",children:H.jsxs("div",{className:"flex items-center space-x-4",children:[H.jsx(Pe,{className:"h-10 w-10 rounded"}),H.jsxs("div",{className:"flex-1 space-y-2",children:[H.jsx(Pe,{className:"h-4 w-2/3"}),H.jsx(Pe,{className:"h-3 w-1/3"})]}),H.jsx(Pe,{className:"h-8 w-20"})]})});case"table":return H.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[H.jsx("div",{className:"p-4 border-b",children:H.jsx(Pe,{className:"h-8 w-full"})}),Array.from({length:5}).map(((e,s)=>H.jsxs("div",{className:"p-4 border-b flex items-center space-x-4",children:[H.jsx(Pe,{className:"h-4 w-8"}),H.jsx(Pe,{className:"h-4 flex-1"}),H.jsx(Pe,{className:"h-4 w-24"}),H.jsx(Pe,{className:"h-4 w-24"}),H.jsx(Pe,{className:"h-8 w-20"})]},s)))]});case"form":return H.jsxs("div",{className:"space-y-6",children:[H.jsxs("div",{className:"space-y-2",children:[H.jsx(Pe,{className:"h-4 w-24"}),H.jsx(Pe,{className:"h-10 w-full"})]}),H.jsxs("div",{className:"space-y-2",children:[H.jsx(Pe,{className:"h-4 w-32"}),H.jsx(Pe,{className:"h-10 w-full"})]}),H.jsxs("div",{className:"space-y-2",children:[H.jsx(Pe,{className:"h-4 w-28"}),H.jsx(Pe,{className:"h-24 w-full"})]}),H.jsx(Pe,{className:"h-10 w-32"})]});case"page":return H.jsxs("div",{className:"space-y-6",children:[H.jsx(Pe,{className:"h-8 w-64"}),H.jsx(Pe,{className:"h-4 w-96"}),H.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6}).map(((e,s)=>H.jsx("div",{children:i()},s)))})]});case"inline":return H.jsx(Pe,{className:"h-4 w-24 inline-block"});default:return null}},i=()=>H.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 space-y-4",children:[H.jsxs("div",{className:"flex items-center space-x-4",children:[H.jsx(Pe,{className:"h-12 w-12 rounded-full"}),H.jsxs("div",{className:"flex-1 space-y-2",children:[H.jsx(Pe,{className:"h-4 w-3/4"}),H.jsx(Pe,{className:"h-3 w-1/2"})]})]}),H.jsx(Pe,{className:"h-20 w-full"}),H.jsxs("div",{className:"flex justify-between",children:[H.jsx(Pe,{className:"h-8 w-24"}),H.jsx(Pe,{className:"h-8 w-24"})]})]});return s>1&&"page"!==e&&"inline"!==e?H.jsx("div",{className:Z("space-y-4",t),children:Array.from({length:s}).map(((e,s)=>H.jsx("div",{children:a()},s)))}):H.jsx("div",{className:t,children:a()})},De=({variant:e="default",icon:s,title:t,description:a,action:i,secondaryAction:r,className:n})=>{const l=s||{default:Oe,search:me,error:ee,"no-data":ke,"no-access":ee}[e],o=(e,s=!0)=>{if(!e)return null;const t=Z("inline-flex items-center justify-center px-4 py-2 rounded-md text-sm font-medium transition-colors",s?"bg-blue-600 text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500":"text-gray-700 bg-white border border-gray-300 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500");return e.href?H.jsx(ie,{to:e.href,className:t,children:e.label}):H.jsx("button",{onClick:e.onClick,className:t,children:e.label})};return H.jsx("div",{className:Z("text-center py-12",n),children:H.jsxs("div",{className:"mx-auto max-w-md",children:[H.jsx(l,{className:"mx-auto h-12 w-12 text-gray-400"}),H.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:t}),a&&H.jsx("p",{className:"mt-2 text-sm text-gray-500",children:a}),(i||r)&&H.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row gap-3 justify-center",children:[o(i,!0),o(r,!1)]})]})})},Qe=({onRetry:e,message:s})=>H.jsx(De,{variant:"error",title:"Something went wrong",description:s||"We encountered an error loading this content. Please try again.",action:e?{label:"Try Again",onClick:e}:void 0}),Te=({loading:e,error:s,empty:t,loadingVariant:a="card",loadingCount:i=3,emptyTitle:r="No data found",emptyDescription:n,emptyAction:l,onRetry:o,children:c,className:h})=>{if(e)return H.jsx("div",{className:h,children:H.jsx(Ee,{variant:a,count:i})});if(s){const e="string"==typeof s?s:s.message||"An error occurred";return H.jsx("div",{className:h,children:H.jsx(Qe,{message:e,onRetry:o})})}return t?H.jsx("div",{className:h,children:H.jsx(De,{title:r,description:n,action:l})}):H.jsx("div",{className:h,children:c})},Ue=()=>{const{user:e}=se(),{openModal:s}=le(),[t,a]=ae.useState(""),[i,r]=ae.useState(""),[n,l]=ae.useState(""),[o,c]=ae.useState(""),[h,d]=ae.useState(1),u=ae.useMemo((()=>te((e=>{r(e),d(1)}),300)),[]),m=ae.useCallback((e=>{s(e.id,e.name)}),[s]),p=ae.useCallback((e=>{const s=e.target.value;a(s),u(s)}),[u]),x=ae.useCallback((e=>{l(e.target.value),d(1)}),[]),f=ae.useCallback((e=>{c(e.target.value),d(1)}),[]),{data:j,isLoading:g,error:y}=Ce({queryKey:["products",{search:i,category:n,status:o,page:h}],queryFn:()=>ne.getProducts({search:i,category:n,status:o,page:h,limit:10})}),{data:v}=Ce({queryKey:["categories"],queryFn:ne.getCategories}),N=(null==j?void 0:j.data)||[],w=null==j?void 0:j.pagination,b=re();return H.jsxs("div",{className:"space-y-6",children:[H.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[H.jsxs("div",{children:[H.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Produtos"}),H.jsx("p",{className:"text-gray-600",children:"Gerencie seus produtos e validações"})]}),("BRAND"===(null==e?void 0:e.role)||"ADMIN"===(null==e?void 0:e.role))&&H.jsxs(ie,{to:"/dashboard/products/new",className:"btn-primary flex items-center mt-4 sm:mt-0",children:[H.jsx(pe,{className:"h-4 w-4 mr-2"}),"Novo Produto"]})]}),H.jsx("div",{className:"card p-4",children:H.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[H.jsxs("div",{className:"relative",children:[H.jsx(me,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-neutral-400 pointer-events-none"}),H.jsx("input",{type:"text",placeholder:"Buscar produtos...",value:t,onChange:p,className:"input pl-10"})]}),H.jsxs("select",{value:n,onChange:x,className:"select",children:[H.jsx("option",{value:"",children:"Todas as categorias"}),null==v?void 0:v.map((e=>H.jsx("option",{value:e,children:e},e)))]}),H.jsxs("select",{value:o,onChange:f,className:"select",children:[H.jsx("option",{value:"",children:"Todos os status"}),H.jsx("option",{value:"DRAFT",children:"Rascunho"}),H.jsx("option",{value:"PENDING",children:"Pendente"}),H.jsx("option",{value:"VALIDATED",children:"Validado"}),H.jsx("option",{value:"REJECTED",children:"Rejeitado"}),H.jsx("option",{value:"EXPIRED",children:"Expirado"})]}),H.jsxs("button",{className:"btn-outline flex items-center justify-center",children:[H.jsx(xe,{className:"h-4 w-4 mr-2"}),"Filtros"]})]})}),H.jsx(Te,{loading:g,error:y,empty:0===N.length,loadingVariant:"list",loadingCount:5,emptyTitle:t||n||o?"Nenhum produto encontrado":"Nenhum produto cadastrado",emptyDescription:t||n||o?"Tente ajustar os filtros de busca.":"Comece cadastrando seu primeiro produto.",emptyAction:"BRAND"!==(null==e?void 0:e.role)&&"ADMIN"!==(null==e?void 0:e.role)||t||n||o?void 0:{label:"Cadastrar Produto",onClick:()=>b("/dashboard/products/new")},children:N.length>0&&H.jsxs("div",{className:"card overflow-hidden",children:[H.jsx("div",{className:"hidden md:block overflow-x-auto",children:H.jsxs("table",{className:"min-w-full divide-y divide-neutral-200",children:[H.jsx("thead",{className:"bg-neutral-50",children:H.jsxs("tr",{children:[H.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider",children:"Produto"}),H.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Categoria"}),H.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),H.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Criado em"}),H.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ações"})]})}),H.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:N.map((s=>H.jsx(Me,{product:s,userRole:null==e?void 0:e.role,onQRCodeClick:m},s.id)))})]})}),H.jsx("div",{className:"md:hidden",children:N.map((s=>H.jsx(Ae,{product:s,userRole:null==e?void 0:e.role,onQRCodeClick:m},s.id)))}),w&&w.totalPages>1&&H.jsx(ue,{currentPage:h,totalPages:w.totalPages,totalItems:w.total,itemsPerPage:w.limit,onPageChange:d})]})})]})};export{Ue as default};
