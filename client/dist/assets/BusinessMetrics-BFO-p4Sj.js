import{c as s,j as e,L as a,D as t,P as l,C as i,Q as c,U as r}from"./index-BwznawPq.js";import{r as n}from"./vendor-BDxjXY-2.js";import{B as d,C as x}from"./Card-QKWjSnFv.js";import{u as o}from"./useAsyncAction-D72edhHc.js";import{U as m}from"./users-Cqk33rtl.js";import{R as j,L as h,C as p,X as N,Y as u,T as g,a as f,b as y,P as v,d as b,e as w,B as S,f as R}from"./charts-C38Ohhsz.js";
/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=s("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);function k(){const[s,k]=n.useState("30d"),[B,$]=n.useState(null),[F,L]=n.useState([]),[P,U]=n.useState([]),{execute:T,loading:V}=o((async()=>{const[e,a,t]=await Promise.all([r.get(`/analytics/metrics?period=${s}`),r.get("/analytics/metrics/scans?groupBy=day&limit=30"),r.get("/analytics/metrics/products?limit=10")]);$(e.data.data),L(a.data.data),U(t.data.data)}));n.useEffect((()=>{T()}),[s]);const q=async e=>{try{const a=await r.get(`/analytics/metrics/export?format=${e}&period=${s}`,{responseType:"blob"}),t=new Blob([a.data]),l=window.URL.createObjectURL(t),i=document.createElement("a");i.href=l,i.download=`metrics-${s}-${Date.now()}.${e}`,document.body.appendChild(i),i.click(),window.URL.revokeObjectURL(l),document.body.removeChild(i)}catch(a){}};if(V||!B)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(a,{size:"large"})});const A=[{name:"Aprovadas",value:B.validations.approved,color:"#10B981"},{name:"Pendentes",value:B.validations.pending,color:"#F59E0B"},{name:"Rejeitadas",value:B.validations.rejected,color:"#EF4444"}];return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"M√©tricas de Neg√≥cio"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Vis√£o geral do desempenho da plataforma"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("select",{value:s,onChange:s=>k(s.target.value),className:"px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"7d",children:"√öltimos 7 dias"}),e.jsx("option",{value:"30d",children:"√öltimos 30 dias"}),e.jsx("option",{value:"90d",children:"√öltimos 90 dias"})]}),e.jsxs(d,{variant:"outline",onClick:()=>q("csv"),className:"flex items-center gap-2",children:[e.jsx(t,{className:"h-4 w-4"}),"CSV"]}),e.jsxs(d,{variant:"outline",onClick:()=>q("json"),className:"flex items-center gap-2",children:[e.jsx(t,{className:"h-4 w-4"}),"JSON"]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mb-8",children:[e.jsx(x,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total de Produtos"}),e.jsx("p",{className:"text-2xl font-bold mt-1",children:B.products.total}),e.jsxs("p",{className:"text-xs text-green-600 mt-1",children:["+",B.products.growth,"% este m√™s"]})]}),e.jsx(l,{className:"h-8 w-8 text-primary-600"})]})}),e.jsx(x,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Valida√ß√µes"}),e.jsx("p",{className:"text-2xl font-bold mt-1",children:B.validations.total}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[B.validations.pending," pendentes"]})]}),e.jsx(i,{className:"h-8 w-8 text-green-600"})]})}),e.jsx(x,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"QR Scans"}),e.jsx("p",{className:"text-2xl font-bold mt-1",children:B.qrScans.total}),e.jsxs("p",{className:"text-xs text-green-600 mt-1",children:["+",B.qrScans.growth,"% hoje"]})]}),e.jsx(c,{className:"h-8 w-8 text-purple-600"})]})}),e.jsx(x,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Usu√°rios Ativos"}),e.jsx("p",{className:"text-2xl font-bold mt-1",children:B.users.active}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["de ",B.users.total," total"]})]}),e.jsx(m,{className:"h-8 w-8 text-blue-600"})]})}),e.jsx(x,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"MRR"}),e.jsxs("p",{className:"text-2xl font-bold mt-1",children:["R$ ",B.revenue.mrr.toLocaleString("pt-BR")]}),e.jsxs("p",{className:"text-xs text-green-600 mt-1",children:["+",B.revenue.growth,"%"]})]}),e.jsx(C,{className:"h-8 w-8 text-green-600"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[e.jsxs(x,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Tend√™ncia de Scans"}),e.jsx(j,{width:"100%",height:300,children:e.jsxs(h,{data:F,children:[e.jsx(p,{strokeDasharray:"3 3"}),e.jsx(N,{dataKey:"period"}),e.jsx(u,{}),e.jsx(g,{}),e.jsx(f,{}),e.jsx(y,{type:"monotone",dataKey:"scans",stroke:"#3B82F6",name:"Scans",strokeWidth:2})]})})]}),e.jsxs(x,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Status de Valida√ß√µes"}),e.jsx(j,{width:"100%",height:300,children:e.jsxs(v,{children:[e.jsx(b,{data:A,cx:"50%",cy:"50%",labelLine:!1,label:({name:s,percent:e})=>`${s} ${(100*e).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:A.map(((s,a)=>e.jsx(w,{fill:s.color},`cell-${a}`)))}),e.jsx(g,{})]})})]})]}),e.jsxs(x,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Top 10 Produtos"}),e.jsx(j,{width:"100%",height:400,children:e.jsxs(S,{data:P,children:[e.jsx(p,{strokeDasharray:"3 3"}),e.jsx(N,{dataKey:"name",angle:-45,textAnchor:"end",height:100}),e.jsx(u,{}),e.jsx(g,{}),e.jsx(f,{}),e.jsx(R,{dataKey:"totalScans",fill:"#3B82F6",name:"Scans"}),e.jsx(R,{dataKey:"validations",fill:"#10B981",name:"Valida√ß√µes"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mt-6",children:[e.jsxs(x,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Distribui√ß√£o de Usu√°rios"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Marcas"}),e.jsx("span",{className:"font-semibold",children:B.users.brands})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Laborat√≥rios"}),e.jsx("span",{className:"font-semibold",children:B.users.laboratories})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Validadores"}),e.jsx("span",{className:"font-semibold",children:B.users.total-B.users.brands-B.users.laboratories})]})]})]}),e.jsxs(x,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Performance"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Taxa de Aprova√ß√£o"}),e.jsxs("span",{className:"font-semibold",children:[(B.validations.approved/B.validations.total*100).toFixed(1),"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Produtos Validados"}),e.jsxs("span",{className:"font-semibold",children:[(B.products.validated/B.products.total*100).toFixed(1),"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Engajamento"}),e.jsxs("span",{className:"font-semibold",children:[(B.users.active/B.users.total*100).toFixed(1),"%"]})]})]})]}),e.jsxs(x,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Insights"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["üìà Crescimento de ",B.products.growth,"% em novos produtos"]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["üéØ ",B.qrScans.unique," usu√°rios √∫nicos escanearam QR codes"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"‚è±Ô∏è Tempo m√©dio de valida√ß√£o: 2.3 dias"})]})]})]})]})}export{k as default};
