import{c as e,j as t,E as a,T as s,G as n,U as r,X as i,z as l,N as o,K as c,M as d}from"./index--pVY8JWu.js";import{g as m,r as u,e as p}from"./vendor-BDxjXY-2.js";import{u as h}from"./useAsyncAction-CAXDwRpP.js";import{P as x}from"./plus-CGEZeKeG.js";import{T as f}from"./trash-2-CpdeicjR.js";import{I as g}from"./info-DIqZzMTO.js";import{T as b}from"./triangle-alert-DpA1U4cI.js";import{S as N}from"./save-LlucYqJr.js";import"./charts-C38Ohhsz.js";
/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y=e("apple",[["path",{d:"M12 20.94c1.5 0 2.75 1.06 4 1.06 3 0 6-8 6-12.22A4.91 4.91 0 0 0 17 5c-2.22 0-4 1.44-5 2-1-.56-2.78-2-5-2a4.9 4.9 0 0 0-5 4.78C2 14 5 22 8 22c1.25 0 2.5-1.06 4-1.06Z",key:"3s7exb"}],["path",{d:"M10 2c1 .5 2 2 2 5",key:"fcco2y"}]]);
/*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE */
var v,j,w,T;function A(){if(j)return v;j=1;const{entries:e,setPrototypeOf:t,isFrozen:a,getPrototypeOf:s,getOwnPropertyDescriptor:n}=Object;let{freeze:r,seal:i,create:l}=Object,{apply:o,construct:c}="undefined"!=typeof Reflect&&Reflect;r||(r=function(e){return e}),i||(i=function(e){return e}),o||(o=function(e,t,a){return e.apply(t,a)}),c||(c=function(e,t){return new e(...t)});const d=S(Array.prototype.forEach),m=S(Array.prototype.lastIndexOf),u=S(Array.prototype.pop),p=S(Array.prototype.push),h=S(Array.prototype.splice),x=S(String.prototype.toLowerCase),f=S(String.prototype.toString),g=S(String.prototype.match),b=S(String.prototype.replace),N=S(String.prototype.indexOf),y=S(String.prototype.trim),w=S(Object.prototype.hasOwnProperty),T=S(RegExp.prototype.test),A=(E=TypeError,function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return c(E,t)});var E;function S(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var a=arguments.length,s=new Array(a>1?a-1:0),n=1;n<a;n++)s[n-1]=arguments[n];return o(e,t,s)}}function C(e,s){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:x;t&&t(e,null);let r=s.length;for(;r--;){let t=s[r];if("string"==typeof t){const e=n(t);e!==t&&(a(s)||(s[r]=e),t=e)}e[t]=!0}return e}function _(e){for(let t=0;t<e.length;t++){w(e,t)||(e[t]=null)}return e}function I(t){const a=l(null);for(const[s,n]of e(t)){w(t,s)&&(Array.isArray(n)?a[s]=_(n):n&&"object"==typeof n&&n.constructor===Object?a[s]=I(n):a[s]=n)}return a}function k(e,t){for(;null!==e;){const a=n(e,t);if(a){if(a.get)return S(a.get);if("function"==typeof a.value)return S(a.value)}e=s(e)}return function(){return null}}const D=r(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),R=r(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),L=r(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),O=r(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),M=r(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),F=r(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),P=r(["#text"]),U=r(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),z=r(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),H=r(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),V=r(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),G=i(/\{\{[\w\W]*|[\w\W]*\}\}/gm),B=i(/<%[\w\W]*|[\w\W]*%>/gm),W=i(/\$\{[\w\W]*/gm),q=i(/^data-[\-\w.\u00B7-\uFFFF]+$/),Y=i(/^aria-[\-\w]+$/),K=i(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),$=i(/^(?:\w+script|data):/i),X=i(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Z=i(/^html$/i),J=i(/^[a-z][.\w]*(-[.\w]+)+$/i);var Q=Object.freeze({__proto__:null,ARIA_ATTR:Y,ATTR_WHITESPACE:X,CUSTOM_ELEMENT:J,DATA_ATTR:q,DOCTYPE_NAME:Z,ERB_EXPR:B,IS_ALLOWED_URI:K,IS_SCRIPT_OR_DATA:$,MUSTACHE_EXPR:G,TMPLIT_EXPR:W});const ee=1,te=3,ae=7,se=8,ne=9;var re=function t(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"undefined"==typeof window?null:window;const s=e=>t(e);if(s.version="3.2.6",s.removed=[],!a||!a.document||a.document.nodeType!==ne||!a.Element)return s.isSupported=!1,s;let{document:n}=a;const i=n,o=i.currentScript,{DocumentFragment:c,HTMLTemplateElement:v,Node:j,Element:E,NodeFilter:S,NamedNodeMap:_=a.NamedNodeMap||a.MozNamedAttrMap,HTMLFormElement:G,DOMParser:B,trustedTypes:W}=a,q=E.prototype,Y=k(q,"cloneNode"),$=k(q,"remove"),X=k(q,"nextSibling"),J=k(q,"childNodes"),re=k(q,"parentNode");if("function"==typeof v){const e=n.createElement("template");e.content&&e.content.ownerDocument&&(n=e.content.ownerDocument)}let ie,le="";const{implementation:oe,createNodeIterator:ce,createDocumentFragment:de,getElementsByTagName:me}=n,{importNode:ue}=i;let pe={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]};s.isSupported="function"==typeof e&&"function"==typeof re&&oe&&void 0!==oe.createHTMLDocument;const{MUSTACHE_EXPR:he,ERB_EXPR:xe,TMPLIT_EXPR:fe,DATA_ATTR:ge,ARIA_ATTR:be,IS_SCRIPT_OR_DATA:Ne,ATTR_WHITESPACE:ye,CUSTOM_ELEMENT:ve}=Q;let{IS_ALLOWED_URI:je}=Q,we=null;const Te=C({},[...D,...R,...L,...M,...P]);let Ae=null;const Ee=C({},[...U,...z,...H,...V]);let Se=Object.seal(l(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ce=null,_e=null,Ie=!0,ke=!0,De=!1,Re=!0,Le=!1,Oe=!0,Me=!1,Fe=!1,Pe=!1,Ue=!1,ze=!1,He=!1,Ve=!0,Ge=!1,Be=!0,We=!1,qe={},Ye=null;const Ke=C({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let $e=null;const Xe=C({},["audio","video","img","source","image","track"]);let Ze=null;const Je=C({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Qe="http://www.w3.org/1998/Math/MathML",et="http://www.w3.org/2000/svg",tt="http://www.w3.org/1999/xhtml";let at=tt,st=!1,nt=null;const rt=C({},[Qe,et,tt],f);let it=C({},["mi","mo","mn","ms","mtext"]),lt=C({},["annotation-xml"]);const ot=C({},["title","style","font","a","script"]);let ct=null;const dt=["application/xhtml+xml","text/html"];let mt=null,ut=null;const pt=n.createElement("form"),ht=function(e){return e instanceof RegExp||e instanceof Function},xt=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!ut||ut!==e){if(e&&"object"==typeof e||(e={}),e=I(e),ct=-1===dt.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE,mt="application/xhtml+xml"===ct?f:x,we=w(e,"ALLOWED_TAGS")?C({},e.ALLOWED_TAGS,mt):Te,Ae=w(e,"ALLOWED_ATTR")?C({},e.ALLOWED_ATTR,mt):Ee,nt=w(e,"ALLOWED_NAMESPACES")?C({},e.ALLOWED_NAMESPACES,f):rt,Ze=w(e,"ADD_URI_SAFE_ATTR")?C(I(Je),e.ADD_URI_SAFE_ATTR,mt):Je,$e=w(e,"ADD_DATA_URI_TAGS")?C(I(Xe),e.ADD_DATA_URI_TAGS,mt):Xe,Ye=w(e,"FORBID_CONTENTS")?C({},e.FORBID_CONTENTS,mt):Ke,Ce=w(e,"FORBID_TAGS")?C({},e.FORBID_TAGS,mt):I({}),_e=w(e,"FORBID_ATTR")?C({},e.FORBID_ATTR,mt):I({}),qe=!!w(e,"USE_PROFILES")&&e.USE_PROFILES,Ie=!1!==e.ALLOW_ARIA_ATTR,ke=!1!==e.ALLOW_DATA_ATTR,De=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Re=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,Le=e.SAFE_FOR_TEMPLATES||!1,Oe=!1!==e.SAFE_FOR_XML,Me=e.WHOLE_DOCUMENT||!1,Ue=e.RETURN_DOM||!1,ze=e.RETURN_DOM_FRAGMENT||!1,He=e.RETURN_TRUSTED_TYPE||!1,Pe=e.FORCE_BODY||!1,Ve=!1!==e.SANITIZE_DOM,Ge=e.SANITIZE_NAMED_PROPS||!1,Be=!1!==e.KEEP_CONTENT,We=e.IN_PLACE||!1,je=e.ALLOWED_URI_REGEXP||K,at=e.NAMESPACE||tt,it=e.MATHML_TEXT_INTEGRATION_POINTS||it,lt=e.HTML_INTEGRATION_POINTS||lt,Se=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&ht(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Se.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&ht(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Se.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(Se.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Le&&(ke=!1),ze&&(Ue=!0),qe&&(we=C({},P),Ae=[],!0===qe.html&&(C(we,D),C(Ae,U)),!0===qe.svg&&(C(we,R),C(Ae,z),C(Ae,V)),!0===qe.svgFilters&&(C(we,L),C(Ae,z),C(Ae,V)),!0===qe.mathMl&&(C(we,M),C(Ae,H),C(Ae,V))),e.ADD_TAGS&&(we===Te&&(we=I(we)),C(we,e.ADD_TAGS,mt)),e.ADD_ATTR&&(Ae===Ee&&(Ae=I(Ae)),C(Ae,e.ADD_ATTR,mt)),e.ADD_URI_SAFE_ATTR&&C(Ze,e.ADD_URI_SAFE_ATTR,mt),e.FORBID_CONTENTS&&(Ye===Ke&&(Ye=I(Ye)),C(Ye,e.FORBID_CONTENTS,mt)),Be&&(we["#text"]=!0),Me&&C(we,["html","head","body"]),we.table&&(C(we,["tbody"]),delete Ce.tbody),e.TRUSTED_TYPES_POLICY){if("function"!=typeof e.TRUSTED_TYPES_POLICY.createHTML)throw A('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof e.TRUSTED_TYPES_POLICY.createScriptURL)throw A('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');ie=e.TRUSTED_TYPES_POLICY,le=ie.createHTML("")}else void 0===ie&&(ie=function(e,t){if("object"!=typeof e||"function"!=typeof e.createPolicy)return null;let a=null;const s="data-tt-policy-suffix";t&&t.hasAttribute(s)&&(a=t.getAttribute(s));const n="dompurify"+(a?"#"+a:"");try{return e.createPolicy(n,{createHTML:e=>e,createScriptURL:e=>e})}catch(r){return null}}(W,o)),null!==ie&&"string"==typeof le&&(le=ie.createHTML(""));r&&r(e),ut=e}},ft=C({},[...R,...L,...O]),gt=C({},[...M,...F]),bt=function(e){p(s.removed,{element:e});try{re(e).removeChild(e)}catch(t){$(e)}},Nt=function(e,t){try{p(s.removed,{attribute:t.getAttributeNode(e),from:t})}catch(a){p(s.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e)if(Ue||ze)try{bt(t)}catch(a){}else try{t.setAttribute(e,"")}catch(a){}},yt=function(e){let t=null,a=null;if(Pe)e="<remove></remove>"+e;else{const t=g(e,/^[\r\n\t ]+/);a=t&&t[0]}"application/xhtml+xml"===ct&&at===tt&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");const s=ie?ie.createHTML(e):e;if(at===tt)try{t=(new B).parseFromString(s,ct)}catch(i){}if(!t||!t.documentElement){t=oe.createDocument(at,"template",null);try{t.documentElement.innerHTML=st?le:s}catch(i){}}const r=t.body||t.documentElement;return e&&a&&r.insertBefore(n.createTextNode(a),r.childNodes[0]||null),at===tt?me.call(t,Me?"html":"body")[0]:Me?t.documentElement:r},vt=function(e){return ce.call(e.ownerDocument||e,e,S.SHOW_ELEMENT|S.SHOW_COMMENT|S.SHOW_TEXT|S.SHOW_PROCESSING_INSTRUCTION|S.SHOW_CDATA_SECTION,null)},jt=function(e){return e instanceof G&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof _)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore||"function"!=typeof e.hasChildNodes)},wt=function(e){return"function"==typeof j&&e instanceof j};function Tt(e,t,a){d(e,(e=>{e.call(s,t,a,ut)}))}const At=function(e){let t=null;if(Tt(pe.beforeSanitizeElements,e,null),jt(e))return bt(e),!0;const a=mt(e.nodeName);if(Tt(pe.uponSanitizeElement,e,{tagName:a,allowedTags:we}),Oe&&e.hasChildNodes()&&!wt(e.firstElementChild)&&T(/<[/\w!]/g,e.innerHTML)&&T(/<[/\w!]/g,e.textContent))return bt(e),!0;if(e.nodeType===ae)return bt(e),!0;if(Oe&&e.nodeType===se&&T(/<[/\w]/g,e.data))return bt(e),!0;if(!we[a]||Ce[a]){if(!Ce[a]&&St(a)){if(Se.tagNameCheck instanceof RegExp&&T(Se.tagNameCheck,a))return!1;if(Se.tagNameCheck instanceof Function&&Se.tagNameCheck(a))return!1}if(Be&&!Ye[a]){const t=re(e)||e.parentNode,a=J(e)||e.childNodes;if(a&&t){for(let s=a.length-1;s>=0;--s){const n=Y(a[s],!0);n.__removalCount=(e.__removalCount||0)+1,t.insertBefore(n,X(e))}}}return bt(e),!0}return e instanceof E&&!function(e){let t=re(e);t&&t.tagName||(t={namespaceURI:at,tagName:"template"});const a=x(e.tagName),s=x(t.tagName);return!!nt[e.namespaceURI]&&(e.namespaceURI===et?t.namespaceURI===tt?"svg"===a:t.namespaceURI===Qe?"svg"===a&&("annotation-xml"===s||it[s]):Boolean(ft[a]):e.namespaceURI===Qe?t.namespaceURI===tt?"math"===a:t.namespaceURI===et?"math"===a&&lt[s]:Boolean(gt[a]):e.namespaceURI===tt?!(t.namespaceURI===et&&!lt[s])&&!(t.namespaceURI===Qe&&!it[s])&&!gt[a]&&(ot[a]||!ft[a]):!("application/xhtml+xml"!==ct||!nt[e.namespaceURI]))}(e)?(bt(e),!0):"noscript"!==a&&"noembed"!==a&&"noframes"!==a||!T(/<\/no(script|embed|frames)/i,e.innerHTML)?(Le&&e.nodeType===te&&(t=e.textContent,d([he,xe,fe],(e=>{t=b(t,e," ")})),e.textContent!==t&&(p(s.removed,{element:e.cloneNode()}),e.textContent=t)),Tt(pe.afterSanitizeElements,e,null),!1):(bt(e),!0)},Et=function(e,t,a){if(Ve&&("id"===t||"name"===t)&&(a in n||a in pt))return!1;if(ke&&!_e[t]&&T(ge,t));else if(Ie&&T(be,t));else if(!Ae[t]||_e[t]){if(!(St(e)&&(Se.tagNameCheck instanceof RegExp&&T(Se.tagNameCheck,e)||Se.tagNameCheck instanceof Function&&Se.tagNameCheck(e))&&(Se.attributeNameCheck instanceof RegExp&&T(Se.attributeNameCheck,t)||Se.attributeNameCheck instanceof Function&&Se.attributeNameCheck(t))||"is"===t&&Se.allowCustomizedBuiltInElements&&(Se.tagNameCheck instanceof RegExp&&T(Se.tagNameCheck,a)||Se.tagNameCheck instanceof Function&&Se.tagNameCheck(a))))return!1}else if(Ze[t]);else if(T(je,b(a,ye,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==N(a,"data:")||!$e[e]){if(De&&!T(Ne,b(a,ye,"")));else if(a)return!1}else;return!0},St=function(e){return"annotation-xml"!==e&&g(e,ve)},Ct=function(e){Tt(pe.beforeSanitizeAttributes,e,null);const{attributes:t}=e;if(!t||jt(e))return;const a={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Ae,forceKeepAttr:void 0};let n=t.length;for(;n--;){const i=t[n],{name:l,namespaceURI:o,value:c}=i,m=mt(l),p=c;let h="value"===l?p:y(p);if(a.attrName=m,a.attrValue=h,a.keepAttr=!0,a.forceKeepAttr=void 0,Tt(pe.uponSanitizeAttribute,e,a),h=a.attrValue,!Ge||"id"!==m&&"name"!==m||(Nt(l,e),h="user-content-"+h),Oe&&T(/((--!?|])>)|<\/(style|title)/i,h)){Nt(l,e);continue}if(a.forceKeepAttr)continue;if(!a.keepAttr){Nt(l,e);continue}if(!Re&&T(/\/>/i,h)){Nt(l,e);continue}Le&&d([he,xe,fe],(e=>{h=b(h,e," ")}));const x=mt(e.nodeName);if(Et(x,m,h)){if(ie&&"object"==typeof W&&"function"==typeof W.getAttributeType)if(o);else switch(W.getAttributeType(x,m)){case"TrustedHTML":h=ie.createHTML(h);break;case"TrustedScriptURL":h=ie.createScriptURL(h)}if(h!==p)try{o?e.setAttributeNS(o,l,h):e.setAttribute(l,h),jt(e)?bt(e):u(s.removed)}catch(r){Nt(l,e)}}else Nt(l,e)}Tt(pe.afterSanitizeAttributes,e,null)},_t=function e(t){let a=null;const s=vt(t);for(Tt(pe.beforeSanitizeShadowDOM,t,null);a=s.nextNode();)Tt(pe.uponSanitizeShadowNode,a,null),At(a),Ct(a),a.content instanceof c&&e(a.content);Tt(pe.afterSanitizeShadowDOM,t,null)};return s.sanitize=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=null,n=null,r=null,l=null;if(st=!e,st&&(e="\x3c!--\x3e"),"string"!=typeof e&&!wt(e)){if("function"!=typeof e.toString)throw A("toString is not a function");if("string"!=typeof(e=e.toString()))throw A("dirty is not a string, aborting")}if(!s.isSupported)return e;if(Fe||xt(t),s.removed=[],"string"==typeof e&&(We=!1),We){if(e.nodeName){const t=mt(e.nodeName);if(!we[t]||Ce[t])throw A("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof j)a=yt("\x3c!----\x3e"),n=a.ownerDocument.importNode(e,!0),n.nodeType===ee&&"BODY"===n.nodeName||"HTML"===n.nodeName?a=n:a.appendChild(n);else{if(!Ue&&!Le&&!Me&&-1===e.indexOf("<"))return ie&&He?ie.createHTML(e):e;if(a=yt(e),!a)return Ue?null:He?le:""}a&&Pe&&bt(a.firstChild);const o=vt(We?e:a);for(;r=o.nextNode();)At(r),Ct(r),r.content instanceof c&&_t(r.content);if(We)return e;if(Ue){if(ze)for(l=de.call(a.ownerDocument);a.firstChild;)l.appendChild(a.firstChild);else l=a;return(Ae.shadowroot||Ae.shadowrootmode)&&(l=ue.call(i,l,!0)),l}let m=Me?a.outerHTML:a.innerHTML;return Me&&we["!doctype"]&&a.ownerDocument&&a.ownerDocument.doctype&&a.ownerDocument.doctype.name&&T(Z,a.ownerDocument.doctype.name)&&(m="<!DOCTYPE "+a.ownerDocument.doctype.name+">\n"+m),Le&&d([he,xe,fe],(e=>{m=b(m,e," ")})),ie&&He?ie.createHTML(m):m},s.setConfig=function(){xt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),Fe=!0},s.clearConfig=function(){ut=null,Fe=!1},s.isValidAttribute=function(e,t,a){ut||xt({});const s=mt(e),n=mt(t);return Et(s,n,a)},s.addHook=function(e,t){"function"==typeof t&&p(pe[e],t)},s.removeHook=function(e,t){if(void 0!==t){const a=m(pe[e],t);return-1===a?void 0:h(pe[e],a,1)[0]}return u(pe[e])},s.removeHooks=function(e){pe[e]=[]},s.removeAllHooks=function(){pe={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}},s}();return v=re}const E=m(T?w:(T=1,w=window.DOMPurify||(window.DOMPurify=A().default||A()))),S=e=>E.sanitize(e,{ALLOWED_TAGS:["b","i","em","strong","a","p","br"],ALLOWED_ATTR:["href","target"]}),C=e=>{if(e.length<3||e.length>50)return!1;return/^[A-Za-z0-9_-]+$/.test(e)},_=u.forwardRef((({label:e,error:r,helperText:i,validate:l,sanitize:o=!0,showValidIcon:c=!1,onValidatedChange:d,onChange:m,onBlur:p,value:h,className:x,required:f,...g},b)=>{const[N,y]=u.useState(""),[v,j]=u.useState(!1),[w,T]=u.useState(!1),A=r||N;u.useEffect((()=>{if(l&&h&&w){const e=l(String(h));"string"==typeof e?(y(e),j(!1)):(y(""),j(e))}}),[h,l,w]);return t.jsxs("div",{className:"space-y-1",children:[e&&t.jsxs("label",{className:"block text-sm font-medium text-neutral-700 transition-colors duration-200 hover:text-neutral-900",children:[e,f&&t.jsx("span",{className:"text-error-500 ml-1",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{ref:b,value:h,onChange:e=>{let t=e.target.value;var a;if(o&&t&&(a=t,t=E.sanitize(a,{ALLOWED_TAGS:[]}),e.target.value=t),l&&w){const e=l(t);"string"==typeof e?(y(e),j(!1)):(y(""),j(e))}null==m||m(e),null==d||d(t,v)},onBlur:e=>{if(T(!0),l&&e.target.value){const t=l(e.target.value);"string"==typeof t?(y(t),j(!1)):(y(""),j(t))}null==p||p(e)},className:a("input",A&&"input-error",v&&w&&!A&&"input-success",v&&c&&"pr-10",x),required:f,"aria-invalid":!!A,"aria-describedby":A?`${g.id}-error`:i?`${g.id}-helper`:void 0,...g}),c&&v&&w&&!A&&t.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:t.jsx(s,{className:"h-5 w-5 text-success-500 animate-scale-in"})}),A&&t.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:t.jsx(n,{className:"h-5 w-5 text-error-500 animate-scale-in"})})]}),A&&t.jsx("p",{id:`${g.id}-error`,className:"text-sm text-error-600 animate-slide-down",role:"alert",children:A}),i&&!A&&t.jsx("p",{id:`${g.id}-helper`,className:"text-sm text-neutral-500",children:i})]})}));_.displayName="ValidatedInput";const I=new class{async getDailyValues(e){return(await r.get(`/nutrition/daily-values/${e}`)).data.data}async calculateScore(e){return(await r.post("/nutrition/calculate-score",e)).data.data}async analyzeNutrition(e){return(await r.post("/nutrition/analyze",e)).data.data}async validateClaims(e){return(await r.post("/nutrition/validate-claims",e)).data.data}async compareProducts(e){return(await r.post("/nutrition/compare",{products:e})).data.data}formatNutritionalValue(e,t){return null==e?"-":`${e}${t}`}getGradeColor(e){switch(e){case"A":return"text-green-600 bg-green-100";case"B":return"text-blue-600 bg-blue-100";case"C":return"text-yellow-600 bg-yellow-100";case"D":return"text-orange-600 bg-orange-100";case"E":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}}getScoreColor(e){return e>=80?"text-green-600":e>=65?"text-blue-600":e>=50?"text-yellow-600":e>=35?"text-orange-600":"text-red-600"}validateCompleteness(e){const t=["energy","protein","carbohydrates","fat","fiber","sodium"].filter((t=>void 0===e[t]||null===e[t])),a=Object.keys(e).length,s=Math.round(a/15*100);return{isComplete:0===t.length,missingFields:t,completenessPercentage:s}}},k=({initialData:e,onChange:s,onValidate:r,targetMarket:i="BRAZIL",showValidation:l=!0})=>{const[o,c]=u.useState({servingSize:100,servingUnit:"g",calories:0,totalFat:0,saturatedFat:0,transFat:0,cholesterol:0,sodium:0,totalCarbohydrates:0,dietaryFiber:0,totalSugars:0,protein:0,vitamins:[],minerals:[],...e}),[d,m]=u.useState([]),[p,b]=u.useState({}),{execute:N}=h((async()=>{const e=await I.getValidationWarnings(o);return m(e),null==r||r(e),e}));u.useEffect((()=>{I.getDailyValueReferences(i).then((e=>{const t={};Object.entries(e).forEach((([e,a])=>{const s=o[e];void 0!==s&&"number"==typeof s&&(t[e]=I.calculateDailyValue(s,a.value))})),b(t)}))}),[o,i]),u.useEffect((()=>{if(l){const e=setTimeout((()=>{N()}),500);return()=>clearTimeout(e)}}),[o,l]);const y=(e,t)=>{const a={...o,[e]:t};c(a),s(a)},v=(e,t,a)=>{const s=[...o.vitamins||[]];s[e]={...s[e],[t]:a},y("vitamins",s)},j=(e,t,a)=>{const s=[...o.minerals||[]];s[e]={...s[e],[t]:a},y("minerals",s)},w=(e,s,r,i=!1,l=0,c=.1)=>{const m=Array.isArray(d)?d.find((e=>e.field===s)):void 0,u=o[s]||0,h=p[s];return t.jsxs("div",{className:"space-y-1",children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[e," ",i&&t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("input",{type:"number",value:u,onChange:e=>y(s,parseFloat(e.target.value)||0),min:l,step:c,className:a("input flex-1",m&&"border-red-500 focus:ring-red-500")}),r&&t.jsx("span",{className:"text-sm text-gray-500 w-12",children:r}),void 0!==h&&t.jsxs("span",{className:"text-sm text-gray-500 w-16",children:[h,"% DV"]})]}),m&&t.jsxs("p",{className:"text-sm text-red-600 flex items-center mt-1",children:[t.jsx(n,{className:"h-3 w-3 mr-1"}),m.message]})]},s)};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"card p-6",children:[t.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Informações da Porção"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Tamanho da Porção ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"number",value:o.servingSize||0,onChange:e=>y("servingSize",parseFloat(e.target.value)||0),min:0,step:.1,className:"input"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Unidade ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("select",{value:o.servingUnit||"g",onChange:e=>y("servingUnit",e.target.value),className:"select",children:[t.jsx("option",{value:"g",children:"g (gramas)"}),t.jsx("option",{value:"ml",children:"ml (mililitros)"}),t.jsx("option",{value:"cup",children:"xícara"}),t.jsx("option",{value:"tbsp",children:"colher de sopa"}),t.jsx("option",{value:"tsp",children:"colher de chá"}),t.jsx("option",{value:"piece",children:"unidade"}),t.jsx("option",{value:"unit",children:"porção"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Porções por Embalagem"}),t.jsx("input",{type:"number",value:o.servingsPerContainer||"",onChange:e=>y("servingsPerContainer",parseFloat(e.target.value)||void 0),min:0,step:.1,className:"input",placeholder:"Opcional"})]})]})]}),t.jsxs("div",{className:"card p-6",children:[t.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Valor Energético"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[w("Calorias","calories","kcal",!0),w("Calorias da Gordura","caloriesFromFat","kcal")]})]}),t.jsxs("div",{className:"card p-6",children:[t.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Macronutrientes"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[w("Gorduras Totais","totalFat","g",!0),w("Gorduras Saturadas","saturatedFat","g",!0),w("Gorduras Trans","transFat","g",!0),w("Gorduras Poli-insaturadas","polyunsaturatedFat","g"),w("Gorduras Monoinsaturadas","monounsaturatedFat","g"),w("Colesterol","cholesterol","mg",!0),w("Sódio","sodium","mg",!0),w("Carboidratos Totais","totalCarbohydrates","g",!0),w("Fibra Alimentar","dietaryFiber","g",!0),w("Açúcares Totais","totalSugars","g",!0),w("Açúcares Adicionados","addedSugars","g"),w("Álcool de Açúcar","sugarAlcohol","g"),w("Proteínas","protein","g",!0)]})]}),t.jsxs("div",{className:"card p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold",children:"Vitaminas"}),t.jsxs("button",{type:"button",onClick:()=>{const e=[...o.vitamins||[]];e.push({name:"",amount:0,unit:"mg"}),y("vitamins",e)},className:"btn-outline text-sm flex items-center",children:[t.jsx(x,{className:"h-4 w-4 mr-1"}),"Adicionar Vitamina"]})]}),t.jsx("div",{className:"space-y-3",children:(o.vitamins||[]).map(((e,a)=>t.jsxs("div",{className:"flex items-end space-x-2",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome"}),t.jsx("input",{type:"text",value:e.name,onChange:e=>v(a,"name",e.target.value),className:"input",placeholder:"Ex: Vitamina C"})]}),t.jsxs("div",{className:"w-32",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantidade"}),t.jsx("input",{type:"number",value:e.amount,onChange:e=>v(a,"amount",parseFloat(e.target.value)||0),min:0,step:.1,className:"input"})]}),t.jsxs("div",{className:"w-24",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unidade"}),t.jsxs("select",{value:e.unit,onChange:e=>v(a,"unit",e.target.value),className:"select",children:[t.jsx("option",{value:"mg",children:"mg"}),t.jsx("option",{value:"mcg",children:"mcg"}),t.jsx("option",{value:"IU",children:"IU"}),t.jsx("option",{value:"g",children:"g"})]})]}),t.jsxs("div",{className:"w-20",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"% VD"}),t.jsx("input",{type:"number",value:e.dailyValue||"",onChange:e=>v(a,"dailyValue",parseFloat(e.target.value)||void 0),min:0,max:9999,className:"input"})]}),t.jsx("button",{type:"button",onClick:()=>(e=>{const t=(o.vitamins||[]).filter(((t,a)=>a!==e));y("vitamins",t)})(a),className:"btn-ghost text-red-600 p-2",children:t.jsx(f,{className:"h-4 w-4"})})]},a)))})]}),t.jsxs("div",{className:"card p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold",children:"Minerais"}),t.jsxs("button",{type:"button",onClick:()=>{const e=[...o.minerals||[]];e.push({name:"",amount:0,unit:"mg"}),y("minerals",e)},className:"btn-outline text-sm flex items-center",children:[t.jsx(x,{className:"h-4 w-4 mr-1"}),"Adicionar Mineral"]})]}),t.jsx("div",{className:"space-y-3",children:(o.minerals||[]).map(((e,a)=>t.jsxs("div",{className:"flex items-end space-x-2",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome"}),t.jsx("input",{type:"text",value:e.name,onChange:e=>j(a,"name",e.target.value),className:"input",placeholder:"Ex: Ferro"})]}),t.jsxs("div",{className:"w-32",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantidade"}),t.jsx("input",{type:"number",value:e.amount,onChange:e=>j(a,"amount",parseFloat(e.target.value)||0),min:0,step:.1,className:"input"})]}),t.jsxs("div",{className:"w-24",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unidade"}),t.jsxs("select",{value:e.unit,onChange:e=>j(a,"unit",e.target.value),className:"select",children:[t.jsx("option",{value:"mg",children:"mg"}),t.jsx("option",{value:"mcg",children:"mcg"}),t.jsx("option",{value:"g",children:"g"})]})]}),t.jsxs("div",{className:"w-20",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"% VD"}),t.jsx("input",{type:"number",value:e.dailyValue||"",onChange:e=>j(a,"dailyValue",parseFloat(e.target.value)||void 0),min:0,max:9999,className:"input"})]}),t.jsx("button",{type:"button",onClick:()=>(e=>{const t=(o.minerals||[]).filter(((t,a)=>a!==e));y("minerals",t)})(a),className:"btn-ghost text-red-600 p-2",children:t.jsx(f,{className:"h-4 w-4"})})]},a)))})]}),l&&d.length>0&&t.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:t.jsxs("div",{className:"flex items-start",children:[t.jsx(n,{className:"h-5 w-5 text-yellow-600 mt-0.5 mr-3 flex-shrink-0"}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-medium text-yellow-800 mb-2",children:"Avisos de Validação"}),t.jsx("ul",{className:"text-sm text-yellow-700 space-y-1",children:d.map(((e,a)=>t.jsxs("li",{className:"flex items-start",children:[t.jsx("span",{className:"text-yellow-600 mr-2",children:"•"}),e.message]},a)))})]})]})}),t.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:t.jsxs("div",{className:"flex items-start",children:[t.jsx(g,{className:"h-5 w-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0"}),t.jsxs("div",{className:"text-sm text-blue-700",children:[t.jsx("p",{className:"font-medium mb-1",children:"Dicas para Preenchimento:"}),t.jsxs("ul",{className:"space-y-1 text-xs",children:[t.jsx("li",{children:"• Todos os valores devem ser baseados no tamanho da porção especificada"}),t.jsx("li",{children:"• Campos marcados com * são obrigatórios para conformidade regulatória"}),t.jsxs("li",{children:["• Os valores diários (% VD) são calculados automaticamente com base nas referências do ",i]}),t.jsx("li",{children:"• Adicione vitaminas e minerais relevantes para seu produto"})]})]})]})})]})},D=({nutritionFacts:e,initialClaims:n=[],onChange:r,onValidation:l,targetMarket:o="BRAZIL"})=>{const[c,d]=u.useState(n),[m,p]=u.useState(""),[N,y]=u.useState([]),[v,j]=u.useState([]),{execute:w,loading:T}=h((async()=>{const t=await I.validateHealthClaims(c,e,o);return y(t),null==l||l(t),t})),{execute:A}=h((async()=>{const t=await I.getSuggestedClaims(e,o);return j(t),t}));u.useEffect((()=>{c.length>0&&w()}),[c,e,o]),u.useEffect((()=>{A()}),[e,o]);const E=()=>{if(m.trim()&&!c.includes(m.trim())){const e=[...c,m.trim()];d(e),null==r||r(e),p("")}},S=e=>{switch(e){case"VALID":return t.jsx(s,{className:"h-4 w-4 text-green-600"});case"INVALID":return t.jsx(i,{className:"h-4 w-4 text-red-600"});case"WARNING":return t.jsx(b,{className:"h-4 w-4 text-yellow-600"})}},C=e=>{switch(e){case"VALID":return"bg-green-50 border-green-200";case"INVALID":return"bg-red-50 border-red-200";case"WARNING":return"bg-yellow-50 border-yellow-200"}},_=N.filter((e=>"VALID"===e.status)).length,k=N.filter((e=>"INVALID"===e.status)).length,D=N.filter((e=>"WARNING"===e.status)).length;return t.jsxs("div",{className:"space-y-6",children:[c.length>0&&t.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[t.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-green-800",children:"Válidas"}),t.jsx("p",{className:"text-2xl font-bold text-green-900",children:_})]}),t.jsx(s,{className:"h-8 w-8 text-green-600"})]})}),t.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-yellow-800",children:"Avisos"}),t.jsx("p",{className:"text-2xl font-bold text-yellow-900",children:D})]}),t.jsx(b,{className:"h-8 w-8 text-yellow-600"})]})}),t.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-red-800",children:"Inválidas"}),t.jsx("p",{className:"text-2xl font-bold text-red-900",children:k})]}),t.jsx(i,{className:"h-8 w-8 text-red-600"})]})})]}),t.jsxs("div",{className:"card p-6",children:[t.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Adicionar Alegação"}),t.jsxs("div",{className:"flex items-start space-x-2",children:[t.jsx("div",{className:"flex-1",children:t.jsx("input",{type:"text",value:m,onChange:e=>p(e.target.value),onKeyPress:e=>"Enter"===e.key&&E(),placeholder:"Digite uma alegação nutricional ou de saúde...",className:"input"})}),t.jsxs("button",{onClick:E,disabled:!m.trim(),className:"btn-primary",children:[t.jsx(x,{className:"h-4 w-4 mr-2"}),"Adicionar"]})]})]}),v.length>0&&t.jsxs("div",{className:"card p-6",children:[t.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Alegações Sugeridas"}),t.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Com base nos dados nutricionais fornecidos, as seguintes alegações podem ser válidas:"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:v.map(((e,s)=>t.jsxs("button",{onClick:()=>(e=>{if(!c.includes(e)){const t=[...c,e];d(t),null==r||r(t)}})(e),disabled:c.includes(e),className:a("px-3 py-1.5 text-sm rounded-full transition-colors",c.includes(e)?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-blue-100 text-blue-700 hover:bg-blue-200"),children:[e,!c.includes(e)&&t.jsx(x,{className:"h-3 w-3 ml-1 inline"})]},s)))})]}),c.length>0&&t.jsxs("div",{className:"card p-6",children:[t.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Alegações Atuais"}),T?t.jsxs("div",{className:"flex items-center justify-center py-8",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"}),t.jsx("span",{className:"ml-3 text-gray-600",children:"Validando alegações..."})]}):t.jsx("div",{className:"space-y-3",children:c.map(((e,s)=>{const n=(e=>N.find((t=>t.claim===e)))(e);return t.jsx("div",{className:a("p-4 border rounded-lg transition-colors",n?C(n.status):"bg-gray-50 border-gray-200"),children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[n&&S(n.status),t.jsx("h4",{className:"font-medium text-gray-900",children:e}),n&&t.jsx("span",{className:"text-xs px-2 py-1 bg-gray-100 text-gray-600 rounded",children:(i=n.type,{NUTRIENT_CONTENT:"Conteúdo Nutricional",HEALTH:"Saúde",FUNCTION:"Funcional",REDUCTION_RISK:"Redução de Risco"}[i]||i)})]}),n&&t.jsxs(t.Fragment,{children:[n.evidence&&t.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:[t.jsx("strong",{children:"Evidência:"})," ",n.evidence]}),n.warnings&&n.warnings.length>0&&t.jsxs("div",{className:"mt-2",children:[t.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Avisos:"}),t.jsx("ul",{className:"text-sm text-gray-600 space-y-0.5",children:n.warnings.map(((e,a)=>t.jsxs("li",{className:"flex items-start",children:[t.jsx("span",{className:"text-yellow-600 mr-1",children:"•"}),e]},a)))})]}),n.regulation&&t.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Regulamentação: ",n.regulation]})]})]}),t.jsx("button",{onClick:()=>(e=>{const t=c.filter(((t,a)=>a!==e));d(t),null==r||r(t)})(s),className:"btn-ghost text-red-600 p-2 ml-4",children:t.jsx(f,{className:"h-4 w-4"})})]})},s);var i}))})]}),t.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:t.jsxs("div",{className:"flex items-start",children:[t.jsx(g,{className:"h-5 w-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0"}),t.jsxs("div",{className:"text-sm text-blue-700",children:[t.jsxs("p",{className:"font-medium mb-1",children:["Informações Regulatórias - ",o]}),t.jsxs("ul",{className:"space-y-1 text-xs",children:[t.jsx("li",{children:"• Alegações nutricionais devem ser baseadas em valores por 100g/ml ou por porção"}),t.jsx("li",{children:"• Alegações de saúde requerem evidência científica aprovada"}),t.jsx("li",{children:'• Termos como "light", "zero", "sem" têm critérios específicos'}),t.jsx("li",{children:"• Algumas alegações podem requerer advertências adicionais"})]})]})]})})]})},R=()=>{const e=p(),a=l(),[s,r]=u.useState(!1),[i,m]=u.useState(!1),[h,x]=u.useState(null),[f,g]=u.useState([]),[b,v]=u.useState([]),[j,w]=u.useState({name:"",brand:"",category:"",sku:"",description:"",claims:"",nutritionalInfo:"",imageUrl:""}),T=e=>{const{name:t,value:a}=e.target;w((e=>({...e,[t]:a})))};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsxs("button",{onClick:()=>e("/dashboard/products"),className:"btn btn-outline btn-sm flex items-center",children:[t.jsx(o,{className:"h-4 w-4 mr-2"}),"Voltar"]}),t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Novo Produto"})]}),t.jsxs("form",{onSubmit:async t=>{var s,n,i;if(t.preventDefault(),j.name&&j.brand&&j.category&&j.sku)if(C(j.sku))try{r(!0);const t={...j,description:S(j.description),nutritionalInfo:S(j.nutritionalInfo)};let s=null;if(t.nutritionalInfo.trim())try{s=JSON.parse(t.nutritionalInfo)}catch(l){return void c.error("Formato JSON inválido nas informações nutricionais")}const n={...t,nutritionalInfo:s};await d.createProduct(n),await a.invalidateQueries({queryKey:["products"]}),await a.invalidateQueries({queryKey:["categories"]}),c.success("Produto criado com sucesso!"),e("/dashboard/products")}catch(o){400===(null==(s=o.response)?void 0:s.status)?c.error("Dados inválidos. Verifique os campos."):409===(null==(n=o.response)?void 0:n.status)?c.error("SKU já existe. Use um SKU único."):401===(null==(i=o.response)?void 0:i.status)?c.error("Problema de autenticação, mas produto pode ter sido criado via fallback. Verifique a lista."):c.error("Erro ao criar produto. Tente novamente.")}finally{r(!1)}else c.error("SKU inválido");else c.error("Preencha todos os campos obrigatórios")},className:"space-y-6",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Informações Básicas"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsx(_,{id:"name",name:"name",label:"Nome do Produto",required:!0,value:j.name,onChange:T,placeholder:"Ex: Whey Protein Premium",validate:e=>e.length<3?"Nome deve ter pelo menos 3 caracteres":!(e.length>100)||"Nome deve ter no máximo 100 caracteres",showValidIcon:!0}),t.jsx(_,{id:"brand",name:"brand",label:"Marca",required:!0,value:j.brand,onChange:T,placeholder:"Ex: NutriMax",validate:e=>e.length<2?"Marca deve ter pelo menos 2 caracteres":!(e.length>50)||"Marca deve ter no máximo 50 caracteres",showValidIcon:!0}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 mb-2",children:"Categoria *"}),t.jsxs("select",{id:"category",name:"category",required:!0,value:j.category,onChange:T,className:"input w-full",children:[t.jsx("option",{value:"",children:"Selecione uma categoria"}),["Alimentos","Bebidas","Suplementos","Cosméticos","Higiene Pessoal","Produtos Naturais","Outros"].map((e=>t.jsx("option",{value:e,children:e},e)))]})]}),t.jsx(_,{id:"sku",name:"sku",label:"SKU",required:!0,value:j.sku,onChange:T,placeholder:"Ex: WP-001-VAN",validate:e=>!!C(e)||"SKU deve conter apenas letras, números, hífens e underscores (3-50 caracteres)",showValidIcon:!0})]}),t.jsxs("div",{className:"mt-6",children:[t.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Descrição"}),t.jsx("textarea",{id:"description",name:"description",rows:4,value:j.description,onChange:T,className:"input w-full",placeholder:"Descreva o produto, seus benefícios e características..."})]}),t.jsxs("div",{className:"mt-6",children:[t.jsx("label",{htmlFor:"imageUrl",className:"block text-sm font-medium text-gray-700 mb-2",children:"URL da Imagem"}),t.jsx("input",{type:"url",id:"imageUrl",name:"imageUrl",value:j.imageUrl,onChange:T,className:"input w-full",placeholder:"https://exemplo.com/imagem-produto.jpg"})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Informações Nutricionais"}),t.jsxs("button",{type:"button",onClick:()=>m(!i),className:"btn-outline text-sm flex items-center",children:[t.jsx(y,{className:"h-4 w-4 mr-2"}),i?"Editor Simples":"Editor Avançado"]})]}),i?t.jsxs(t.Fragment,{children:[t.jsx(k,{initialData:h||void 0,onChange:e=>{x(e),w((t=>({...t,nutritionalInfo:JSON.stringify(e,null,2)})))},onValidate:e=>{g(e)},targetMarket:"BRAZIL"}),f.length>0&&t.jsx("div",{className:"mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:t.jsxs("div",{className:"flex items-start",children:[t.jsx(n,{className:"h-5 w-5 text-yellow-600 mt-0.5 mr-3 flex-shrink-0"}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-medium text-yellow-800 mb-2",children:"Avisos de Validação"}),t.jsx("ul",{className:"text-sm text-yellow-700 space-y-1",children:f.map(((e,a)=>t.jsxs("li",{className:"flex items-start",children:[t.jsx("span",{className:"text-yellow-600 mr-2",children:"•"}),e.message]},a)))})]})]})})]}):t.jsxs("div",{children:[t.jsx("label",{htmlFor:"nutritionalInfo",className:"block text-sm font-medium text-gray-700 mb-2",children:"Informações Nutricionais (JSON)"}),t.jsx("textarea",{id:"nutritionalInfo",name:"nutritionalInfo",rows:6,value:j.nutritionalInfo,onChange:T,className:"input w-full font-mono text-sm",placeholder:'{\n  "calorias": "120 kcal",\n  "proteinas": "25g",\n  "carboidratos": "2g",\n  "gorduras": "1g",\n  "fibras": "0g",\n  "sodio": "50mg"\n}'}),t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Formato JSON válido. Deixe em branco se não aplicável."})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Claims e Alegações"}),i&&h?t.jsx(D,{nutritionFacts:h,initialClaims:j.claims.split(",").map((e=>e.trim())).filter(Boolean),onChange:e=>{w((t=>({...t,claims:e.join(", ")})))},onValidation:e=>{v(e)},targetMarket:"BRAZIL"}):t.jsxs("div",{children:[t.jsx("label",{htmlFor:"claims",className:"block text-sm font-medium text-gray-700 mb-2",children:"Claims do Produto"}),t.jsx("textarea",{id:"claims",name:"claims",rows:4,value:j.claims,onChange:T,className:"input w-full",placeholder:"Ex: Rico em proteínas, Sem açúcar adicionado, Fonte de vitaminas..."}),t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Separe múltiplos claims por vírgula"})]}),i&&b.length>0&&t.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[t.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Status de Conformidade"}),t.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-2xl font-bold text-green-600",children:b.filter((e=>"VALID"===e.status)).length}),t.jsx("p",{className:"text-xs text-gray-600",children:"Válidas"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:b.filter((e=>"WARNING"===e.status)).length}),t.jsx("p",{className:"text-xs text-gray-600",children:"Avisos"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-2xl font-bold text-red-600",children:b.filter((e=>"INVALID"===e.status)).length}),t.jsx("p",{className:"text-xs text-gray-600",children:"Inválidas"})]})]})]})]}),t.jsxs("div",{className:"flex justify-end space-x-4",children:[t.jsx("button",{type:"button",onClick:()=>e("/dashboard/products"),className:"btn btn-secondary",disabled:s,children:"Cancelar"}),t.jsx("button",{type:"submit",className:"btn btn-primary",disabled:s,children:s?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"loading-spinner w-4 h-4 mr-2"}),"Criando..."]}):t.jsxs(t.Fragment,{children:[t.jsx(N,{className:"w-4 h-4 mr-2"}),"Criar Produto"]})})]})]})]})};export{R as default};
