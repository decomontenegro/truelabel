import{c as e,V as s,j as a,b as t,X as r,L as i,_ as l,T as c,d as n,D as o,W as d,C as m,e as x}from"./index--pVY8JWu.js";import{r as u,L as p}from"./vendor-BDxjXY-2.js";import{c as h}from"./certificationService-KIeQgB_2.js";import{u as g}from"./useAsyncAction-CAXDwRpP.js";import{P as f}from"./Pagination-CiHTI6Lu.js";import{U as j}from"./upload-BKdPYP5t.js";import{S as y}from"./settings-p6qY8jAy.js";import{T as b}from"./triangle-alert-DpA1U4cI.js";import{C as N}from"./calendar-CskR4dPT.js";import{P as v}from"./plus-CGEZeKeG.js";import{S as w}from"./search-HjzIlawk.js";import{F as C}from"./funnel-Cfq3C2Ol.js";import"./charts-C38Ohhsz.js";import"./fallbackService-D-6NybDe.js";
/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=e("loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]),D=({onUploadComplete:e,productId:i})=>{var l;const[c,n]=u.useState({name:"",description:"",issuer:"",number:"",issueDate:"",expiryDate:"",type:"OTHER",verificationMethod:"MANUAL",verificationUrl:"",scope:"",standards:[]}),[o,d]=u.useState(null),[m,x]=u.useState(0),[p,f]=u.useState(!1),y=u.useRef(null),{execute:b,loading:N}=g((async()=>{if(!(c.name&&c.issuer&&c.number&&c.issueDate&&c.expiryDate))return void s.error("Por favor, preencha todos os campos obrigatórios");const a=await h.createCertification(c);if(o){f(!0);try{const e=await h.uploadCertificateDocument(a.certification.id,o);await h.updateCertification(a.certification.id,{documentUrl:e.documentUrl})}catch(t){s.error("Erro ao fazer upload do documento")}finally{f(!1)}}s.success("Certificação criada com sucesso!"),i&&await h.addProductCertification({productId:i,certificationId:a.certification.id,certificateNumber:c.number,issueDate:c.issueDate,expiryDate:c.expiryDate}),null==e||e(a.certification),n({name:"",description:"",issuer:"",number:"",issueDate:"",expiryDate:"",type:"OTHER",verificationMethod:"MANUAL",verificationUrl:"",scope:"",standards:[]}),d(null)}));return a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Nova Certificação"}),a.jsxs("form",{onSubmit:e=>{e.preventDefault(),b()},className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome da Certificação *"}),a.jsx("input",{type:"text",value:c.name,onChange:e=>n({...c,name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Ex: ISO 9001:2015",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo *"}),a.jsx("select",{value:c.type,onChange:e=>n({...c,type:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",required:!0,children:[{value:"ISO",label:"ISO"},{value:"HACCP",label:"HACCP"},{value:"ORGANIC",label:"Orgânico"},{value:"FAIRTRADE",label:"Comércio Justo"},{value:"KOSHER",label:"Kosher"},{value:"HALAL",label:"Halal"},{value:"VEGAN",label:"Vegano"},{value:"NON_GMO",label:"Não-OGM"},{value:"GLUTEN_FREE",label:"Sem Glúten"},{value:"RAINFOREST_ALLIANCE",label:"Rainforest Alliance"},{value:"BRC",label:"BRC"},{value:"IFS",label:"IFS"},{value:"OTHER",label:"Outro"}].map((e=>a.jsx("option",{value:e.value,children:e.label},e.value)))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Emissor *"}),a.jsx("input",{type:"text",value:c.issuer,onChange:e=>n({...c,issuer:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Ex: Bureau Veritas",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Número do Certificado *"}),a.jsx("input",{type:"text",value:c.number,onChange:e=>n({...c,number:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Ex: BR-12345/2024",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data de Emissão *"}),a.jsx("input",{type:"date",value:c.issueDate,onChange:e=>n({...c,issueDate:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data de Expiração *"}),a.jsx("input",{type:"date",value:c.expiryDate,onChange:e=>n({...c,expiryDate:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",min:c.issueDate,required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Método de Verificação"}),a.jsx("select",{value:c.verificationMethod,onChange:e=>n({...c,verificationMethod:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[{value:"QR_CODE",label:"QR Code"},{value:"CERTIFICATE_NUMBER",label:"Número do Certificado"},{value:"WEBSITE",label:"Website"},{value:"API",label:"API"},{value:"MANUAL",label:"Manual"}].map((e=>a.jsx("option",{value:e.value,children:e.label},e.value)))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"URL de Verificação"}),a.jsx("input",{type:"url",value:c.verificationUrl,onChange:e=>n({...c,verificationUrl:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"https://..."})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Escopo"}),a.jsx("input",{type:"text",value:c.scope,onChange:e=>n({...c,scope:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Ex: Gestão da Qualidade, Produção de Alimentos"})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descrição"}),a.jsx("textarea",{value:c.description,onChange:e=>n({...c,description:e.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Descrição detalhada da certificação..."})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Normas/Padrões"}),a.jsx("input",{type:"text",value:null==(l=c.standards)?void 0:l.join(", "),onChange:e=>n({...c,standards:e.target.value.split(",").map((e=>e.trim())).filter((e=>e))}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Ex: ISO 9001, ISO 14001 (separados por vírgula)"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Documento do Certificado"}),a.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:o?a.jsxs("div",{className:"flex items-center justify-between bg-gray-50 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(t,{className:"w-8 h-8 text-gray-400 mr-3"}),a.jsxs("div",{className:"text-left",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:o.name}),a.jsxs("p",{className:"text-xs text-gray-500",children:[(o.size/1024/1024).toFixed(2)," MB"]})]})]}),a.jsx("button",{type:"button",onClick:()=>{d(null),y.current&&(y.current.value="")},className:"text-gray-400 hover:text-red-600 transition-colors",children:a.jsx(r,{className:"w-5 h-5"})})]}):a.jsxs(a.Fragment,{children:[a.jsx(j,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Arraste e solte o documento aqui ou"}),a.jsx("input",{ref:y,type:"file",onChange:e=>{var a;const t=null==(a=e.target.files)?void 0:a[0];if(t){if(t.size>10485760)return void s.error("Arquivo muito grande. Máximo 10MB.");d(t)}},accept:".pdf,.doc,.docx,.jpg,.jpeg,.png",className:"hidden"}),a.jsx("button",{type:"button",onClick:()=>{var e;return null==(e=y.current)?void 0:e.click()},className:"btn btn-outline btn-sm",children:"Selecionar Arquivo"}),a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"PDF, DOC, DOCX, JPG ou PNG (máx. 10MB)"})]})}),p&&a.jsxs("div",{className:"mt-2",children:[a.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600 mb-1",children:[a.jsx("span",{children:"Enviando documento..."}),a.jsxs("span",{children:[m,"%"]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-primary-600 h-2 rounded-full transition-all duration-300",style:{width:`${m}%`}})})]})]}),a.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4 border-t",children:[a.jsx("button",{type:"button",onClick:()=>{n({name:"",description:"",issuer:"",number:"",issueDate:"",expiryDate:"",type:"OTHER",verificationMethod:"MANUAL",verificationUrl:"",scope:"",standards:[]}),d(null)},className:"btn btn-outline",children:"Cancelar"}),a.jsx("button",{type:"submit",disabled:N||p,className:"btn btn-primary",children:N?a.jsxs(a.Fragment,{children:[a.jsx(E,{className:"w-4 h-4 mr-2 animate-spin"}),"Criando..."]}):"Criar Certificação"})]})]})]})},S=({productId:e,showSettings:t=!0})=>{const[o,d]=u.useState([]),[m,x]=u.useState(!0),[p,g]=u.useState(!1),[f,j]=u.useState({expirationWarningDays:30,emailNotifications:!0,dashboardNotifications:!0}),[v,w]=u.useState(0);u.useEffect((()=>{C()}),[e]);const C=async()=>{try{x(!0);const s=await h.getCertificationAlerts({productId:e,isRead:!1});d(s),w(s.filter((e=>!e.isRead)).length)}catch(a){s.error("Erro ao carregar alertas")}finally{x(!1)}},E=e=>{switch(e){case"EXPIRING_SOON":return"Expirando em Breve";case"EXPIRED":return"Expirado";case"RENEWAL_REQUIRED":return"Renovação Necessária";case"VERIFICATION_FAILED":return"Falha na Verificação";case"DOCUMENT_MISSING":return"Documento Ausente";default:return e}};return m?a.jsx("div",{className:"flex justify-center items-center h-32",children:a.jsx(i,{size:"md"})}):a.jsxs("div",{className:"bg-white rounded-lg shadow-sm",children:[a.jsx("div",{className:"p-4 border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(l,{className:"w-5 h-5 text-gray-600 mr-2"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Alertas de Certificação"}),v>0&&a.jsx("span",{className:"ml-2 inline-flex items-center justify-center px-2 py-1 text-xs font-bold text-white bg-red-600 rounded-full",children:v})]}),t&&a.jsx("button",{onClick:()=>g(!0),className:"text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(y,{className:"w-5 h-5"})})]})}),a.jsx("div",{className:"divide-y divide-gray-200",children:0===o.length?a.jsxs("div",{className:"p-8 text-center",children:[a.jsx(l,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Nenhum alerta no momento"}),a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Você será notificado quando houver certificações expirando"})]}):o.map((e=>{const{icon:t,color:i,bgColor:m}=(e=>{switch(e){case"EXPIRING_SOON":return{icon:n,color:"text-yellow-600",bgColor:"bg-yellow-100"};case"EXPIRED":return{icon:b,color:"text-red-600",bgColor:"bg-red-100"};case"RENEWAL_REQUIRED":return{icon:N,color:"text-blue-600",bgColor:"bg-blue-100"};case"VERIFICATION_FAILED":return{icon:r,color:"text-red-600",bgColor:"bg-red-100"};case"DOCUMENT_MISSING":return{icon:b,color:"text-orange-600",bgColor:"bg-orange-100"};default:return{icon:l,color:"text-gray-600",bgColor:"bg-gray-100"}}})(e.type);return a.jsx("div",{className:"p-4 hover:bg-gray-50 transition-colors "+(e.isRead?"":"bg-blue-50"),children:a.jsxs("div",{className:"flex items-start",children:[a.jsx("div",{className:`flex-shrink-0 w-10 h-10 rounded-full ${m} flex items-center justify-center`,children:a.jsx(t,{className:`w-5 h-5 ${i}`})}),a.jsx("div",{className:"ml-3 flex-1",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:E(e.type)}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:e.message}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:(x=e.createdAt,new Intl.DateTimeFormat("pt-BR",{day:"2-digit",month:"short",year:"numeric"}).format(new Date(x)))})]}),!e.isRead&&a.jsx("button",{onClick:()=>(async e=>{try{await h.markAlertAsRead(e),d(o.map((s=>s.id===e?{...s,isRead:!0}:s))),w((e=>Math.max(0,e-1)))}catch(a){s.error("Erro ao marcar alerta como lido")}})(e.id),className:"ml-3 text-gray-400 hover:text-gray-600",title:"Marcar como lido",children:a.jsx(c,{className:"w-4 h-4"})})]})})]})},e.id);var x}))}),p&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Configurações de Alertas"}),a.jsx("button",{onClick:()=>g(!1),className:"text-gray-400 hover:text-gray-600",children:a.jsx(r,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Avisar com quantos dias de antecedência?"}),a.jsxs("select",{value:f.expirationWarningDays,onChange:e=>j({...f,expirationWarningDays:parseInt(e.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[a.jsx("option",{value:7,children:"7 dias"}),a.jsx("option",{value:15,children:"15 dias"}),a.jsx("option",{value:30,children:"30 dias"}),a.jsx("option",{value:60,children:"60 dias"}),a.jsx("option",{value:90,children:"90 dias"})]})]}),a.jsx("div",{children:a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:f.emailNotifications,onChange:e=>j({...f,emailNotifications:e.target.checked}),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),a.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Receber notificações por e-mail"})]})}),a.jsx("div",{children:a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:f.dashboardNotifications,onChange:e=>j({...f,dashboardNotifications:e.target.checked}),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),a.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Mostrar notificações no dashboard"})]})})]}),a.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[a.jsx("button",{onClick:()=>g(!1),className:"btn btn-outline",children:"Cancelar"}),a.jsx("button",{onClick:async()=>{try{await h.configureAlertSettings(f),s.success("Configurações salvas com sucesso!"),g(!1)}catch(e){s.error("Erro ao salvar configurações")}},className:"btn btn-primary",children:"Salvar Configurações"})]})]})})]})},k=()=>{const[e,r]=u.useState([]),[l,c]=u.useState(null),[y,E]=u.useState({page:1,limit:10,search:"",status:void 0,type:void 0}),[k,R]=u.useState(1),[A,I]=u.useState(!1),[O,M]=u.useState(!1),[P,T]=u.useState([]),{execute:U,loading:L}=g((async()=>{var e;try{const s=await h.getCertifications(y);s&&s.data?(r(s.data),R((null==(e=s.pagination)?void 0:e.totalPages)||1)):(r([]),R(1))}catch(s){r([]),R(1)}})),{execute:G}=g((async()=>{try{const e=await h.getCertificationStatistics();e&&"object"==typeof e&&c(e)}catch(e){}}));u.useEffect((()=>{U(),G()}),[y]);return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Gerenciar Certificações"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Gerencie certificações e selos de qualidade dos produtos"})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("button",{onClick:async()=>{try{const a=[["Nome","Tipo","Emissor","Número","Status","Data de Emissão","Data de Expiração"],...e.map((e=>[e.name,h.getCertificationTypeLabel(e.type),e.issuer,e.number,h.getCertificationStatusLabel(e.status),new Date(e.issueDate).toLocaleDateString("pt-BR"),new Date(e.expiryDate).toLocaleDateString("pt-BR")]))].map((e=>e.join(","))).join("\n"),t=new Blob([a],{type:"text/csv"}),r=window.URL.createObjectURL(t),i=document.createElement("a");i.href=r,i.download=`certifications_${(new Date).toISOString().split("T")[0]}.csv`,i.click(),window.URL.revokeObjectURL(r),s.success("Certificações exportadas com sucesso!")}catch(a){s.error("Erro ao exportar certificações")}},className:"btn btn-outline",children:[a.jsx(o,{className:"w-4 h-4 mr-2"}),"Exportar"]}),a.jsxs("button",{onClick:()=>I(!0),className:"btn btn-primary",children:[a.jsx(v,{className:"w-4 h-4 mr-2"}),"Nova Certificação"]})]})]}),l&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Total"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:l.total})]}),a.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center",children:a.jsx(d,{className:"w-6 h-6 text-gray-600"})})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-green-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Ativas"}),a.jsx("p",{className:"text-2xl font-bold text-green-600",children:l.active})]}),a.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:a.jsx(m,{className:"w-6 h-6 text-green-600"})})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-red-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Expiradas"}),a.jsx("p",{className:"text-2xl font-bold text-red-600",children:l.expired})]}),a.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center",children:a.jsx(b,{className:"w-6 h-6 text-red-600"})})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-yellow-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Expirando"}),a.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:l.expiringSoon})]}),a.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center",children:a.jsx(n,{className:"w-6 h-6 text-yellow-600"})})]})})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[a.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4",children:a.jsxs("form",{onSubmit:e=>{e.preventDefault(),E({...y,page:1})},className:"flex flex-col md:flex-row gap-4",children:[a.jsx("div",{className:"flex-1",children:a.jsxs("div",{className:"relative",children:[a.jsx(w,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),a.jsx("input",{type:"text",value:y.search,onChange:e=>E({...y,search:e.target.value}),placeholder:"Buscar certificações...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})}),a.jsxs("select",{value:y.status||"",onChange:e=>E({...y,status:e.target.value||void 0}),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[a.jsx("option",{value:"",children:"Todos os Status"}),a.jsx("option",{value:"ACTIVE",children:"Ativo"}),a.jsx("option",{value:"EXPIRED",children:"Expirado"}),a.jsx("option",{value:"PENDING",children:"Pendente"}),a.jsx("option",{value:"SUSPENDED",children:"Suspenso"}),a.jsx("option",{value:"REVOKED",children:"Revogado"})]}),a.jsxs("select",{value:y.type||"",onChange:e=>E({...y,type:e.target.value||void 0}),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[a.jsx("option",{value:"",children:"Todos os Tipos"}),a.jsx("option",{value:"ISO",children:"ISO"}),a.jsx("option",{value:"HACCP",children:"HACCP"}),a.jsx("option",{value:"ORGANIC",children:"Orgânico"}),a.jsx("option",{value:"FAIRTRADE",children:"Comércio Justo"}),a.jsx("option",{value:"KOSHER",children:"Kosher"}),a.jsx("option",{value:"HALAL",children:"Halal"}),a.jsx("option",{value:"VEGAN",children:"Vegano"}),a.jsx("option",{value:"NON_GMO",children:"Não-OGM"}),a.jsx("option",{value:"GLUTEN_FREE",children:"Sem Glúten"})]}),a.jsxs("button",{type:"submit",className:"btn btn-primary",children:[a.jsx(C,{className:"w-4 h-4 mr-2"}),"Filtrar"]})]})}),P&&P.length>0&&a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("p",{className:"text-sm text-blue-800",children:[P.length," certificação(ões) selecionada(s)"]}),a.jsx("button",{onClick:async()=>{if(P&&0!==P.length){if(confirm(`Deseja remover ${P.length} certificação(ões)?`))try{await Promise.all(P.map((e=>h.deleteCertification(e)))),s.success("Certificações removidas com sucesso!"),T([]),U(),G()}catch(e){s.error("Erro ao remover certificações")}}else s.error("Selecione pelo menos uma certificação")},className:"btn btn-sm bg-red-600 text-white hover:bg-red-700",children:"Remover Selecionadas"})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm",children:L?a.jsx("div",{className:"flex justify-center items-center h-64",children:a.jsx(i,{size:"lg"})}):e&&0!==e.length?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left",children:a.jsx("input",{type:"checkbox",checked:P&&e&&P.length===e.length,onChange:()=>{e&&P&&(P.length===e.length?T([]):T(e.map((e=>e.id))))},className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"})}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Certificação"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tipo"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Emissor"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Expiração"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ações"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e&&e.map((e=>{const s=h.getCertificationStatusColor(e.status),r=h.getDaysUntilExpiry(e.expiryDate);return a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4",children:a.jsx("input",{type:"checkbox",checked:P&&P.includes(e.id),onChange:()=>{return s=e.id,void T((e=>e.includes(s)?e.filter((e=>e!==s)):[...e,s]));var s},className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"})}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:e.name}),a.jsxs("p",{className:"text-sm text-gray-500",children:["#",e.number]})]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:"text-sm text-gray-900",children:h.getCertificationTypeLabel(e.type)})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:"text-sm text-gray-900",children:e.issuer})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-${s}-100 text-${s}-800`,children:h.getCertificationStatusLabel(e.status)})}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex items-center text-sm",children:[a.jsx(N,{className:"w-4 h-4 mr-1 text-gray-400"}),a.jsx("span",{className:r<30?"text-red-600 font-medium":"text-gray-900",children:h.formatExpiryDate(e.expiryDate)})]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("div",{className:"flex items-center space-x-2",children:a.jsx(p,{to:`/dashboard/certifications/${e.id}`,className:"text-primary-600 hover:text-primary-700",children:a.jsx(t,{className:"w-4 h-4"})})})})]},e.id)}))})]})}),a.jsx("div",{className:"px-6 py-4 border-t border-gray-200",children:a.jsx(f,{currentPage:y.page||1,totalPages:k,onPageChange:e=>E({...y,page:e})})})]}):a.jsxs("div",{className:"text-center py-12",children:[a.jsx(d,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhuma certificação encontrada"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Comece adicionando sua primeira certificação"}),a.jsxs("button",{onClick:()=>I(!0),className:"btn btn-primary",children:[a.jsx(v,{className:"w-4 h-4 mr-2"}),"Adicionar Certificação"]})]})})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsx(S,{}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Ações Rápidas"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("button",{onClick:()=>M(!0),className:"w-full btn btn-outline justify-start",children:[a.jsx(j,{className:"w-4 h-4 mr-2"}),"Upload em Massa"]}),a.jsxs(p,{to:"/dashboard/certifications/calendar",className:"w-full btn btn-outline justify-start",children:[a.jsx(N,{className:"w-4 h-4 mr-2"}),"Calendário de Expirações"]}),a.jsxs(p,{to:"/dashboard/certifications/analytics",className:"w-full btn btn-outline justify-start",children:[a.jsx(x,{className:"w-4 h-4 mr-2"}),"Relatório de Certificações"]})]})]}),l&&l.upcomingExpirations&&l.upcomingExpirations.length>0&&a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Próximas Expirações"}),a.jsx("div",{className:"space-y-3",children:l.upcomingExpirations.slice(0,5).map((({certification:e,daysUntilExpiry:s})=>a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:e.name}),a.jsx("p",{className:"text-xs text-gray-500",children:e.issuer})]}),a.jsxs("span",{className:"text-xs font-medium "+(s<30?"text-red-600":"text-yellow-600"),children:[s," dias"]})]},e.id)))})]})]})]}),A&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[a.jsx(D,{onUploadComplete:e=>{I(!1),U(),G(),s.success("Certificação adicionada com sucesso!")}}),a.jsx("div",{className:"p-4 border-t",children:a.jsx("button",{onClick:()=>I(!1),className:"btn btn-outline w-full",children:"Cancelar"})})]})})]})};export{k as default};
