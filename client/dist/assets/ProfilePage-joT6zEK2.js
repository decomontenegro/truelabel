import{c as e,u as s,Y as r,j as a,L as t,Z as l,X as n,_ as i}from"./index-BwznawPq.js";import{r as c}from"./vendor-BDxjXY-2.js";import{S as d}from"./square-pen-DVyoojrC.js";import{S as m}from"./save-D6PyDrki.js";import{M as o}from"./mail-BgiYX2c1.js";import{S as x}from"./shield-BctcVu_K.js";import{B as u}from"./building-DrlOBbRY.js";import{P as h}from"./phone-CzP0r50t.js";import{M as p}from"./map-pin-DMI2k0gy.js";import{C as f}from"./calendar-Nt4fDNWr.js";import{G as j}from"./globe-CdfLrGNR.js";import"./charts-C38Ohhsz.js";
/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g=e("key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]),y=()=>{const{user:e}=s(),[y,N]=c.useState(null),[b,v]=c.useState(!0),[w,S]=c.useState(!1),[P,k]=c.useState(!1),[A,C]=c.useState(!1),[E,D]=c.useState({name:"",company:"",phone:"",address:""}),[L,z]=c.useState({currentPassword:"",newPassword:"",confirmPassword:""});c.useEffect((()=>{B()}),[]);const B=async()=>{try{if(v(!0),e){const s={id:e.id,email:e.email,name:e.name||e.email.split("@")[0],role:e.role,company:e.company||"",phone:e.phone||"",address:e.address||"",createdAt:(new Date).toISOString()};N(s),D({name:s.name,company:s.company||"",phone:s.phone||"",address:s.address||""})}}catch(s){r.error("Erro ao carregar perfil")}finally{v(!1)}};return b?a.jsx("div",{className:"flex justify-center items-center h-64",children:a.jsx(t,{size:"lg"})}):y?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Perfil"}),a.jsx("p",{className:"text-gray-600",children:"Gerencie suas informações pessoais e configurações"})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[a.jsx("div",{className:"p-6 border-b",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Informações Pessoais"}),!w&&a.jsxs("button",{onClick:()=>S(!0),className:"btn btn-outline flex items-center",children:[a.jsx(d,{className:"w-4 h-4 mr-2"}),"Editar"]})]})}),a.jsx("div",{className:"p-6",children:w?a.jsxs("form",{onSubmit:async e=>{e.preventDefault();try{if(C(!0),await new Promise((e=>setTimeout(e,1e3))),y){const e={...y,...E};N(e)}S(!1),r.success("Perfil atualizado com sucesso!")}catch(s){r.error("Erro ao atualizar perfil")}finally{C(!1)}},className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome"}),a.jsx("input",{type:"text",value:E.name,onChange:e=>D({...E,name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Empresa"}),a.jsx("input",{type:"text",value:E.company,onChange:e=>D({...E,company:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Telefone"}),a.jsx("input",{type:"tel",value:E.phone,onChange:e=>D({...E,phone:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Endereço"}),a.jsx("input",{type:"text",value:E.address,onChange:e=>D({...E,address:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})]}),a.jsxs("div",{className:"flex space-x-3 pt-4",children:[a.jsxs("button",{type:"submit",disabled:A,className:"btn btn-primary flex items-center",children:[A?a.jsx(t,{size:"sm",className:"mr-2"}):a.jsx(m,{className:"w-4 h-4 mr-2"}),"Salvar"]}),a.jsxs("button",{type:"button",onClick:()=>{S(!1),D({name:y.name,company:y.company||"",phone:y.phone||"",address:y.address||""})},className:"btn btn-outline flex items-center",children:[a.jsx(n,{className:"w-4 h-4 mr-2"}),"Cancelar"]})]})]}):a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(l,{className:"w-5 h-5 text-gray-400 mr-3"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Nome"}),a.jsx("p",{className:"font-medium text-gray-900",children:y.name})]})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(o,{className:"w-5 h-5 text-gray-400 mr-3"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Email"}),a.jsx("p",{className:"font-medium text-gray-900",children:y.email})]})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(x,{className:"w-5 h-5 text-gray-400 mr-3"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Função"}),a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${(e=>{switch(e){case"ADMIN":return"bg-red-100 text-red-800";case"BRAND":return"bg-blue-100 text-blue-800";case"LAB":return"bg-green-100 text-green-800";case"VALIDATOR":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}})(y.role)}`,children:(e=>{switch(e){case"ADMIN":return"Administrador";case"BRAND":return"Marca";case"LAB":return"Laboratório";case"VALIDATOR":return"Validador";default:return e}})(y.role)})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(u,{className:"w-5 h-5 text-gray-400 mr-3"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Empresa"}),a.jsx("p",{className:"font-medium text-gray-900",children:y.company||"Não informado"})]})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(h,{className:"w-5 h-5 text-gray-400 mr-3"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Telefone"}),a.jsx("p",{className:"font-medium text-gray-900",children:y.phone||"Não informado"})]})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(p,{className:"w-5 h-5 text-gray-400 mr-3"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Endereço"}),a.jsx("p",{className:"font-medium text-gray-900",children:y.address||"Não informado"})]})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(f,{className:"w-5 h-5 text-gray-400 mr-3"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Membro desde"}),a.jsx("p",{className:"font-medium text-gray-900",children:new Date(y.createdAt).toLocaleDateString("pt-BR")})]})]})]})]})})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[a.jsx("div",{className:"p-6 border-b",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Segurança"}),!P&&a.jsxs("button",{onClick:()=>k(!0),className:"btn btn-outline flex items-center",children:[a.jsx(g,{className:"w-4 h-4 mr-2"}),"Alterar Senha"]})]})}),a.jsx("div",{className:"p-6",children:P?a.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),L.newPassword===L.confirmPassword)if(L.newPassword.length<6)r.error("A nova senha deve ter pelo menos 6 caracteres");else try{C(!0),await new Promise((e=>setTimeout(e,1e3))),z({currentPassword:"",newPassword:"",confirmPassword:""}),k(!1),r.success("Senha atualizada com sucesso!")}catch(s){r.error("Erro ao atualizar senha")}finally{C(!1)}else r.error("As senhas não coincidem")},className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Senha Atual"}),a.jsx("input",{type:"password",value:L.currentPassword,onChange:e=>z({...L,currentPassword:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nova Senha"}),a.jsx("input",{type:"password",value:L.newPassword,onChange:e=>z({...L,newPassword:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",required:!0,minLength:6})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirmar Nova Senha"}),a.jsx("input",{type:"password",value:L.confirmPassword,onChange:e=>z({...L,confirmPassword:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",required:!0,minLength:6})]}),a.jsxs("div",{className:"flex space-x-3 pt-4",children:[a.jsxs("button",{type:"submit",disabled:A,className:"btn btn-primary flex items-center",children:[A?a.jsx(t,{size:"sm",className:"mr-2"}):a.jsx(m,{className:"w-4 h-4 mr-2"}),"Alterar Senha"]}),a.jsxs("button",{type:"button",onClick:()=>{k(!1),z({currentPassword:"",newPassword:"",confirmPassword:""})},className:"btn btn-outline flex items-center",children:[a.jsx(n,{className:"w-4 h-4 mr-2"}),"Cancelar"]})]})]}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(g,{className:"w-5 h-5 text-gray-400 mr-3"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Senha"}),a.jsx("p",{className:"font-medium text-gray-900",children:"••••••••"})]})]}),a.jsx("p",{className:"text-sm text-gray-600",children:"Última alteração: Não disponível"})]})})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[a.jsx("div",{className:"p-6 border-b",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Preferências"})}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(i,{className:"w-5 h-5 text-gray-400 mr-3"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-900",children:"Notificações por Email"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Receber atualizações sobre validações e QR Codes"})]})]}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",className:"sr-only peer",defaultChecked:!0}),a.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(j,{className:"w-5 h-5 text-gray-400 mr-3"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-900",children:"Idioma"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Idioma da interface"})]})]}),a.jsxs("select",{className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[a.jsx("option",{value:"pt-BR",children:"Português (Brasil)"}),a.jsx("option",{value:"en-US",children:"English (US)"}),a.jsx("option",{value:"es-ES",children:"Español"})]})]})]})]})]}):a.jsxs("div",{className:"text-center py-12",children:[a.jsx(l,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Erro ao carregar perfil"}),a.jsx("p",{className:"text-gray-600",children:"Tente recarregar a página."})]})};export{y as default};
