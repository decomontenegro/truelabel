import{j as e,L as s,G as a,b as t,d as r,C as l}from"./index-DVDeh87x.js";import{r as d}from"./vendor-BDxjXY-2.js";import{v as i}from"./validationService-Cq-h27RQ.js";import{P as c}from"./plus-DN1tBbCM.js";import{S as n}from"./search-Bs3zZnHQ.js";import{F as x}from"./funnel-BT2by-UL.js";import{f as o}from"./formatDistanceToNow-Cavs1cXM.js";import{C as m}from"./calendar-C7W626AY.js";import{E as h}from"./eye-DSbeFSkK.js";import{C as p}from"./circle-x-DtLsNPzF.js";import{p as u}from"./pt-BR-C6g8RSf9.js";import"./charts-C38Ohhsz.js";import"./fallbackService-D-6NybDe.js";import"./qrService-c0XzpkI8.js";import"./en-US-pqY3htb7.js";import"./endOfDay-C4P9Zvyt.js";const j=()=>{const[j,g]=d.useState([]),[N,f]=d.useState(!0),[y,v]=d.useState(null),[b,w]=d.useState({status:"",search:"",page:1,limit:10});d.useEffect((()=>{E()}),[b]);const E=async()=>{try{f(!0),v(null);const e=await i.getValidations(b);g(e.data)}catch(e){v(e.message||"Erro ao carregar validações")}finally{f(!1)}},P=s=>{switch(s){case"APPROVED":return e.jsx(l,{className:"h-5 w-5 text-green-500"});case"REJECTED":return e.jsx(p,{className:"h-5 w-5 text-red-500"});case"PENDING":return e.jsx(r,{className:"h-5 w-5 text-yellow-500"});case"PARTIAL":return e.jsx(a,{className:"h-5 w-5 text-orange-500"});default:return e.jsx(r,{className:"h-5 w-5 text-gray-500"})}},A=e=>{switch(e){case"APPROVED":return"bg-green-100 text-green-800";case"REJECTED":return"bg-red-100 text-red-800";case"PENDING":return"bg-yellow-100 text-yellow-800";case"PARTIAL":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},D=e=>{switch(e){case"APPROVED":return"Aprovado";case"REJECTED":return"Rejeitado";case"PENDING":return"Pendente";case"PARTIAL":return"Parcial";default:return e}};return N&&0===j.length?e.jsxs("div",{className:"flex items-center justify-center h-64",children:[e.jsx(s,{size:"lg"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Carregando validações..."})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Validações"}),e.jsx("p",{className:"text-gray-600",children:"Acompanhe o status das validações de produtos"})]}),e.jsxs("button",{className:"btn btn-primary",children:[e.jsx(c,{className:"h-4 w-4 mr-2"}),"Nova Validação"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:b.status,onChange:e=>w({...b,status:e.target.value,page:1}),className:"w-full border border-gray-300 rounded-md px-3 py-2",children:[e.jsx("option",{value:"",children:"Todos os status"}),e.jsx("option",{value:"PENDING",children:"Pendente"}),e.jsx("option",{value:"APPROVED",children:"Aprovado"}),e.jsx("option",{value:"REJECTED",children:"Rejeitado"}),e.jsx("option",{value:"PARTIAL",children:"Parcial"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Buscar"}),e.jsxs("div",{className:"relative",children:[e.jsx(n,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",value:b.search,onChange:e=>w({...b,search:e.target.value,page:1}),placeholder:"Buscar por produto...",className:"w-full pl-10 border border-gray-300 rounded-md px-3 py-2"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("button",{onClick:E,className:"btn btn-secondary",disabled:N,children:[e.jsx(x,{className:"h-4 w-4 mr-2"}),"Filtrar"]})})]})}),y&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(a,{className:"h-5 w-5 text-red-500 mr-2"}),e.jsx("span",{className:"text-red-700",children:y}),e.jsx("button",{onClick:E,className:"ml-auto text-red-600 hover:text-red-800 underline",children:"Tentar novamente"})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border overflow-hidden",children:0!==j.length||N?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Produto"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tipo"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ações"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:j.map((s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:["Produto #",s.productId]}),e.jsx("div",{className:"text-sm text-gray-500",children:s.summary||"Sem resumo disponível"})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[P(s.status),e.jsx("span",{className:`ml-2 inline-flex px-2 py-1 text-xs font-semibold rounded-full ${A(s.status)}`,children:D(s.status)})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:"LABORATORY"===s.type?"Laboratorial":"Manual"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(m,{className:"h-4 w-4 mr-1"}),s.validatedAt?o(new Date(s.validatedAt),{addSuffix:!0,locale:u}):o(new Date(s.createdAt),{addSuffix:!0,locale:u})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"text-blue-600 hover:text-blue-900",children:e.jsx(h,{className:"h-4 w-4"})}),s.reportId&&e.jsx("button",{className:"text-green-600 hover:text-green-900",children:e.jsx(t,{className:"h-4 w-4"})})]})})]},s.id)))})]})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(t,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhuma validação encontrada"}),e.jsx("p",{className:"text-gray-600",children:b.status||b.search?"Tente ajustar os filtros para ver mais resultados.":"Comece criando sua primeira validação de produto."})]})}),N&&j.length>0&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-4 flex items-center",children:[e.jsx(s,{size:"sm"}),e.jsx("span",{className:"ml-2",children:"Atualizando..."})]})})]})};export{j as default};
