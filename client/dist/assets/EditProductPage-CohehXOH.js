import{M as e,Y as a,j as s,L as t,N as r}from"./index--pVY8JWu.js";import{i as o,e as l,r as n}from"./vendor-BDxjXY-2.js";import{S as i}from"./save-LlucYqJr.js";import"./charts-C38Ohhsz.js";const c=()=>{const{id:c}=o(),m=l(),[d,u]=n.useState(!0),[x,h]=n.useState(!1),[p,g]=n.useState({name:"",brand:"",category:"",sku:"",description:"",claims:"",nutritionalInfo:"",imageUrl:""});n.useEffect((()=>{c&&b()}),[c]);const b=async()=>{var s;try{u(!0);const a=await e.getProductById(c);g({name:a.name||"",brand:a.brand||"",category:a.category||"",sku:a.sku||"",description:a.description||"",claims:a.claims||"",nutritionalInfo:a.nutritionalInfo?JSON.stringify(a.nutritionalInfo,null,2):"",imageUrl:a.imageUrl||""})}catch(t){404===(null==(s=t.response)?void 0:s.status)?(a.error("Produto não encontrado"),m("/dashboard/products")):a.error("Erro ao carregar produto")}finally{u(!1)}},j=e=>{const{name:a,value:s}=e.target;g((e=>({...e,[a]:s})))};return d?s.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:s.jsx(t,{size:"lg"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("button",{onClick:()=>m(`/dashboard/products/${c}`),className:"btn btn-outline btn-sm flex items-center",children:[s.jsx(r,{className:"h-4 w-4 mr-2"}),"Voltar"]}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Editar Produto"}),s.jsx("p",{className:"text-gray-600",children:"Atualize as informações do produto"})]})]}),s.jsxs("form",{onSubmit:async s=>{var t,r,o;if(s.preventDefault(),p.name&&p.brand&&p.category&&p.sku)try{h(!0);let s=null;if(p.nutritionalInfo.trim())try{s=JSON.parse(p.nutritionalInfo)}catch(l){return void a.error("Formato JSON inválido nas informações nutricionais")}const t={...p,nutritionalInfo:s};await e.updateProduct(c,t),a.success("Produto atualizado com sucesso!"),m(`/dashboard/products/${c}`)}catch(n){400===(null==(t=n.response)?void 0:t.status)?a.error("Dados inválidos. Verifique os campos."):409===(null==(r=n.response)?void 0:r.status)?a.error("SKU já existe. Use um SKU único."):401===(null==(o=n.response)?void 0:o.status)?a.error("Sessão expirada. Faça login novamente."):a.error("Erro ao atualizar produto. Tente novamente.")}finally{h(!1)}else a.error("Preencha todos os campos obrigatórios")},className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Informações Básicas"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome do Produto *"}),s.jsx("input",{type:"text",id:"name",name:"name",required:!0,value:p.name,onChange:j,className:"input w-full",placeholder:"Ex: Whey Protein Premium"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"brand",className:"block text-sm font-medium text-gray-700 mb-2",children:"Marca *"}),s.jsx("input",{type:"text",id:"brand",name:"brand",required:!0,value:p.brand,onChange:j,className:"input w-full",placeholder:"Ex: NutriMax"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 mb-2",children:"Categoria *"}),s.jsxs("select",{id:"category",name:"category",required:!0,value:p.category,onChange:j,className:"input w-full",children:[s.jsx("option",{value:"",children:"Selecione uma categoria"}),["Alimentos","Bebidas","Suplementos","Cosméticos","Higiene Pessoal","Produtos Naturais","Outros"].map((e=>s.jsx("option",{value:e,children:e},e)))]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"sku",className:"block text-sm font-medium text-gray-700 mb-2",children:"SKU *"}),s.jsx("input",{type:"text",id:"sku",name:"sku",required:!0,value:p.sku,onChange:j,className:"input w-full",placeholder:"Ex: WP-001-VAN"})]})]}),s.jsxs("div",{className:"mt-6",children:[s.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Descrição"}),s.jsx("textarea",{id:"description",name:"description",rows:4,value:p.description,onChange:j,className:"input w-full",placeholder:"Descreva o produto, seus benefícios e características..."})]}),s.jsxs("div",{className:"mt-6",children:[s.jsx("label",{htmlFor:"imageUrl",className:"block text-sm font-medium text-gray-700 mb-2",children:"URL da Imagem"}),s.jsx("input",{type:"url",id:"imageUrl",name:"imageUrl",value:p.imageUrl,onChange:j,className:"input w-full",placeholder:"https://exemplo.com/imagem-produto.jpg"})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Claims e Alegações"}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"claims",className:"block text-sm font-medium text-gray-700 mb-2",children:"Claims do Produto"}),s.jsx("textarea",{id:"claims",name:"claims",rows:4,value:p.claims,onChange:j,className:"input w-full",placeholder:"Ex: Rico em proteínas, Sem açúcar adicionado, Fonte de vitaminas..."}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Separe múltiplos claims por vírgula"})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Informações Nutricionais"}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"nutritionalInfo",className:"block text-sm font-medium text-gray-700 mb-2",children:"Informações Nutricionais (JSON)"}),s.jsx("textarea",{id:"nutritionalInfo",name:"nutritionalInfo",rows:6,value:p.nutritionalInfo,onChange:j,className:"input w-full font-mono text-sm",placeholder:'{\n  "calorias": "120 kcal",\n  "proteinas": "25g",\n  "carboidratos": "2g",\n  "gorduras": "1g",\n  "fibras": "0g",\n  "sodio": "50mg"\n}'}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Formato JSON válido. Deixe em branco se não aplicável."})]})]}),s.jsxs("div",{className:"flex justify-end space-x-4",children:[s.jsx("button",{type:"button",onClick:()=>m(`/dashboard/products/${c}`),className:"btn btn-secondary",disabled:x,children:"Cancelar"}),s.jsx("button",{type:"submit",className:"btn btn-primary",disabled:x,children:x?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"loading-spinner w-4 h-4 mr-2"}),"Salvando..."]}):s.jsxs(s.Fragment,{children:[s.jsx(i,{className:"w-4 h-4 mr-2"}),"Salvar Alterações"]})})]})]})]})};export{c as default};
