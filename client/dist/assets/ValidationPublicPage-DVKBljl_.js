import{$ as e,j as s,L as a,G as t,C as r,d as l,a0 as i,A as d,B as c,Q as n,a1 as m,a2 as x}from"./index--pVY8JWu.js";import{i as o,e as h,r as j,L as p}from"./vendor-BDxjXY-2.js";import{S as g}from"./shield-CfWOCZ2j.js";import{B as N}from"./building-RDXTSiLk.js";import{C as u}from"./calendar-CskR4dPT.js";import{I as b}from"./info-DIqZzMTO.js";import"./charts-C38Ohhsz.js";const f=()=>{const{qrCode:f}=o(),v=h(),[y,w]=j.useState(null),[A,V]=j.useState(!0),[L,k]=j.useState(null),{checkLimit:C,isBlocked:P,timeUntilReset:E}=e(x,`qr-validation-${f||"unknown"}`,"Muitas validações. Aguarde um momento antes de tentar novamente.");if(j.useEffect((()=>{(async()=>{if(f){if(!C())return k(`Muitas tentativas. Aguarde ${E} segundos.`),void V(!1);try{V(!0);const e=`${m.apiUrl}/qr/validate/${f}`,s=await fetch(e);if(!s.ok){await s.text();if(429===s.status)throw new Error("Muitas requisições. Tente novamente mais tarde.");throw new Error("Produto não encontrado")}const a=await s.json();w(a)}catch(e){k(e.message||"Erro ao carregar validação")}finally{V(!1)}}})()}),[f,C]),A)return s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(a,{size:"lg"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Carregando validação..."})]})});if(L||!y)return s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"max-w-md mx-auto text-center",children:[s.jsx(t,{className:"h-16 w-16 text-red-500 mx-auto mb-4"}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:P?"Limite de tentativas excedido":"Produto não encontrado"}),s.jsx("p",{className:"text-gray-600 mb-6",children:L||"O QR code escaneado não corresponde a nenhum produto válido."}),P&&E>0&&s.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["Aguarde ",E," segundos antes de tentar novamente."]}),s.jsx(p,{to:"/",className:"btn-primary",children:"Voltar ao início"})]})});const{product:$,validation:S,isValidated:R}=y;return j.useEffect((()=>{$&&$.enableSmartLabel&&$.smartLabelUrl&&v(`/smart-label/${$.id}`)}),[$,v]),s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-gradient-to-r from-primary-600 to-primary-700 text-white",children:s.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(g,{className:"h-8 w-8"}),s.jsx("span",{className:"text-xl font-semibold",children:"True Label"})]}),s.jsx(p,{to:"/",className:"text-white/80 hover:text-white transition-colors",children:"Conhecer a plataforma"})]}),s.jsxs("div",{className:"flex flex-col md:flex-row items-center md:items-start space-y-6 md:space-y-0 md:space-x-8",children:[$.imageUrl&&s.jsx("img",{src:$.imageUrl,alt:$.name,className:"w-32 h-32 md:w-40 md:h-40 object-cover rounded-lg shadow-lg bg-white"}),s.jsxs("div",{className:"text-center md:text-left flex-1",children:[s.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-2",children:$.name}),s.jsx("p",{className:"text-xl opacity-90 mb-1",children:$.brand}),s.jsx("p",{className:"text-sm opacity-80",children:$.category}),$.description&&s.jsx("p",{className:"mt-4 text-white/90 max-w-2xl",children:$.description})]})]})]})}),s.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsx("div",{className:"bg-white rounded-lg shadow-sm border mb-6 overflow-hidden",children:s.jsx("div",{className:"p-6 "+(R?"bg-green-50":"bg-yellow-50"),children:s.jsxs("div",{className:"flex items-center space-x-3",children:[R?s.jsx(r,{className:"h-10 w-10 text-green-600"}):s.jsx(l,{className:"h-10 w-10 text-yellow-600"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:R?"Produto Validado":"Validação Pendente"}),s.jsx("p",{className:"text-gray-700 mt-1",children:R?`Validado por ${null==S?void 0:S.laboratory.name} em ${(null==S?void 0:S.validatedAt)?i(S.validatedAt):""}`:"Este produto ainda não foi validado por laboratório acreditado"})]})]})})}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border mb-6",children:[s.jsx("div",{className:"border-b",children:s.jsxs("nav",{className:"flex -mb-px",children:[s.jsx("button",{className:"px-6 py-3 border-b-2 border-primary-600 text-primary-600 font-medium",children:"Validação"}),s.jsx("button",{className:"px-6 py-3 border-b-2 border-transparent text-gray-600 hover:text-gray-900",children:"Informações"}),s.jsx("button",{className:"px-6 py-3 border-b-2 border-transparent text-gray-600 hover:text-gray-900",children:"Laboratório"})]})}),s.jsx("div",{className:"p-6",children:S?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Status da Validação"}),s.jsx("span",{className:`inline-flex px-3 py-1 text-sm font-semibold rounded-full ${c(S.status)}`,children:d(S.status)})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Data da Validação"}),s.jsx("p",{className:"text-gray-900",children:S.validatedAt?i(S.validatedAt):"Pendente"})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Validade"}),s.jsx("p",{className:"text-gray-900",children:S.validatedAt?"Válido por 12 meses":"N/A"})]})]}),S.summary&&s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Resumo da Validação"}),s.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:s.jsx("p",{className:"text-gray-900",children:S.summary})})]}),s.jsxs("div",{className:"border-t pt-6",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-4",children:"Laboratório Responsável"}),s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx(N,{className:"h-12 w-12 text-gray-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:S.laboratory.name}),s.jsx("p",{className:"text-sm text-gray-600",children:S.laboratory.accreditation}),s.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[s.jsx(r,{className:"h-4 w-4 text-green-500"}),s.jsx("span",{className:"text-sm text-gray-600",children:"Laboratório Acreditado"})]})]})]})]})]}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(l,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Este produto ainda não foi validado"}),s.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Entre em contato com a marca para mais informações"})]})})]}),(()=>{const e=(a=$.claims)?Array.isArray(a)?a:"string"==typeof a?a.split(",").map((e=>e.trim())).filter((e=>e.length>0)):[]:[];var a;return e.length>0&&s.jsx("div",{className:"bg-white rounded-lg shadow-sm border mb-6",children:s.jsxs("div",{className:"p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Claims do Produto"}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:e.map(((e,a)=>{var t;return s.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-gray-50 rounded-lg",children:[(null==(t=null==S?void 0:S.claimsValidated)?void 0:t[e])?s.jsx(r,{className:"h-5 w-5 text-green-500 flex-shrink-0"}):s.jsx(l,{className:"h-5 w-5 text-yellow-500 flex-shrink-0"}),s.jsx("span",{className:"text-sm font-medium text-gray-900",children:e})]},a)}))})]})})})(),$.nutritionalInfo&&s.jsx("div",{className:"bg-white rounded-lg shadow-sm border mb-6",children:s.jsxs("div",{className:"p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informações Nutricionais"}),s.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:s.jsx("pre",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:JSON.stringify($.nutritionalInfo,null,2)})})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border mb-6",children:s.jsxs("div",{className:"p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Segurança & Confiança"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(g,{className:"h-6 w-6 text-primary-600 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Plataforma Verificada"}),s.jsx("p",{className:"text-xs text-gray-500",children:"True Label Platform"})]})]}),S&&s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(N,{className:"h-6 w-6 text-blue-600 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Lab Acreditado"}),s.jsx("p",{className:"text-xs text-gray-500",children:S.laboratory.accreditation})]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(u,{className:"h-6 w-6 text-green-600 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Última Atualização"}),s.jsx("p",{className:"text-xs text-gray-500",children:i(y.lastUpdated)})]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(n,{className:"h-6 w-6 text-purple-600 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:"QR Code Único"}),s.jsx("p",{className:"text-xs text-gray-500",children:f})]})]})]}),s.jsx("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex",children:[s.jsx(b,{className:"h-5 w-5 text-blue-400 flex-shrink-0"}),s.jsx("div",{className:"ml-3",children:s.jsx("p",{className:"text-sm text-blue-800",children:"Este QR code é único e rastreável. Cada escaneamento é registrado para garantir a autenticidade do produto."})})]})})]})}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"inline-flex items-center space-x-2 text-sm text-gray-500",children:[s.jsx(b,{className:"h-4 w-4"}),s.jsxs("span",{children:["Validação fornecida pela"," ",s.jsx(p,{to:"/",className:"text-primary-600 hover:text-primary-500",children:"CPG Validation Platform"})]})]}),s.jsx("div",{className:"mt-4",children:s.jsx(p,{to:"/",className:"btn-outline",children:"Conhecer a Plataforma"})})]})]})]})};export{f as default};
