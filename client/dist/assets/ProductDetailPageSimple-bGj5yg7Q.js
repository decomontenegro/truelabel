import{c as e,I as s,j as a,L as t,P as r,J as l,Q as i,C as c,d}from"./index-DeKtUJAc.js";import{i as o,e as n,r as m}from"./vendor-BDxjXY-2.js";import{p as x}from"./productService-DtNiporo.js";import{S as h}from"./square-pen-DsrxxnjO.js";import{S as b}from"./shield-DaRYoi6m.js";import{M as p}from"./map-pin-CYFbGecx.js";import{S as j}from"./smartphone-CejEQKCi.js";import{E as u}from"./external-link-QTxylvwH.js";import{C as g}from"./circle-x-DPkhpEGr.js";import"./charts-C38Ohhsz.js";
/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=e("toggle-left",[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]]),y=e("toggle-right",[["circle",{cx:"15",cy:"12",r:"3",key:"1afu0r"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]]),f=()=>{const{id:e}=o(),f=n(),[v,w]=m.useState(null),[S,k]=m.useState(!0),[L,C]=m.useState(!1);m.useEffect((()=>{e&&E()}),[e]);const E=async()=>{var a;try{k(!0);const s=await x.getProductById(e);w(s)}catch(t){404===(null==(a=t.response)?void 0:a.status)?(s.error("Produto não encontrado"),f("/dashboard/products")):s.error("Erro ao carregar produto")}finally{k(!1)}},P=e=>new Date(e).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"});return S?a.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:a.jsx(t,{size:"lg"})}):v?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("button",{onClick:()=>f("/dashboard/products"),className:"btn btn-outline btn-sm flex items-center",children:[a.jsx(l,{className:"h-4 w-4 mr-2"}),"Voltar"]}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:v.name}),a.jsxs("p",{className:"text-gray-600",children:[v.brand," • ",v.category]})]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[(e=>{const s={PENDING:{color:"bg-yellow-100 text-yellow-800",icon:d,text:"Pendente"},VALIDATED:{color:"bg-green-100 text-green-800",icon:c,text:"Validado"},REJECTED:{color:"bg-red-100 text-red-800",icon:g,text:"Rejeitado"}}[e],t=s.icon;return a.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${s.color}`,children:[a.jsx(t,{className:"w-4 h-4 mr-1"}),s.text]})})(v.status),a.jsxs("button",{onClick:()=>f(`/dashboard/products/${e}/edit`),className:"btn btn-secondary flex items-center",children:[a.jsx(h,{className:"w-4 h-4 mr-2"}),"Editar"]}),a.jsxs("button",{onClick:()=>f(`/dashboard/products/${e}/seals`),className:"btn btn-secondary flex items-center",children:[a.jsx(b,{className:"w-4 h-4 mr-2"}),"Selos"]}),a.jsxs("button",{onClick:()=>f(`/dashboard/products/${e}/traceability`),className:"btn btn-primary flex items-center",children:[a.jsx(p,{className:"w-4 h-4 mr-2"}),"Rastreabilidade"]})]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informações do Produto"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"SKU"}),a.jsx("p",{className:"text-gray-900 font-mono",children:v.sku})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Categoria"}),a.jsx("p",{className:"text-gray-900",children:v.category})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descrição"}),a.jsx("p",{className:"text-gray-900",children:v.description||"Não informado"})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Claims"}),a.jsx("p",{className:"text-gray-900",children:v.claims||"Nenhum claim informado"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Criado em"}),a.jsx("p",{className:"text-gray-900",children:P(v.createdAt)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Atualizado em"}),a.jsx("p",{className:"text-gray-900",children:P(v.updatedAt)})]})]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[a.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[a.jsx(j,{className:"w-5 h-5 mr-2"}),"Configurações SmartLabel"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-medium text-gray-900",children:"Ativar SmartLabel"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Quando ativado, os QR codes redirecionarão para uma página SmartLabel aprimorada com informações detalhadas do produto."})]}),a.jsx("button",{onClick:async()=>{if(v)try{C(!0);const e=!v.enableSmartLabel,a=await x.updateSmartLabelPreference(v.id,e);w({...v,enableSmartLabel:e,smartLabelUrl:a.product.smartLabelUrl}),s.success(e?"SmartLabel ativado! Os QR codes agora redirecionarão para a página SmartLabel.":"SmartLabel desativado. Os QR codes voltarão à página de validação padrão.")}catch(e){s.error("Erro ao atualizar preferência SmartLabel")}finally{C(!1)}},disabled:L,className:"ml-4 relative inline-flex items-center cursor-pointer",children:L?a.jsx(t,{size:"sm"}):v.enableSmartLabel?a.jsx(y,{className:"w-12 h-12 text-primary-600"}):a.jsx(N,{className:"w-12 h-12 text-gray-400"})})]}),v.enableSmartLabel&&a.jsx("div",{className:"p-4 bg-primary-50 rounded-lg",children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx(u,{className:"w-5 h-5 text-primary-600 flex-shrink-0 mt-0.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium text-primary-900 mb-2",children:"SmartLabel está ativo para este produto"}),v.smartLabelUrl&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-xs text-primary-700",children:"URL SmartLabel:"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("code",{className:"text-xs bg-white px-2 py-1 rounded border border-primary-200 flex-1",children:[window.location.origin,"/smart-label/",v.id]}),a.jsx("button",{onClick:()=>window.open(`/smart-label/${v.id}`,"_blank"),className:"btn btn-sm btn-primary",children:"Visualizar"})]})]})]})]})}),v.qrCode&&a.jsxs("div",{className:"text-sm text-gray-600",children:[a.jsx("p",{className:"font-medium mb-1",children:"QR Code do Produto:"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(i,{className:"w-5 h-5 text-gray-400"}),a.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded text-xs",children:v.qrCode})]})]})]})]}),v.nutritionalInfo&&a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informações Nutricionais"}),a.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:a.jsx("pre",{className:"text-sm text-gray-800 whitespace-pre-wrap",children:JSON.stringify(v.nutritionalInfo,null,2)})})]})]}):a.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:a.jsxs("div",{className:"text-center",children:[a.jsx(r,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Produto não encontrado"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"O produto solicitado não existe ou foi removido."}),a.jsx("button",{onClick:()=>f("/dashboard/products"),className:"btn btn-primary",children:"Voltar para Produtos"})]})})};export{f as default};
