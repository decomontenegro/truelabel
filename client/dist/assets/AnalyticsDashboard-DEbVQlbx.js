var e=Object.defineProperty,s=(s,t,a)=>((s,t,a)=>t in s?e(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a)(s,"symbol"!=typeof t?t+"":t,a);import{c as t,j as a,e as r,L as n,g as i,X as o,P as l,h as c,C as d,H as m,i as x,f as u,d as h,D as g,S as p,b as y,V as b,R as f}from"./index--pVY8JWu.js";import{r as j}from"./vendor-BDxjXY-2.js";import{f as v,s as N}from"./format-BDzt1qre.js";import{t as w,c as k}from"./en-US-pqY3htb7.js";import{u as M}from"./useAsyncAction-CAXDwRpP.js";import{T as S}from"./trending-up-B9b3qhRR.js";import{A as P}from"./activity-Lu2p3PbY.js";import{M as C}from"./map-pin-8-dTDqOl.js";import{T as R}from"./target-BKbQEWDU.js";import{I as D}from"./info-DIqZzMTO.js";import{T as A}from"./triangle-alert-DpA1U4cI.js";import{U as q}from"./users-V1oNfwBD.js";import{S as E}from"./share-2-DgsTvQ0T.js";import{S as I}from"./smartphone-CJ8nmMi9.js";import{S as T}from"./shield-CfWOCZ2j.js";import{C as B}from"./chevron-right-CVM1oXSO.js";import{C as V}from"./calendar-CskR4dPT.js";import{e as L}from"./endOfDay-C4P9Zvyt.js";import"./charts-C38Ohhsz.js";
/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=t("arrow-down",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]),F=t("arrow-up",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),U=t("chart-pie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]),$=t("file-spreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]),O=t("file",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]),G=t("maximize-2",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]]),H=t("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),W=t("monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]),Q=t("mouse-pointer",[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]]),J=t("repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]),Y=t("square-check-big",[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),X=t("square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),Z=t("tablet",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["line",{x1:"12",x2:"12.01",y1:"18",y2:"18",key:"1dp563"}]]),K=t("user-check",[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),_=t("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);function ee(e,s,t){return function(e,s,t){const a=w(e,null==t?void 0:t.in);return isNaN(s)?k(e,NaN):s?(a.setDate(a.getDate()+s),a):a}(e,-s,t)}const se=e=>{(null==e?void 0:e.startDate)?new Date(e.startDate):ee(new Date,30);const s=(null==e?void 0:e.endDate)?new Date(e.endDate):new Date,t=[];for(let r=0;r<30;r++){const e=ee(s,r);t.push({date:v(e,"yyyy-MM-dd"),scans:Math.floor(500*Math.random())+100})}t.reverse();const a=[];for(let r=0;r<24;r++)a.push({hour:r,scans:Math.floor(200*Math.random())+20});return{qrScans:{totalScans:15432,uniqueScans:8765,scansByPeriod:t,scansByHour:a,scansByWeekday:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"].map((e=>({day:e,scans:Math.floor(1e3*Math.random())+200})))},demographics:{byCountry:[{country:"Brasil",count:5432,percentage:62.1},{country:"Portugal",count:1234,percentage:14.1},{country:"Estados Unidos",count:876,percentage:10},{country:"Argentina",count:543,percentage:6.2},{country:"México",count:321,percentage:3.7},{country:"Espanha",count:234,percentage:2.7},{country:"Chile",count:125,percentage:1.4}],byCity:[{city:"São Paulo",country:"Brasil",count:2345},{city:"Rio de Janeiro",country:"Brasil",count:1234},{city:"Lisboa",country:"Portugal",count:876},{city:"Porto",country:"Portugal",count:543},{city:"New York",country:"Estados Unidos",count:432}],byDevice:[{device:"Mobile",count:10234,percentage:66.3},{device:"Desktop",count:4567,percentage:29.6},{device:"Tablet",count:631,percentage:4.1}],byBrowser:[{browser:"Chrome",count:7654,percentage:49.6},{browser:"Safari",count:4321,percentage:28},{browser:"Firefox",count:2345,percentage:15.2},{browser:"Edge",count:1112,percentage:7.2}]},sectionEngagement:[{sectionName:"Informações do Produto",views:15432,averageTime:45,bounceRate:.12},{sectionName:"Análise Laboratorial",views:12345,averageTime:120,bounceRate:.08},{sectionName:"Certificações",views:8765,averageTime:90,bounceRate:.15},{sectionName:"Origem do Produto",views:6543,averageTime:60,bounceRate:.18},{sectionName:"Sustentabilidade",views:4321,averageTime:75,bounceRate:.22}],engagement:{averageSessionDuration:185,bounceRate:.24,returnVisitorRate:.42,conversionRate:.08,pageViewsPerSession:3.2},topProducts:[{productId:"1",productName:"Produto Premium A",scans:3456,uniqueVisitors:2345},{productId:"2",productName:"Produto Elite B",scans:2876,uniqueVisitors:1987},{productId:"3",productName:"Produto Special C",scans:2345,uniqueVisitors:1654},{productId:"4",productName:"Produto Gold D",scans:1987,uniqueVisitors:1432},{productId:"5",productName:"Produto Silver E",scans:1654,uniqueVisitors:1234}]}};const te=new class{async getAnalyticsOverview(e){const s=300+400*Math.random();return await new Promise((e=>setTimeout(e,s))),se(e)}async getQRScanMetrics(e){return se(e).qrScans}async getConsumerDemographics(e){return se(e).demographics}async getSectionEngagement(e){return se(e).sectionEngagement}async getEngagementMetrics(e){return se(e).engagement}async getGeographicAnalytics(e){await new Promise((e=>setTimeout(e,500)));return[{lat:-23.5505,lng:-46.6333,city:"São Paulo",state:"SP",country:"Brasil"},{lat:-22.9068,lng:-43.1729,city:"Rio de Janeiro",state:"RJ",country:"Brasil"},{lat:-19.9167,lng:-43.9345,city:"Belo Horizonte",state:"MG",country:"Brasil"},{lat:-15.7801,lng:-47.9292,city:"Brasília",state:"DF",country:"Brasil"},{lat:-30.0277,lng:-51.2287,city:"Porto Alegre",state:"RS",country:"Brasil"},{lat:38.7223,lng:-9.1393,city:"Lisboa",country:"Portugal"},{lat:41.1579,lng:-8.6291,city:"Porto",country:"Portugal"},{lat:40.7128,lng:-74.006,city:"New York",state:"NY",country:"Estados Unidos"},{lat:-34.6037,lng:-58.3816,city:"Buenos Aires",country:"Argentina"},{lat:19.4326,lng:-99.1332,city:"Cidade do México",country:"México"}].map(((e,s)=>({location:e,value:Math.floor(1e3*Math.random())+100,intensity:Math.random(),details:{totalScans:Math.floor(5e3*Math.random())+500,uniqueUsers:Math.floor(3e3*Math.random())+300,avgSessionDuration:Math.floor(180*Math.random())+60}})))}async getProductPerformance(e,s){await new Promise((e=>setTimeout(e,400)));const t=40*Math.random()+60;return{productId:e,productName:`Produto ${e}`,sku:`SKU-${e}`,performanceScore:t,healthScore:t>80?90:t>60?70:50,trends:{daily:Array.from({length:7},((e,s)=>({period:v(ee(new Date,6-s),"dd/MM"),value:Math.floor(200*Math.random())+50,changePercent:20*Math.random()-10,changeDirection:Math.random()>.5?"up":Math.random()>.3?"down":"stable"}))),weekly:Array.from({length:4},((e,s)=>({period:`Semana ${s+1}`,value:Math.floor(1e3*Math.random())+200,changePercent:30*Math.random()-15,changeDirection:Math.random()>.5?"up":Math.random()>.3?"down":"stable"}))),monthly:[],quarterly:[],predictions:Array.from({length:7},((e,s)=>({date:new Date(Date.now()+24*(s+1)*60*60*1e3),predictedValue:Math.floor(200*Math.random())+100,upperBound:Math.floor(250*Math.random())+150,lowerBound:Math.floor(100*Math.random())+50,confidence:.3*Math.random()+.7})))},comparisons:{vsLastPeriod:40*Math.random()-20,vsAverage:30*Math.random()-15,vsCategoryAverage:25*Math.random()-10,vsTopPerformer:-50*Math.random()-10,rank:Math.floor(10*Math.random())+1,totalProducts:50},alerts:t<70?[{id:"1",type:"warning",metric:"Engagement Rate",message:"Taxa de engajamento abaixo da média",timestamp:new Date,threshold:70,currentValue:t,recommendation:"Considere atualizar o conteúdo do produto"}]:[]}}async getConsumerInsights(e){await new Promise((e=>setTimeout(e,600)));return{segments:[{id:"1",name:"Consumidores Conscientes",size:3456,growthRate:15.2,characteristics:["Valorizam sustentabilidade","Verificam origem","Alta frequência de compra"],value:8.5},{id:"2",name:"Compradores Premium",size:2134,growthRate:8.7,characteristics:["Alto poder aquisitivo","Buscam qualidade","Menos sensíveis a preço"],value:9.2},{id:"3",name:"Millennials Digitais",size:4567,growthRate:22.1,characteristics:["Nativos digitais","Compartilham experiências","Valorizam conveniência"],value:7.8}],behaviors:[{pattern:"Verificação completa de informações",frequency:.67,users:5432,impact:"Alta conversão para compra",trend:"emerging"},{pattern:"Comparação entre produtos",frequency:.45,users:3654,impact:"Maior tempo de decisão",trend:"stable"},{pattern:"Compartilhamento social",frequency:.23,users:1865,impact:"Aumento do alcance orgânico",trend:"emerging"}],preferences:{topSections:[{section:"Informações Nutricionais",percentage:78.5},{section:"Certificações",percentage:65.3},{section:"Origem do Produto",percentage:54.2},{section:"Sustentabilidade",percentage:42.1}],topProducts:[{productId:"1",productName:"Produto Premium A",percentage:18.5},{productId:"2",productName:"Produto Elite B",percentage:15.3},{productId:"3",productName:"Produto Special C",percentage:12.8}],peakHours:Array.from({length:24},((e,s)=>({hour:s,percentage:s>=18&&s<=21?5*Math.random()+10:3*Math.random()+1}))),deviceDistribution:[{device:"Mobile",percentage:67.2},{device:"Desktop",percentage:28.5},{device:"Tablet",percentage:4.3}]},loyaltyMetrics:{returnRate:.42,frequencyDistribution:[{visits:1,users:4532},{visits:2,users:2341},{visits:3,users:1234},{visits:4,users:876},{visits:5,users:543}],lifetimeValue:285.5,churnRate:.18,nps:72}}}async getPredictiveInsights(e){await new Promise((e=>setTimeout(e,800)));return{forecasts:[{metric:"Total de Escaneamentos",period:"daily",confidence:.85,methodology:"ARIMA + Sazonalidade",predictions:Array.from({length:7},((e,s)=>({date:new Date(Date.now()+24*(s+1)*60*60*1e3),predictedValue:Math.floor(200*Math.random())+400,upperBound:Math.floor(250*Math.random())+450,lowerBound:Math.floor(150*Math.random())+350,confidence:.85-.05*s})))}],anomalies:[{id:"1",type:"spike",metric:"Escaneamentos por hora",detectedAt:new Date(Date.now()-72e5),severity:"medium",description:"Aumento anormal de 250% nos escaneamentos",affectedProducts:["1","2"],possibleCauses:["Campanha de marketing","Menção em mídia social"],suggestedActions:["Verificar capacidade do servidor","Preparar estoque adicional"]}],recommendations:[{id:"1",category:"engagement",priority:"high",title:"Otimizar horário de postagens",description:"Baseado nos padrões de acesso, recomendamos concentrar comunicações entre 18h e 21h",impact:{metric:"Engajamento",expectedImprovement:23,confidence:.78},implementation:{difficulty:"easy",timeRequired:"1-2 dias",resources:["Marketing","Social Media"]}},{id:"2",category:"performance",priority:"medium",title:"Implementar cache para imagens",description:"Reduzir tempo de carregamento em dispositivos móveis",impact:{metric:"Taxa de Rejeição",expectedImprovement:-15,confidence:.82},implementation:{difficulty:"medium",timeRequired:"3-5 dias",resources:["Desenvolvimento","Infraestrutura"]}}],riskAssessment:{overallRisk:"low",riskFactors:[{factor:"Dependência de dispositivos móveis",probability:.7,impact:.6,score:.42,trend:"increasing"},{factor:"Concentração geográfica",probability:.5,impact:.4,score:.2,trend:"stable"}],mitigationStrategies:["Diversificar canais de comunicação","Expandir para novos mercados geográficos"]},opportunityAnalysis:{opportunities:[{id:"1",type:"market",title:"Expansão para região Sul",description:"Baixa penetração atual com alto potencial de crescimento",potentialValue:15e4,timeframe:"6 meses",requirements:["Parcerias locais","Campanha regional"]}],marketTrends:["Crescimento do consumo consciente","Aumento da demanda por transparência"],competitiveAdvantages:["Pioneirismo em rastreabilidade","Alta taxa de satisfação do consumidor"]}}}async getRealTimeMetrics(){await new Promise((e=>setTimeout(e,100)));const e=Math.floor(50*Math.random())+10,s=Array.from({length:10},((s,t)=>({id:`action-${t}`,action:["scan","view","share"][Math.floor(3*Math.random())],productId:`${Math.floor(5*Math.random())+1}`,timestamp:new Date(Date.now()-60*Math.random()*60*1e3),sessionId:`session-${Math.floor(Math.random()*e)}`,location:{lat:2*(Math.random()-.5)-23.5505,lng:2*(Math.random()-.5)-46.6333,city:"São Paulo",state:"SP",country:"Brasil"}}))),t=["Produto A","Produto B","Produto C","Produto D","Produto E"].slice(0,3).map(((e,s)=>({type:"product",id:`${s+1}`,name:e,count:Math.floor(100*Math.random())+50,changePercent:40*Math.random()-20,rank:s+1})));return{activeUsers:e,activeScans:Math.floor(.6*e),recentActions:s,liveMap:[{location:{lat:-23.5505,lng:-46.6333,city:"São Paulo",country:"Brasil"},activeUsers:Math.floor(.4*e),recentScans:Math.floor(.3*e),trend:"increasing"}],trending:t,alerts:[]}}async exportAnalyticsReport(e,s){await new Promise((e=>setTimeout(e,1e3)));const t=`Mock ${e.toUpperCase()} Report\nGenerated: ${(new Date).toISOString()}\nFilters: ${JSON.stringify(s,null,2)}`;return new Blob([t],{type:"text/plain"})}async exportCustomReport(e){await new Promise((e=>setTimeout(e,1500)));const s=`Custom ${e.format.toUpperCase()} Report\nGenerated: ${(new Date).toISOString()}\nSections: ${e.sections.map((e=>e.name)).join(", ")}`;return new Blob([s],{type:"text/plain"})}downloadReport(e,s){const t=window.URL.createObjectURL(e),a=document.createElement("a");a.href=t,a.download=s,document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(t)}};const ae=new class{constructor(){s(this,"wsConnection",null),s(this,"wsConfig",{url:"ws://localhost:3000",reconnectInterval:5e3,maxReconnectAttempts:5,heartbeatInterval:3e4}),s(this,"reconnectAttempts",0),s(this,"eventListeners",new Map)}async getAnalyticsOverview(e){return te.getAnalyticsOverview(e)}async getEnhancedAnalytics(e){{const s=await te.getAnalyticsOverview(e);return this.enhanceAnalyticsData(s,e)}}async getGeographicAnalytics(e){return te.getGeographicAnalytics(e)}async getProductPerformance(e,s){return te.getProductPerformance(e,s)}async getConsumerInsights(e){return te.getConsumerInsights(e)}async getPredictiveInsights(e){return te.getPredictiveInsights(e)}async getRealTimeMetrics(){return te.getRealTimeMetrics()}connectWebSocket(e){}disconnectWebSocket(){this.wsConnection&&(this.wsConnection.close(),this.wsConnection=null),this.eventListeners.clear()}addEventListener(e,s){var t;this.eventListeners.has(e)||this.eventListeners.set(e,[]),null==(t=this.eventListeners.get(e))||t.push(s)}removeEventListener(e,s){const t=this.eventListeners.get(e);if(t){const e=t.indexOf(s);e>-1&&t.splice(e,1)}}notifyListeners(e,s){const t=this.eventListeners.get(e);t&&t.forEach((e=>e(s)))}handleReconnect(e){}startHeartbeat(){setInterval((()=>{var e;(null==(e=this.wsConnection)?void 0:e.readyState)===WebSocket.OPEN&&this.wsConnection.send(JSON.stringify({type:"ping"}))}),this.wsConfig.heartbeatInterval)}buildQueryParams(e){const s=new URLSearchParams;return e&&Object.entries(e).forEach((([e,t])=>{null!=t&&(Array.isArray(t)?t.forEach((t=>s.append(e,t.toString()))):s.append(e,t.toString()))})),s}enhanceAnalyticsData(e,s){return{summary:{totalScans:e.qrScans.totalScans,uniqueUsers:e.qrScans.uniqueScans,engagementRate:1-e.engagement.bounceRate,conversionRate:e.engagement.conversionRate,averageSessionDuration:e.engagement.averageSessionDuration,topMetrics:[{name:"Taxa de Retorno",value:100*e.engagement.returnVisitorRate,change:12.5,trend:"up",sparkline:[45,52,48,65,72,68,75]},{name:"Tempo Médio",value:e.engagement.averageSessionDuration,change:-5.2,trend:"down",sparkline:[120,118,125,115,110,108,114]}],keyInsights:["Aumento de 15% no engajamento móvel","Pico de acessos entre 18h e 20h","Brasil representa 62% dos acessos"]},realtime:{activeUsers:Math.floor(50*Math.random())+10,activeScans:Math.floor(30*Math.random())+5,recentActions:[],liveMap:[],trending:e.topProducts.map(((e,s)=>({type:"product",id:e.productId,name:e.productName,count:e.scans,changePercent:20*Math.random()-10,rank:s+1}))),alerts:[]},performance:[],geographic:[],consumer:{segments:[],behaviors:[],preferences:{topSections:e.sectionEngagement.map((s=>({section:s.sectionName,percentage:s.views/e.qrScans.totalScans*100}))),topProducts:e.topProducts.map((s=>({productId:s.productId,productName:s.productName,percentage:s.scans/e.qrScans.totalScans*100}))),peakHours:e.qrScans.scansByHour.map((s=>({hour:s.hour,percentage:s.scans/e.qrScans.totalScans*100}))),deviceDistribution:e.demographics.byDevice.map((e=>({device:e.device,percentage:e.percentage})))},loyaltyMetrics:{returnRate:e.engagement.returnVisitorRate,frequencyDistribution:[],lifetimeValue:0,churnRate:0,nps:0}},predictive:{forecasts:[],anomalies:[],recommendations:[],riskAssessment:{overallRisk:"low",riskFactors:[],mitigationStrategies:[]},opportunityAnalysis:{opportunities:[],marketTrends:[],competitiveAdvantages:[]}},comparisons:{currentPeriod:{start:new Date((null==s?void 0:s.startDate)||Date.now()-2592e6),end:new Date((null==s?void 0:s.endDate)||Date.now()),metrics:{totalScans:e.qrScans.totalScans,uniqueUsers:e.qrScans.uniqueScans,engagementRate:1-e.engagement.bounceRate,conversionRate:e.engagement.conversionRate}},previousPeriod:{start:new Date(Date.now()-5184e6),end:new Date(Date.now()-2592e6),metrics:{totalScans:Math.floor(.85*e.qrScans.totalScans),uniqueUsers:Math.floor(.82*e.qrScans.uniqueScans),engagementRate:.92*(1-e.engagement.bounceRate),conversionRate:.88*e.engagement.conversionRate}},changes:{}}}}async getQRScanMetrics(e){return te.getQRScanMetrics(e)}async getConsumerDemographics(e){return te.getConsumerDemographics(e)}async getSectionEngagement(e){return te.getSectionEngagement(e)}async getEngagementMetrics(e){return te.getEngagementMetrics(e)}async exportAnalyticsReport(e,s){return te.exportAnalyticsReport(e,s)}async exportCustomReport(e){return te.exportCustomReport(e)}async scheduleReport(e){return{id:"mock-schedule-id",message:"Relatório agendado com sucesso"}}downloadReport(e,s){const t=window.URL.createObjectURL(e),a=document.createElement("a");a.href=t,a.download=s,document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(t)}generateInsights(e){var s;const t=[];if(e.summary.engagementRate>.7&&t.push("Alta taxa de engajamento indica forte interesse dos consumidores"),e.geographic&&e.geographic.length>0){const s=e.geographic[0];t.push(`${s.location.city} é o principal mercado consumidor`)}const a=e.consumer.preferences.peakHours.reduce(((e,s)=>e.percentage>s.percentage?e:s));t.push(`Pico de acessos às ${a.hour}h`);return((null==(s=e.consumer.preferences.deviceDistribution.find((e=>"Mobile"===e.device)))?void 0:s.percentage)||0)>60&&t.push("Maioria dos acessos via dispositivos móveis - otimize para mobile"),t}},re=({type:e="line",title:s="Gráfico",height:t=300,message:n="Gráfico temporariamente desabilitado"})=>a.jsxs("div",{className:"flex flex-col items-center justify-center bg-gray-50 border-2 border-dashed border-gray-300 rounded-lg",style:{height:`${t}px`},children:[(()=>{switch(e){case"bar":return a.jsx(r,{className:"h-12 w-12 text-gray-400"});case"pie":case"radial":return a.jsx(U,{className:"h-12 w-12 text-gray-400"});case"area":return a.jsx(P,{className:"h-12 w-12 text-gray-400"});default:return a.jsx(S,{className:"h-12 w-12 text-gray-400"})}})(),a.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:s}),a.jsx("p",{className:"mt-2 text-sm text-gray-500 text-center max-w-sm",children:n}),a.jsx("div",{className:"mt-4 px-4 py-2 bg-blue-100 text-blue-800 rounded-md text-xs",children:"Em desenvolvimento"})]}),ne=({data:e,loading:s=!1,height:t=400,onLocationClick:r})=>{const l=j.useRef(null),[c,d]=j.useState(null),[m,x]=j.useState(!1),[u,h]=j.useState(null);j.useEffect((()=>{if(!l.current||s||!e.length)return;const t=l.current,a=t.getContext("2d");if(!a)return;a.clearRect(0,0,t.width,t.height),a.fillStyle="#f3f4f6",a.fillRect(0,0,t.width,t.height),a.strokeStyle="#e5e7eb",a.lineWidth=1;for(let e=0;e<=t.width;e+=50)a.beginPath(),a.moveTo(e,0),a.lineTo(e,t.height),a.stroke();for(let e=0;e<=t.height;e+=50)a.beginPath(),a.moveTo(0,e),a.lineTo(t.width,e),a.stroke();const r=e.map((e=>e.value)),n=Math.max(...r),i=Math.min(...r);e.forEach((e=>{const s=(e.location.lng+180)/360*t.width,r=(90-e.location.lat)/180*t.height,o=(e.value-i)/(n-i),l=20+30*o,c=.3+.7*o,d=a.createRadialGradient(s,r,0,s,r,l);d.addColorStop(0,`rgba(239, 68, 68, ${c})`),d.addColorStop(.5,`rgba(249, 115, 22, ${.8*c})`),d.addColorStop(1,`rgba(251, 191, 36, ${.3*c})`),a.fillStyle=d,a.beginPath(),a.arc(s,r,l,0,2*Math.PI),a.fill(),a.fillStyle="#1f2937",a.beginPath(),a.arc(s,r,3,0,2*Math.PI),a.fill()})),a.font="12px sans-serif",a.fillStyle="#4b5563",e.forEach((e=>{const s=(e.location.lng+180)/360*t.width,r=(90-e.location.lat)/180*t.height;a.fillText(e.location.city,s+5,r-5)}))}),[e,s,t]);if(s)return a.jsx("div",{className:"flex items-center justify-center",style:{height:t},children:a.jsx(n,{size:"lg"})});if(!e.length)return a.jsxs("div",{className:"flex flex-col items-center justify-center text-gray-500",style:{height:t},children:[a.jsx(C,{className:"h-12 w-12 mb-2 text-gray-400"}),a.jsx("p",{children:"Nenhum dado geográfico disponível"})]});const g=a.jsxs("div",{className:"relative bg-white rounded-lg overflow-hidden",children:[a.jsx("canvas",{ref:l,width:m?window.innerWidth-100:800,height:m?window.innerHeight-200:t,className:"cursor-pointer",onClick:s=>{if(!l.current)return;const t=l.current.getBoundingClientRect(),a=s.clientX-t.left,n=s.clientY-t.top,i=e.find((e=>{const s=(e.location.lng+180)/360*l.current.width,t=(90-e.location.lat)/180*l.current.height;return Math.sqrt((a-s)**2+(n-t)**2)<30}));i&&(d(i),null==r||r(i))},onMouseMove:s=>{if(!l.current)return;const t=l.current.getBoundingClientRect(),a=s.clientX-t.left,r=s.clientY-t.top,n=e.find((e=>{const s=(e.location.lng+180)/360*l.current.width,t=(90-e.location.lat)/180*l.current.height;return Math.sqrt((a-s)**2+(r-t)**2)<30}));h(n||null)},onMouseLeave:()=>h(null)}),u&&a.jsxs("div",{className:"absolute top-4 right-4 bg-white rounded-lg shadow-lg p-4 max-w-xs",children:[a.jsx("h4",{className:"font-semibold text-gray-900",children:u.location.city}),u.location.state&&a.jsx("p",{className:"text-sm text-gray-600",children:u.location.state}),a.jsx("p",{className:"text-sm text-gray-600",children:u.location.country}),a.jsxs("div",{className:"mt-2 space-y-1",children:[a.jsxs("p",{className:"text-sm",children:[a.jsx("span",{className:"text-gray-600",children:"Escaneamentos:"})," ",a.jsx("span",{className:"font-medium",children:i(u.value)})]}),u.details&&a.jsxs(a.Fragment,{children:[a.jsxs("p",{className:"text-sm",children:[a.jsx("span",{className:"text-gray-600",children:"Usuários únicos:"})," ",a.jsx("span",{className:"font-medium",children:i(u.details.uniqueUsers)})]}),a.jsxs("p",{className:"text-sm",children:[a.jsx("span",{className:"text-gray-600",children:"Tempo médio:"})," ",a.jsxs("span",{className:"font-medium",children:[u.details.avgSessionDuration,"s"]})]})]})]})]}),a.jsxs("div",{className:"absolute bottom-4 left-4 bg-white rounded-lg shadow-md p-3",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Intensidade"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-20 h-4 bg-gradient-to-r from-yellow-300 via-orange-400 to-red-500 rounded"}),a.jsxs("div",{className:"flex justify-between w-20 text-xs text-gray-600",children:[a.jsx("span",{children:"Baixa"}),a.jsx("span",{children:"Alta"})]})]})]}),!m&&a.jsx("button",{onClick:()=>x(!0),className:"absolute top-4 right-4 p-2 bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow",title:"Tela cheia",children:a.jsx(G,{className:"h-4 w-4 text-gray-600"})})]});return m?a.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-lg w-full h-full max-w-7xl max-h-[90vh] p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Mapa de Calor - Escaneamentos QR"}),a.jsx("button",{onClick:()=>x(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(o,{className:"h-5 w-5 text-gray-600"})})]}),g]})}):g},ie=({data:e,loading:s=!1,onProductSelect:t})=>{const[r,i]=j.useState("daily"),[o,m]=j.useState(null);if(s)return a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx(n,{size:"lg"})});if(!e.length)return a.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-gray-500",children:[a.jsx(l,{className:"h-12 w-12 mb-2 text-gray-400"}),a.jsx("p",{children:"Nenhum dado de performance disponível"})]});const x=o?e.find((e=>e.productId===o)):e[0];if(!x)return null;const u=e=>{switch(e){case"up":return a.jsx(F,{className:"h-4 w-4 text-green-600"});case"down":return a.jsx(z,{className:"h-4 w-4 text-red-600"});default:return a.jsx(H,{className:"h-4 w-4 text-gray-600"})}},h=e=>{switch(e){case"critical":return a.jsx(A,{className:"h-4 w-4 text-red-600"});case"warning":return a.jsx(A,{className:"h-4 w-4 text-yellow-600"});case"success":return a.jsx(d,{className:"h-4 w-4 text-green-600"});default:return a.jsx(D,{className:"h-4 w-4 text-blue-600"})}};x.trends[r];const{comparisons:g}=x;return x.performanceScore,x.performanceScore,a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("select",{value:o||e[0].productId,onChange:e=>{m(e.target.value),null==t||t(e.target.value)},className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:e.map((e=>a.jsxs("option",{value:e.productId,children:[e.productName," (",e.sku,")"]},e.productId)))}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>i("daily"),className:"px-3 py-1.5 rounded text-sm font-medium transition-colors "+("daily"===r?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"),children:"Diário"}),a.jsx("button",{onClick:()=>i("weekly"),className:"px-3 py-1.5 rounded text-sm font-medium transition-colors "+("weekly"===r?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"),children:"Semanal"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Score de Saúde"}),a.jsx("div",{className:"flex items-center justify-center",children:a.jsx(re,{type:"radial",title:`Score: ${x.healthScore}`,height:150,message:"Gráfico radial temporariamente desabilitado"})}),a.jsx("p",{className:"text-center text-sm text-gray-600 mt-2",children:x.healthScore>=80?"Excelente":x.healthScore>=60?"Bom":"Atenção Necessária"})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Comparações"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"vs Período Anterior"}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("span",{className:"font-medium "+(g.vsLastPeriod>=0?"text-green-600":"text-red-600"),children:c(Math.abs(g.vsLastPeriod))}),u(g.vsLastPeriod>=0?"up":"down")]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"vs Média Geral"}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("span",{className:"font-medium "+(g.vsAverage>=0?"text-green-600":"text-red-600"),children:c(Math.abs(g.vsAverage))}),u(g.vsAverage>=0?"up":"down")]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"vs Categoria"}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("span",{className:"font-medium "+(g.vsCategoryAverage>=0?"text-green-600":"text-red-600"),children:c(Math.abs(g.vsCategoryAverage))}),u(g.vsCategoryAverage>=0?"up":"down")]})]})]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Ranking"}),a.jsx("div",{className:"flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"flex items-center justify-center",children:[a.jsx(R,{className:"h-8 w-8 text-blue-600 mr-2"}),a.jsxs("span",{className:"text-4xl font-bold text-gray-900",children:["#",g.rank]})]}),a.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:["de ",g.totalProducts," produtos"]}),a.jsxs("div",{className:"mt-4",children:[a.jsx("div",{className:"bg-gray-200 rounded-full h-2 w-32 mx-auto",children:a.jsx("div",{className:"bg-blue-600 rounded-full h-2 transition-all duration-300",style:{width:(g.totalProducts-g.rank+1)/g.totalProducts*100+"%"}})}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Top ",c((g.totalProducts-g.rank+1)/g.totalProducts*100)]})]})]})})]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Tendência de Performance"}),a.jsx(re,{type:"area",title:"Tendência de Performance",height:300,message:"Gráfico de área temporariamente desabilitado"})]}),x.alerts.length>0&&a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Alertas e Recomendações"}),a.jsx("div",{className:"space-y-3",children:x.alerts.map((e=>a.jsx("div",{className:"p-4 rounded-lg border "+("critical"===e.type?"bg-red-50 border-red-200":"warning"===e.type?"bg-yellow-50 border-yellow-200":"success"===e.type?"bg-green-50 border-green-200":"bg-blue-50 border-blue-200"),children:a.jsxs("div",{className:"flex items-start",children:[a.jsx("div",{className:"flex-shrink-0 mt-0.5",children:h(e.type)}),a.jsxs("div",{className:"ml-3 flex-1",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900",children:e.message}),a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[e.metric,": ",e.currentValue," (limite: ",e.threshold,")"]}),e.recommendation&&a.jsxs("p",{className:"text-sm text-gray-700 mt-2 font-medium",children:["Recomendação: ",e.recommendation]})]})]})},e.id)))})]}),x.trends.predictions.length>0&&a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Previsões"}),a.jsx(re,{type:"line",title:"Previsões",height:300,message:"Gráfico de previsões temporariamente desabilitado"}),a.jsxs("p",{className:"text-sm text-gray-600 text-center mt-2",children:["Confiança média: ",c(100*x.trends.predictions[0].confidence)]})]})]})},oe=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#14B8A6","#F97316"],le=({data:e,loading:s=!1})=>{const[t,r]=j.useState(null),[o,l]=j.useState("segments");if(s)return a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx(n,{size:"lg"})});const d=e=>{switch(e.toLowerCase()){case"mobile":return a.jsx(I,{className:"h-4 w-4"});case"desktop":return a.jsx(W,{className:"h-4 w-4"});case"tablet":return a.jsx(Z,{className:"h-4 w-4"});default:return null}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-wrap gap-2 border-b border-gray-200",children:[a.jsx("button",{onClick:()=>l("segments"),className:"px-4 py-2 font-medium text-sm border-b-2 transition-colors "+("segments"===o?"text-blue-600 border-blue-600":"text-gray-600 border-transparent hover:text-gray-900"),children:"Segmentos"}),a.jsx("button",{onClick:()=>l("behaviors"),className:"px-4 py-2 font-medium text-sm border-b-2 transition-colors "+("behaviors"===o?"text-blue-600 border-blue-600":"text-gray-600 border-transparent hover:text-gray-900"),children:"Comportamentos"}),a.jsx("button",{onClick:()=>l("preferences"),className:"px-4 py-2 font-medium text-sm border-b-2 transition-colors "+("preferences"===o?"text-blue-600 border-blue-600":"text-gray-600 border-transparent hover:text-gray-900"),children:"Preferências"}),a.jsx("button",{onClick:()=>l("loyalty"),className:"px-4 py-2 font-medium text-sm border-b-2 transition-colors "+("loyalty"===o?"text-blue-600 border-blue-600":"text-gray-600 border-transparent hover:text-gray-900"),children:"Fidelidade"})]}),"segments"===o&&a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:e.segments.map(((e,s)=>a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border-2 cursor-pointer transition-all "+(t===e.id?"border-blue-500 shadow-md":"border-gray-200 hover:border-gray-300"),onClick:()=>r(e.id),children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h4",{className:"font-semibold text-gray-900",children:e.name}),a.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:oe[s%oe.length]}})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Tamanho"}),a.jsx("span",{className:"font-medium",children:i(e.size)})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Crescimento"}),a.jsxs("span",{className:"font-medium "+(e.growthRate>0?"text-green-600":"text-red-600"),children:[e.growthRate>0?"+":"",c(e.growthRate)]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Valor"}),a.jsxs("span",{className:"font-medium",children:[e.value.toFixed(1),"/10"]})]})]}),a.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[a.jsx("p",{className:"text-xs text-gray-600",children:"Características:"}),a.jsxs("div",{className:"mt-1 flex flex-wrap gap-1",children:[e.characteristics.slice(0,2).map(((e,s)=>a.jsx("span",{className:"text-xs bg-gray-100 text-gray-700 px-2 py-1 rounded",children:e},s))),e.characteristics.length>2&&a.jsxs("span",{className:"text-xs text-gray-500",children:["+",e.characteristics.length-2]})]})]})]},e.id)))}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Distribuição de Segmentos"}),a.jsx(re,{height:300,title:"Gráfico de Pizza - Distribuição de Segmentos",description:"Visualização da distribuição dos segmentos de consumidores"})]})]}),"behaviors"===o&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Padrões de Comportamento"}),a.jsx("div",{className:"space-y-4",children:e.behaviors.map(((e,s)=>a.jsx("div",{className:"border-b border-gray-200 last:border-0 pb-4 last:pb-0",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-medium text-gray-900",children:e.pattern}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:e.impact}),a.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[a.jsxs("span",{className:"text-sm text-gray-500",children:[a.jsx(q,{className:"inline h-4 w-4 mr-1"}),i(e.users)," usuários"]}),a.jsxs("span",{className:"text-sm text-gray-500",children:["Frequência: ",c(100*e.frequency)]})]})]}),a.jsx("div",{className:"px-3 py-1 rounded-full text-sm font-medium "+("emerging"===e.trend?"bg-green-100 text-green-700":"declining"===e.trend?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700"),children:"emerging"===e.trend?"Emergente":"declining"===e.trend?"Declinando":"Estável"})]})},s)))})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Impacto dos Comportamentos"}),a.jsx(re,{height:300,title:"Gráfico de Barras - Impacto dos Comportamentos",description:"Visualização do impacto dos diferentes padrões de comportamento"})]})]}),"preferences"===o&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Distribuição por Dispositivo"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:e.preferences.deviceDistribution.map(((e,s)=>a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[d(e.device),a.jsx("span",{className:"font-medium text-gray-900",children:e.device})]}),a.jsx("span",{className:"text-2xl font-bold text-gray-900",children:c(e.percentage)})]},s)))})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Horários de Pico"}),a.jsx(re,{height:200,title:"Gráfico de Barras - Horários de Pico",description:"Visualização dos horários com maior atividade de usuários"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Seções Mais Visitadas"}),a.jsx("div",{className:"space-y-3",children:e.preferences.topSections.map(((e,s)=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-700",children:e.section}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${e.percentage}%`}})}),a.jsx("span",{className:"text-sm font-medium text-gray-900 w-12 text-right",children:c(e.percentage)})]})]},s)))})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Produtos Mais Populares"}),a.jsx("div",{className:"space-y-3",children:e.preferences.topProducts.map(((e,s)=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-700",children:e.productName}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-green-600 h-2 rounded-full transition-all duration-300",style:{width:`${e.percentage}%`}})}),a.jsx("span",{className:"text-sm font-medium text-gray-900 w-12 text-right",children:c(e.percentage)})]})]},s)))})]})]})]}),"loyalty"===o&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Taxa de Retorno"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:c(100*e.loyaltyMetrics.returnRate)})]}),a.jsx(K,{className:"h-8 w-8 text-blue-600"})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Valor Vitalício"}),a.jsxs("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:["R$ ",e.loyaltyMetrics.lifetimeValue.toFixed(2)]})]}),a.jsx(m,{className:"h-8 w-8 text-red-600"})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Taxa de Churn"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:c(100*e.loyaltyMetrics.churnRate)})]}),a.jsx(P,{className:"h-8 w-8 text-orange-600"})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"NPS Score"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:e.loyaltyMetrics.nps})]}),a.jsx(E,{className:"h-8 w-8 text-green-600"})]})})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Distribuição de Frequência de Visitas"}),a.jsx(re,{height:300,title:"Gráfico de Barras - Frequência de Visitas",description:"Distribuição dos usuários por número de visitas"})]})]})]})},ce=({data:e,loading:s=!1,onRecommendationAction:t})=>{const[r,o]=j.useState(0),[l,m]=j.useState(null),[g,p]=j.useState("forecasts");if(s)return a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx(n,{size:"lg"})});const y=e=>{switch(e){case"high":case"critical":return"text-red-600 bg-red-100";case"medium":case"warning":return"text-yellow-600 bg-yellow-100";case"low":case"info":return"text-blue-600 bg-blue-100";default:return"text-gray-600 bg-gray-100"}},b=e=>{switch(e){case"high":return a.jsx(_,{className:"h-4 w-4 text-red-600"});case"medium":return a.jsx(h,{className:"h-4 w-4 text-yellow-600"});case"low":return a.jsx(D,{className:"h-4 w-4 text-blue-600"});default:return null}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-wrap gap-2 border-b border-gray-200",children:[a.jsxs("button",{onClick:()=>p("forecasts"),className:"px-4 py-2 font-medium text-sm border-b-2 transition-colors "+("forecasts"===g?"text-blue-600 border-blue-600":"text-gray-600 border-transparent hover:text-gray-900"),children:[a.jsx(S,{className:"inline h-4 w-4 mr-1"}),"Previsões"]}),a.jsxs("button",{onClick:()=>p("anomalies"),className:"px-4 py-2 font-medium text-sm border-b-2 transition-colors "+("anomalies"===g?"text-blue-600 border-blue-600":"text-gray-600 border-transparent hover:text-gray-900"),children:[a.jsx(A,{className:"inline h-4 w-4 mr-1"}),"Anomalias",e.anomalies.length>0&&a.jsx("span",{className:"ml-1 px-2 py-0.5 text-xs bg-red-100 text-red-600 rounded-full",children:e.anomalies.length})]}),a.jsxs("button",{onClick:()=>p("recommendations"),className:"px-4 py-2 font-medium text-sm border-b-2 transition-colors "+("recommendations"===g?"text-blue-600 border-blue-600":"text-gray-600 border-transparent hover:text-gray-900"),children:[a.jsx(x,{className:"inline h-4 w-4 mr-1"}),"Recomendações",e.recommendations.length>0&&a.jsx("span",{className:"ml-1 px-2 py-0.5 text-xs bg-blue-100 text-blue-600 rounded-full",children:e.recommendations.length})]}),a.jsxs("button",{onClick:()=>p("risks"),className:"px-4 py-2 font-medium text-sm border-b-2 transition-colors "+("risks"===g?"text-blue-600 border-blue-600":"text-gray-600 border-transparent hover:text-gray-900"),children:[a.jsx(T,{className:"inline h-4 w-4 mr-1"}),"Riscos & Oportunidades"]})]}),"forecasts"===g&&(()=>{const s=e.forecasts[r];return s?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("select",{value:r,onChange:e=>o(Number(e.target.value)),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:e.forecasts.map(((e,s)=>a.jsxs("option",{value:s,children:[e.metric," - ","daily"===e.period?"Diário":"weekly"===e.period?"Semanal":"Mensal"]},s)))}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Confiança:"}),a.jsx("span",{className:"font-medium text-gray-900",children:c(100*s.confidence)})]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Previsão: ",s.metric]}),a.jsx(re,{type:"area",title:`Previsão: ${s.metric}`,height:400,message:"Gráfico de previsões temporariamente desabilitado"}),a.jsxs("div",{className:"mt-4 flex items-center justify-center text-sm text-gray-600",children:[a.jsx(D,{className:"h-4 w-4 mr-2"}),"Metodologia: ",s.methodology]})]})]}):null})(),"anomalies"===g&&a.jsx("div",{className:"space-y-6",children:0===e.anomalies.length?a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200 text-center",children:[a.jsx(d,{className:"h-12 w-12 text-green-600 mx-auto mb-2"}),a.jsx("p",{className:"text-gray-600",children:"Nenhuma anomalia detectada no momento"})]}):a.jsx("div",{className:"space-y-4",children:e.anomalies.map((e=>a.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 border-2 "+("high"===e.severity?"border-red-200":"medium"===e.severity?"border-yellow-200":"border-blue-200"),children:a.jsx("div",{className:"flex items-start justify-between",children:a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(A,{className:"h-5 w-5 "+("high"===e.severity?"text-red-600":"medium"===e.severity?"text-yellow-600":"text-blue-600")}),a.jsx("h4",{className:"font-semibold text-gray-900",children:e.description}),a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${y(e.severity)}`,children:"high"===e.severity?"Alta":"medium"===e.severity?"Média":"Baixa"})]}),a.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Métrica: ",e.metric," | Detectada: ",u(e.detectedAt,"dd/MM/yyyy HH:mm")]}),e.affectedProducts&&e.affectedProducts.length>0&&a.jsxs("div",{className:"mb-3",children:[a.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Produtos Afetados:"}),a.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:e.affectedProducts.map((e=>a.jsxs("span",{className:"text-xs bg-gray-100 text-gray-700 px-2 py-1 rounded",children:["Produto ",e]},e)))})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Possíveis Causas:"}),a.jsx("ul",{className:"text-sm text-gray-600 space-y-1",children:e.possibleCauses.map(((e,s)=>a.jsxs("li",{className:"flex items-start",children:[a.jsx("span",{className:"text-gray-400 mr-2",children:"•"}),e]},s)))})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Ações Sugeridas:"}),a.jsx("ul",{className:"text-sm text-gray-600 space-y-1",children:e.suggestedActions.map(((e,s)=>a.jsxs("li",{className:"flex items-start",children:[a.jsx(B,{className:"h-3 w-3 text-gray-400 mr-1 mt-0.5"}),e]},s)))})]})]})]})})},e.id)))})}),"recommendations"===g&&a.jsx("div",{className:"space-y-6",children:a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.recommendations.map((e=>a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>m(l===e.id?null:e.id),children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[b(e.priority),a.jsx("h4",{className:"font-semibold text-gray-900",children:e.title})]}),a.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium "+("performance"===e.category?"bg-purple-100 text-purple-700":"engagement"===e.category?"bg-blue-100 text-blue-700":"content"===e.category?"bg-green-100 text-green-700":"timing"===e.category?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"),children:e.category})]}),a.jsx("p",{className:"text-sm text-gray-600 mb-3",children:e.description}),a.jsx("div",{className:"flex items-center justify-between text-sm",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("span",{className:"text-gray-600",children:["Impacto: ",a.jsxs("span",{className:"font-medium text-green-600",children:["+",e.impact.expectedImprovement,"%"]})]}),a.jsxs("span",{className:"text-gray-600",children:["Dificuldade: ",a.jsx("span",{className:"font-medium "+("easy"===e.implementation.difficulty?"text-green-600":"medium"===e.implementation.difficulty?"text-yellow-600":"text-red-600"),children:"easy"===e.implementation.difficulty?"Fácil":"medium"===e.implementation.difficulty?"Média":"Difícil"})]})]})}),l===e.id&&a.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-700 mb-1",children:"Métrica Alvo:"}),a.jsx("p",{className:"text-gray-600",children:e.impact.metric})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-700 mb-1",children:"Confiança:"}),a.jsx("p",{className:"text-gray-600",children:c(100*e.impact.confidence)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-700 mb-1",children:"Tempo Necessário:"}),a.jsx("p",{className:"text-gray-600",children:e.implementation.timeRequired})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-700 mb-1",children:"Recursos:"}),a.jsx("p",{className:"text-gray-600",children:e.implementation.resources.join(", ")})]})]}),a.jsx("button",{onClick:s=>{s.stopPropagation(),null==t||t(e.id)},className:"mt-4 w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Implementar Recomendação"})]})]},e.id)))})}),"risks"===g&&(()=>{const{riskAssessment:s,opportunityAnalysis:t}=e;return s.riskFactors.map((e=>({factor:e.factor,risk:100*e.score,fullMark:100}))),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Nível de Risco Geral"}),a.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 rounded-lg "+("high"===s.overallRisk?"bg-red-100":"medium"===s.overallRisk?"bg-yellow-100":"bg-green-100"),children:[a.jsx(T,{className:"h-5 w-5 "+("high"===s.overallRisk?"text-red-600":"medium"===s.overallRisk?"text-yellow-600":"text-green-600")}),a.jsx("span",{className:"font-medium "+("high"===s.overallRisk?"text-red-700":"medium"===s.overallRisk?"text-yellow-700":"text-green-700"),children:"high"===s.overallRisk?"Alto":"medium"===s.overallRisk?"Médio":"Baixo"})]})]}),a.jsx(re,{type:"radial",title:"Fatores de Risco",height:300,message:"Gráfico radar temporariamente desabilitado"})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Fatores de Risco Detalhados"}),a.jsx("div",{className:"space-y-3",children:s.riskFactors.map(((e,s)=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-medium text-gray-900",children:e.factor}),a.jsxs("div",{className:"flex items-center gap-4 mt-1 text-sm text-gray-600",children:[a.jsxs("span",{children:["Probabilidade: ",c(100*e.probability)]}),a.jsxs("span",{children:["Impacto: ",c(100*e.impact)]})]})]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsx("div",{className:"px-3 py-1 rounded-full text-sm font-medium "+("increasing"===e.trend?"bg-red-100 text-red-700":"decreasing"===e.trend?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"),children:"increasing"===e.trend?"↑ Aumentando":"decreasing"===e.trend?"↓ Diminuindo":"→ Estável"})})]},s)))})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Estratégias de Mitigação"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:s.mitigationStrategies.map(((e,s)=>a.jsxs("div",{className:"flex items-start p-3 bg-blue-50 rounded-lg",children:[a.jsx(R,{className:"h-5 w-5 text-blue-600 mr-2 mt-0.5"}),a.jsx("span",{className:"text-sm text-gray-700",children:e})]},s)))})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Oportunidades Identificadas"}),a.jsx("div",{className:"space-y-4",children:t.opportunities.map((e=>a.jsxs("div",{className:"border-l-4 border-green-500 pl-4",children:[a.jsx("h4",{className:"font-semibold text-gray-900",children:e.title}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:e.description}),a.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-2 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Valor Potencial:"}),a.jsxs("span",{className:"font-medium text-green-600 ml-1",children:["R$ ",i(e.potentialValue)]})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Prazo:"}),a.jsx("span",{className:"font-medium ml-1",children:e.timeframe})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Requisitos:"}),a.jsxs("span",{className:"font-medium ml-1",children:[e.requirements.length," itens"]})]})]})]},e.id)))})]})]})})()]})},de=({filters:e,onExport:s,onSchedule:t,loading:r=!1})=>{var i,o;const[l,c]=j.useState("pdf"),[d,m]=j.useState(["overview","performance","insights"]),[x,h]=j.useState({layout:"standard",language:"pt",includeRawData:!1,includeCommentary:!0}),[f,v]=j.useState(!1),[N,w]=j.useState({frequency:"weekly",dayOfWeek:1,time:"09:00",recipients:[],format:"pdf"}),[k,M]=j.useState(""),S=[{id:"overview",name:"Visão Geral",included:!0},{id:"performance",name:"Performance de Produtos",included:!0},{id:"geographic",name:"Análise Geográfica",included:!0},{id:"consumer",name:"Insights do Consumidor",included:!0},{id:"predictive",name:"Análise Preditiva",included:!0},{id:"trends",name:"Tendências",included:!0},{id:"recommendations",name:"Recomendações",included:!0}],P=e=>{switch(e){case"pdf":return a.jsx(y,{className:"h-5 w-5"});case"excel":return a.jsx($,{className:"h-5 w-5"});case"csv":case"json":return a.jsx(O,{className:"h-5 w-5"})}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Opções de Exportação"}),a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Formato do Relatório"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:["pdf","excel","csv","json"].map((e=>a.jsxs("button",{onClick:()=>c(e),className:"flex items-center justify-center gap-2 p-3 rounded-lg border-2 transition-all "+(l===e?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 hover:border-gray-400 text-gray-700"),children:[P(e),a.jsx("span",{className:"font-medium uppercase",children:e})]},e)))})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Seções do Relatório"}),a.jsx("div",{className:"space-y-2",children:S.map((e=>a.jsxs("label",{className:"flex items-center p-3 bg-gray-50 rounded-lg hover:bg-gray-100 cursor-pointer",children:[a.jsx("button",{type:"button",onClick:()=>{return s=e.id,void m((e=>e.includes(s)?e.filter((e=>e!==s)):[...e,s]));var s},className:"mr-3",children:d.includes(e.id)?a.jsx(Y,{className:"h-5 w-5 text-blue-600"}):a.jsx(X,{className:"h-5 w-5 text-gray-400"})}),a.jsx("span",{className:"text-sm font-medium text-gray-700",children:e.name})]},e.id)))})]}),"pdf"===l&&a.jsxs("div",{className:"mb-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Layout"}),a.jsxs("select",{value:x.layout,onChange:e=>h((s=>({...s,layout:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"standard",children:"Padrão"}),a.jsx("option",{value:"executive",children:"Executivo"}),a.jsx("option",{value:"detailed",children:"Detalhado"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Idioma"}),a.jsxs("select",{value:x.language,onChange:e=>h((s=>({...s,language:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"pt",children:"Português"}),a.jsx("option",{value:"en",children:"English"}),a.jsx("option",{value:"es",children:"Español"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:x.includeRawData,onChange:e=>h((s=>({...s,includeRawData:e.target.checked}))),className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),a.jsx("span",{className:"text-sm text-gray-700",children:"Incluir dados brutos"})]}),a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:x.includeCommentary,onChange:e=>h((s=>({...s,includeCommentary:e.target.checked}))),className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),a.jsx("span",{className:"text-sm text-gray-700",children:"Incluir comentários e análises"})]})]})]}),a.jsx("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg",children:a.jsxs("p",{className:"text-sm text-blue-700",children:[a.jsx(V,{className:"inline h-4 w-4 mr-1"}),"Período do relatório: ",u(e.startDate||new Date(Date.now()-2592e6))," - ",u(e.endDate||new Date)]})}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("button",{onClick:async()=>{const t={format:l,sections:S.map((e=>({...e,included:d.includes(e.id)}))),dateRange:{start:new Date(e.startDate||Date.now()-2592e6),end:new Date(e.endDate||Date.now())},filters:e,customization:{branding:{companyName:"True Label"},...x}};try{await s(t),b.success(`Relatório ${l.toUpperCase()} exportado com sucesso!`)}catch(a){b.error("Erro ao exportar relatório. Tente novamente.")}},disabled:r||0===d.length,className:"flex items-center gap-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[r?a.jsx(n,{size:"sm",className:"text-white"}):a.jsx(g,{className:"h-4 w-4"}),"Exportar Relatório"]}),t&&a.jsxs("button",{onClick:()=>v(!0),className:"flex items-center gap-2 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[a.jsx(J,{className:"h-4 w-4"}),"Agendar Relatório"]})]})]}),f&&a.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Agendar Relatório"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Frequência"}),a.jsxs("select",{value:N.frequency,onChange:e=>w((s=>({...s,frequency:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"daily",children:"Diário"}),a.jsx("option",{value:"weekly",children:"Semanal"}),a.jsx("option",{value:"monthly",children:"Mensal"}),a.jsx("option",{value:"quarterly",children:"Trimestral"})]})]}),"weekly"===N.frequency&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Dia da Semana"}),a.jsxs("select",{value:N.dayOfWeek,onChange:e=>w((s=>({...s,dayOfWeek:Number(e.target.value)}))),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:0,children:"Domingo"}),a.jsx("option",{value:1,children:"Segunda-feira"}),a.jsx("option",{value:2,children:"Terça-feira"}),a.jsx("option",{value:3,children:"Quarta-feira"}),a.jsx("option",{value:4,children:"Quinta-feira"}),a.jsx("option",{value:5,children:"Sexta-feira"}),a.jsx("option",{value:6,children:"Sábado"})]})]}),"monthly"===N.frequency&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Dia do Mês"}),a.jsx("input",{type:"number",min:"1",max:"31",value:N.dayOfMonth||1,onChange:e=>w((s=>({...s,dayOfMonth:Number(e.target.value)}))),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Horário"}),a.jsx("input",{type:"time",value:N.time,onChange:e=>w((s=>({...s,time:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Destinatários"}),a.jsxs("div",{className:"flex gap-2 mb-2",children:[a.jsx("input",{type:"email",value:k,onChange:e=>M(e.target.value),placeholder:"email@exemplo.com",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),a.jsx("button",{onClick:()=>{if(!k)return;/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(k)?(w((e=>({...e,recipients:[...e.recipients||[],k]}))),M("")):b.error("Email inválido")},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Adicionar"})]}),a.jsx("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:null==(i=N.recipients)?void 0:i.map((e=>a.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[a.jsx("span",{className:"text-sm text-gray-700",children:e}),a.jsx("button",{onClick:()=>(e=>{w((s=>{var t;return{...s,recipients:(null==(t=s.recipients)?void 0:t.filter((s=>s!==e)))||[]}}))})(e),className:"text-red-600 hover:text-red-700",children:a.jsx(me,{className:"h-4 w-4"})})]},e)))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Formato"}),a.jsxs("select",{value:N.format,onChange:e=>w((s=>({...s,format:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"pdf",children:"PDF"}),a.jsx("option",{value:"excel",children:"Excel"}),a.jsx("option",{value:"csv",children:"CSV"})]})]})]}),a.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[a.jsx("button",{onClick:()=>v(!1),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),a.jsxs("button",{onClick:async()=>{var e;if(t)if(0!==(null==(e=N.recipients)?void 0:e.length))try{await t(N),b.success("Relatório agendado com sucesso!"),v(!1),w({frequency:"weekly",dayOfWeek:1,time:"09:00",recipients:[],format:"pdf"})}catch(s){b.error("Erro ao agendar relatório. Tente novamente.")}else b.error("Adicione pelo menos um destinatário")},disabled:r||0===(null==(o=N.recipients)?void 0:o.length),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(p,{className:"h-4 w-4"}),"Agendar"]})]})]})})]})},me=()=>a.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})});function xe(){var e,s,t,r,i,o,l,c,d;const[m,x]=j.useState(null),[u,g]=j.useState(null),[p,y]=j.useState({startDate:v(ee(new Date,30),"yyyy-MM-dd"),endDate:v(new Date,"yyyy-MM-dd")}),[w,k]=j.useState("30d"),[C,R]=j.useState("overview"),[D,A]=j.useState(null),[E,I]=j.useState(null),{loading:T,execute:B}=M((async()=>{try{I(null);const[e,s]=await Promise.all([ae.getAnalyticsOverview(p),ae.getEnhancedAnalytics(p)]);x(e),g(s)}catch(e){I("Erro ao carregar dados de analytics. Por favor, tente novamente.")}})),{loading:V,execute:z}=M((async()=>{const e=await ae.getGeographicAnalytics(p);g((s=>s?{...s,geographic:e}:null))})),{loading:F,execute:U}=M((async()=>{const e=(null==u?void 0:u.performance.map((e=>e.productId)))||["1","2","3"],s=await Promise.all(e.map((e=>ae.getProductPerformance(e,p))));g((e=>e?{...e,performance:s}:null))})),{loading:$,execute:O}=M((async()=>{const e=await ae.getConsumerInsights(p);g((s=>s?{...s,consumer:e}:null))})),{loading:G,execute:H}=M((async()=>{const e=await ae.getPredictiveInsights(p);g((s=>s?{...s,predictive:e}:null))})),{loading:W,execute:J}=M((async e=>{const s=await ae.exportCustomReport(e),t=`analytics-report-${v(new Date,"yyyy-MM-dd")}.${e.format}`;ae.downloadReport(s,t)}));j.useEffect((()=>{if("overview"===C)return ae.connectWebSocket((e=>{"update"===e.type&&u&&g((s=>s?{...s,realtime:e.data}:null))})),()=>{ae.disconnectWebSocket()}}),[C]),j.useEffect((()=>{if(D){const e=setInterval((()=>{B()}),D);return()=>clearInterval(e)}}),[D,p]),j.useEffect((()=>{B()}),[p]);const Y=e=>{k(e);const s=new Date;let t=new Date;switch(e){case"7d":t=ee(s,7);break;case"30d":t=ee(s,30);break;case"90d":t=ee(s,90);break;case"1y":t=ee(s,365)}y({...p,startDate:v(N(t),"yyyy-MM-dd"),endDate:v(L(s),"yyyy-MM-dd")})},X=e=>{var s,t;switch(R(e),e){case"geographic":(null==(s=null==u?void 0:u.geographic)?void 0:s.length)||z();break;case"products":(null==(t=null==u?void 0:u.performance)?void 0:t.length)||U();break;case"consumers":(null==u?void 0:u.consumer)||O();break;case"predictive":(null==u?void 0:u.predictive)||H()}};if(T&&!m)return a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx(n,{size:"lg"})});if(E)return a.jsx("div",{className:"flex flex-col items-center justify-center h-64",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-red-600 mb-4",children:E}),a.jsx("button",{onClick:()=>B(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Tentar Novamente"})]})});if(!m||!u)return a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("p",{className:"text-gray-500",children:"Nenhum dado de analytics disponível."})});const{qrScans:Z,demographics:K,sectionEngagement:_,engagement:se,topProducts:te}=m;return Z.scansByPeriod.map((e=>({...e,formattedDate:v(new Date(e.date),"dd/MM")}))),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard de Analytics"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Acompanhe o desempenho e engajamento dos seus produtos"})]}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsxs("div",{className:"flex items-center gap-2 bg-white rounded-lg shadow-sm border border-gray-200 p-1",children:[a.jsx("button",{onClick:()=>Y("7d"),className:"px-3 py-1.5 rounded text-sm font-medium transition-colors "+("7d"===w?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"),children:"7 dias"}),a.jsx("button",{onClick:()=>Y("30d"),className:"px-3 py-1.5 rounded text-sm font-medium transition-colors "+("30d"===w?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"),children:"30 dias"}),a.jsx("button",{onClick:()=>Y("90d"),className:"px-3 py-1.5 rounded text-sm font-medium transition-colors "+("90d"===w?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"),children:"90 dias"}),a.jsx("button",{onClick:()=>Y("1y"),className:"px-3 py-1.5 rounded text-sm font-medium transition-colors "+("1y"===w?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"),children:"1 ano"})]}),a.jsxs("select",{value:D||"",onChange:e=>A(e.target.value?Number(e.target.value):null),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[a.jsx("option",{value:"",children:"Sem atualização"}),a.jsx("option",{value:"30000",children:"30 segundos"}),a.jsx("option",{value:"60000",children:"1 minuto"}),a.jsx("option",{value:"300000",children:"5 minutos"})]}),a.jsx("button",{onClick:()=>B(),disabled:T,className:"p-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:a.jsx(f,{className:"h-4 w-4 "+(T?"animate-spin":"")})})]})]}),a.jsx("div",{className:"border-b border-gray-200",children:a.jsxs("nav",{className:"-mb-px flex space-x-8",children:[a.jsx("button",{onClick:()=>X("overview"),className:"py-2 px-1 border-b-2 font-medium text-sm "+("overview"===C?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Visão Geral"}),a.jsx("button",{onClick:()=>X("geographic"),className:"py-2 px-1 border-b-2 font-medium text-sm "+("geographic"===C?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Geográfico"}),a.jsx("button",{onClick:()=>X("products"),className:"py-2 px-1 border-b-2 font-medium text-sm "+("products"===C?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Produtos"}),a.jsx("button",{onClick:()=>X("consumers"),className:"py-2 px-1 border-b-2 font-medium text-sm "+("consumers"===C?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Consumidores"}),a.jsx("button",{onClick:()=>X("predictive"),className:"py-2 px-1 border-b-2 font-medium text-sm "+("predictive"===C?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Preditivo"}),a.jsx("button",{onClick:()=>X("export"),className:"py-2 px-1 border-b-2 font-medium text-sm "+("export"===C?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Exportar"})]})}),"overview"===C&&a.jsxs(a.Fragment,{children:[u.realtime&&a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(P,{className:"h-5 w-5 text-yellow-600 animate-pulse"}),a.jsx("span",{className:"font-medium text-yellow-800",children:"Atividade em Tempo Real"})]}),a.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[a.jsxs("span",{className:"text-yellow-700",children:[a.jsx(q,{className:"inline h-4 w-4 mr-1"}),u.realtime.activeUsers," usuários ativos"]}),a.jsxs("span",{className:"text-yellow-700",children:[a.jsx(Q,{className:"inline h-4 w-4 mr-1"}),u.realtime.activeScans," escaneamentos ativos"]})]})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200 hover:shadow-md transition-shadow duration-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Total de Escaneamentos"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:Z.totalScans.toLocaleString()}),u.comparisons&&a.jsxs("p",{className:"text-sm mt-1 "+((null==(e=u.comparisons.changes.totalScans)?void 0:e.percentage)>=0?"text-green-600":"text-red-600"),children:[(null==(s=u.comparisons.changes.totalScans)?void 0:s.percentage)>=0?"+":"",null==(t=u.comparisons.changes.totalScans)?void 0:t.percentage.toFixed(1),"% vs período anterior"]})]}),a.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:a.jsx(Q,{className:"h-6 w-6 text-blue-600"})})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200 hover:shadow-md transition-shadow duration-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Visitantes Únicos"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:Z.uniqueScans.toLocaleString()}),u.comparisons&&a.jsxs("p",{className:"text-sm mt-1 "+((null==(r=u.comparisons.changes.uniqueUsers)?void 0:r.percentage)>=0?"text-green-600":"text-red-600"),children:[(null==(i=u.comparisons.changes.uniqueUsers)?void 0:i.percentage)>=0?"+":"",null==(o=u.comparisons.changes.uniqueUsers)?void 0:o.percentage.toFixed(1),"% vs período anterior"]})]}),a.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:a.jsx(q,{className:"h-6 w-6 text-green-600"})})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200 hover:shadow-md transition-shadow duration-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Taxa de Engajamento"}),a.jsxs("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:[(100*(1-se.bounceRate)).toFixed(1),"%"]}),u.comparisons&&a.jsxs("p",{className:"text-sm mt-1 "+((null==(l=u.comparisons.changes.engagementRate)?void 0:l.percentage)>=0?"text-green-600":"text-red-600"),children:[(null==(c=u.comparisons.changes.engagementRate)?void 0:c.percentage)>=0?"+":"",null==(d=u.comparisons.changes.engagementRate)?void 0:d.percentage.toFixed(1),"% vs período anterior"]})]}),a.jsx("div",{className:"bg-purple-100 p-3 rounded-lg",children:a.jsx(S,{className:"h-6 w-6 text-purple-600"})})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200 hover:shadow-md transition-shadow duration-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Tempo Médio de Sessão"}),a.jsxs("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:[Math.floor(se.averageSessionDuration/60),"m"," ",se.averageSessionDuration%60,"s"]}),u.summary.topMetrics.find((e=>"Tempo Médio"===e.name))&&a.jsxs("p",{className:"text-sm mt-1 "+(u.summary.topMetrics.find((e=>"Tempo Médio"===e.name)).change>=0?"text-green-600":"text-red-600"),children:[u.summary.topMetrics.find((e=>"Tempo Médio"===e.name)).change>=0?"+":"",u.summary.topMetrics.find((e=>"Tempo Médio"===e.name)).change.toFixed(1),"% vs período anterior"]})]}),a.jsx("div",{className:"bg-orange-100 p-3 rounded-lg",children:a.jsx(h,{className:"h-6 w-6 text-orange-600"})})]})})]}),u.summary.keyInsights.length>0&&a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[a.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Principais Insights"}),a.jsx("ul",{className:"space-y-1",children:u.summary.keyInsights.map(((e,s)=>a.jsxs("li",{className:"flex items-start",children:[a.jsx("span",{className:"text-blue-600 mr-2",children:"•"}),a.jsx("span",{className:"text-sm text-blue-800",children:e})]},s)))})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Escaneamentos ao Longo do Tempo"}),a.jsx(re,{type:"area",title:"Escaneamentos ao Longo do Tempo",height:300,message:"Gráfico de área temporariamente desabilitado"})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Distribuição por Dispositivo"}),a.jsx(re,{type:"pie",title:"Distribuição por Dispositivo",height:300,message:"Gráfico de pizza temporariamente desabilitado"})]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Produtos Mais Escaneados"}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Produto"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Escaneamentos"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Visitantes Únicos"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Taxa de Retorno"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:te.map((e=>a.jsxs("tr",{className:"hover:bg-gray-50 transition-colors cursor-pointer",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.productName}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.scans.toLocaleString()}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.uniqueVisitors.toLocaleString()}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[((e.scans-e.uniqueVisitors)/e.scans*100).toFixed(1),"%"]})]},e.productId)))})]})})]})]}),"geographic"===C&&a.jsx("div",{className:"space-y-6",children:a.jsx(ne,{data:u.geographic||[],loading:V,onLocationClick:e=>{}})}),"products"===C&&a.jsx(ie,{data:u.performance||[],loading:F,onProductSelect:e=>{}}),"consumers"===C&&a.jsx(le,{data:u.consumer||{segments:[],behaviors:[],preferences:{topSections:[],topProducts:[],peakHours:[],deviceDistribution:[]},loyaltyMetrics:{returnRate:0,frequencyDistribution:[],lifetimeValue:0,churnRate:0,nps:0}},loading:$}),"predictive"===C&&a.jsx(ce,{data:u.predictive||{forecasts:[],anomalies:[],recommendations:[],riskAssessment:{overallRisk:"low",riskFactors:[],mitigationStrategies:[]},opportunityAnalysis:{opportunities:[],marketTrends:[],competitiveAdvantages:[]}},loading:G,onRecommendationAction:e=>{b.success("Recomendação adicionada à lista de tarefas")}}),"export"===C&&a.jsx(de,{filters:p,onExport:J,onSchedule:async e=>{await ae.scheduleReport(e),b.success("Relatório agendado com sucesso")},loading:W})]})}export{xe as default};
