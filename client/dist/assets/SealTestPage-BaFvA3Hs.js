import{j as e,V as s}from"./index-BwznawPq.js";import{r as a}from"./vendor-BDxjXY-2.js";import{s as r}from"./sealService-DLA3JCMh.js";import"./charts-C38Ohhsz.js";const t=()=>{const[t,i]=a.useState([]),[l,d]=a.useState([]),[o,c]=a.useState(!1),n="04aa9c1a-c7c2-48a9-84ce-560e50914dfe",m=async()=>{var e;try{c(!0);const a=await r.getSeals({isActive:!0});i(a.seals||[]),s.success(`Carregados ${(null==(e=a.seals)?void 0:e.length)||0} selos`)}catch(a){s.error("Erro ao carregar selos")}finally{c(!1)}},x=async()=>{var e;try{c(!0);const a=await r.getProductSeals({productId:n});d(a.productSeals||[]),s.success(`Carregados ${(null==(e=a.productSeals)?void 0:e.length)||0} selos do produto`)}catch(a){s.error("Erro ao carregar selos do produto")}finally{c(!1)}};return a.useEffect((()=>{m(),x()}),[]),e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"üß™ Teste de Selos"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-lg font-semibold",children:["Selos Dispon√≠veis (",t.length,")"]}),e.jsx("button",{onClick:m,disabled:o,className:"btn btn-outline btn-sm",children:"üîÑ Recarregar"})]}),e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:t.map((s=>e.jsxs("div",{className:"p-2 border rounded",children:[e.jsx("div",{className:"font-medium",children:s.name}),e.jsx("div",{className:"text-sm text-gray-600",children:s.purpose}),e.jsxs("div",{className:"text-xs text-gray-400",children:[s.category," ‚Ä¢ ",s.isRequired?"Obrigat√≥rio":"Opcional"]})]},s.id)))})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-lg font-semibold",children:["Selos do Produto (",l.length,")"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:x,disabled:o,className:"btn btn-outline btn-sm",children:"üîÑ Recarregar"}),e.jsx("button",{onClick:async()=>{try{c(!0);const e={productId:n,sealId:"sif",certificateNumber:"TEST123",issuedDate:"2024-01-01",expiryDate:"2025-01-01",validatingLaboratory:"Laborat√≥rio Teste",notes:"Teste de adi√ß√£o de selo"};await r.addProductSeal(e);s.success("Selo adicionado com sucesso!"),await x()}catch(e){s.error("Erro ao adicionar selo")}finally{c(!1)}},disabled:o,className:"btn btn-primary btn-sm",children:"‚ûï Adicionar SIF"})]})]}),e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:l.map((s=>{var a;return e.jsxs("div",{className:"p-2 border rounded",children:[e.jsx("div",{className:"font-medium",children:(null==(a=s.seal)?void 0:a.name)||s.sealId}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Certificado: ",s.certificateNumber||"N/A"]}),e.jsxs("div",{className:"text-xs text-gray-400",children:["Status: ",s.status," ‚Ä¢ Criado: ",new Date(s.createdAt).toLocaleDateString()]})]},s.id)}))})]})]}),e.jsxs("div",{className:"mt-6 bg-gray-100 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"üìã Instru√ß√µes:"}),e.jsxs("ul",{className:"text-sm space-y-1",children:[e.jsx("li",{children:"1. Verifique se os selos dispon√≠veis s√£o carregados"}),e.jsx("li",{children:"2. Verifique se os selos do produto s√£o carregados"}),e.jsx("li",{children:"3. Teste adicionar um selo SIF"}),e.jsx("li",{children:"4. Abra o console do navegador para ver os logs detalhados"})]})]}),o&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white p-4 rounded-lg",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto"}),e.jsx("div",{className:"mt-2 text-sm",children:"Carregando..."})]})})]})};export{t as default};
