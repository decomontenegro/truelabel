import{Y as e,j as s,N as a,T as t,X as l,Z as r,d}from"./index-BwznawPq.js";import{i,e as c,r as n}from"./vendor-BDxjXY-2.js";import{v as x}from"./validationService-BbgiGnSP.js";import"./charts-C38Ohhsz.js";import"./fallbackService-D-6NybDe.js";import"./qrService-6zzcFofI.js";const o=()=>{var o,m,h,j,g,u;const{id:N}=i(),p=c(),[v,y]=n.useState(null),[b,f]=n.useState(!0),[w,A]=n.useState(!1);n.useEffect((()=>{N&&D()}),[N]);const D=async()=>{if(N)try{f(!0);const e=await x.getValidation(N);y(e.validation)}catch(s){e.error("Erro ao carregar validação"),p("/dashboard/validations")}finally{f(!1)}},E=async s=>{if(N&&v){A(!0);try{const a=await x.updateValidation(N,{status:s});y(a.validation),e.success(`Validação ${"APPROVED"===s?"aprovada":"rejeitada"} com sucesso!`)}catch(a){e.error("Erro ao atualizar status")}finally{A(!1)}}};return b?s.jsx("div",{className:"flex items-center justify-center min-h-64",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Carregando validação..."})]})}):v?s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("button",{onClick:()=>p("/dashboard/validations"),className:"mr-4 p-2 hover:bg-gray-100 rounded-lg transition-colors",children:s.jsx(a,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Revisar Validação"}),s.jsxs("p",{className:"text-gray-600 mt-1",children:[(null==(o=v.product)?void 0:o.name)||"Produto"," - ",(null==(m=v.product)?void 0:m.brand)||"Marca"]})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:["APPROVED"!==v.status&&s.jsxs("button",{onClick:()=>E("APPROVED"),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 transition-colors",disabled:w,children:[s.jsx(t,{className:"w-4 h-4 mr-1 inline"}),"Aprovar"]}),"REJECTED"!==v.status&&s.jsxs("button",{onClick:()=>E("REJECTED"),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 transition-colors",disabled:w,children:[s.jsx(l,{className:"w-4 h-4 mr-1 inline"}),"Rejeitar"]})]})]})}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Status da Validação"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Status Atual"}),s.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium mt-1 "+("APPROVED"===v.status?"bg-green-100 text-green-800":"REJECTED"===v.status?"bg-red-100 text-red-800":"PENDING"===v.status?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"),children:"APPROVED"===v.status?"Aprovado":"REJECTED"===v.status?"Rejeitado":"PENDING"===v.status?"Pendente":v.status})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Tipo de Validação"}),s.jsx("p",{className:"text-gray-900 mt-1",children:v.type||"MANUAL"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Data de Criação"}),s.jsx("p",{className:"text-gray-900 mt-1",children:new Date(v.createdAt).toLocaleDateString("pt-BR")})]})]}),v.validatedAt&&s.jsx("div",{className:"mt-4 p-3 bg-green-50 rounded-lg",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(t,{className:"w-5 h-5 text-green-600 mr-2"}),s.jsxs("span",{className:"text-sm text-green-800",children:["Validado em ",new Date(v.validatedAt).toLocaleDateString("pt-BR")," às ",new Date(v.validatedAt).toLocaleTimeString("pt-BR")]})]})})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informações do Produto"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Nome do Produto"}),s.jsx("p",{className:"text-gray-900 font-medium",children:(null==(h=v.product)?void 0:h.name)||"N/A"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Marca"}),s.jsx("p",{className:"text-gray-900 font-medium",children:(null==(j=v.product)?void 0:j.brand)||"N/A"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"SKU"}),s.jsx("p",{className:"text-gray-900 font-medium",children:(null==(g=v.product)?void 0:g.sku)||"N/A"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Categoria"}),s.jsx("p",{className:"text-gray-900 font-medium",children:(null==(u=v.product)?void 0:u.category)||"N/A"})]})]})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Detalhes da Validação"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"ID da Validação"}),s.jsx("p",{className:"text-gray-900 font-mono text-sm",children:v.id})]}),v.summary&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Resumo"}),s.jsx("p",{className:"text-gray-900",children:v.summary})]}),v.notes&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Observações"}),s.jsx("p",{className:"text-gray-700",children:v.notes})]}),v.laboratory&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Laboratório"}),s.jsx("p",{className:"text-gray-900",children:v.laboratory})]}),v.validator&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Validador"}),s.jsxs("div",{className:"flex items-center mt-1",children:[s.jsx(r,{className:"w-4 h-4 text-gray-400 mr-2"}),s.jsx("p",{className:"text-gray-900",children:v.validator})]})]})]})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Timeline da Validação"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx(d,{className:"w-4 h-4 text-blue-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Validação Criada"}),s.jsx("p",{className:"text-sm text-gray-600",children:new Date(v.createdAt).toLocaleString("pt-BR")})]})]}),v.requestedAt&&s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center",children:s.jsx(d,{className:"w-4 h-4 text-yellow-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Validação Solicitada"}),s.jsx("p",{className:"text-sm text-gray-600",children:new Date(v.requestedAt).toLocaleString("pt-BR")})]})]}),v.validatedAt&&s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:s.jsx(t,{className:"w-4 h-4 text-green-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Validação Concluída"}),s.jsx("p",{className:"text-sm text-gray-600",children:new Date(v.validatedAt).toLocaleString("pt-BR")})]})]})]})]})]}):s.jsxs("div",{className:"text-center py-12",children:[s.jsx("p",{className:"text-gray-600",children:"Validação não encontrada"}),s.jsx("button",{onClick:()=>p("/dashboard/validations"),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Voltar para Validações"})]})};export{o as default};
