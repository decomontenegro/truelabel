import{r as e,j as a,K as t,an as r,aq as s,C as l,F as c,ae as i,z as d,o as n,au as o,n as m}from"./react-core-XCdXHkeW.js";import{v as h}from"./validationService-Ds-ci427.js";import{L as p}from"./index-D7IercYq.js";import{c as u,p as x}from"./utils-BtzqxagS.js";import"./vendor-BcMaAnXF.js";import"./state-QrSTFgAv.js";import"./react-dom-BslC4xag.js";import"./fallbackService-QR578FZI.js";import"./qrService-BwD7nkbO.js";import"./react-router-G9IXNjIc.js";import"./forms-Bk6aQ3xQ.js";const N=()=>{const[N,g]=e.useState([]),[y,v]=e.useState(!0),[f,b]=e.useState(null),[w,P]=e.useState({status:"",search:"",page:1,limit:10});e.useEffect((()=>{E()}),[w]);const E=async()=>{try{v(!0),b(null);const e=await h.getValidations(w);g(e.data)}catch(e){b(e.message||"Erro ao carregar valida\xe7\xf5es")}finally{v(!1)}},A=e=>{switch(e){case"APPROVED":return a.jsx(m,{className:"h-5 w-5 text-green-500"});case"REJECTED":return a.jsx(o,{className:"h-5 w-5 text-red-500"});case"PENDING":return a.jsx(n,{className:"h-5 w-5 text-yellow-500"});case"PARTIAL":return a.jsx(l,{className:"h-5 w-5 text-orange-500"});default:return a.jsx(n,{className:"h-5 w-5 text-gray-500"})}},j=e=>{switch(e){case"APPROVED":return"bg-green-100 text-green-800";case"REJECTED":return"bg-red-100 text-red-800";case"PENDING":return"bg-yellow-100 text-yellow-800";case"PARTIAL":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},R=e=>{switch(e){case"APPROVED":return"Aprovado";case"REJECTED":return"Rejeitado";case"PENDING":return"Pendente";case"PARTIAL":return"Parcial";default:return e}};return y&&0===N.length?a.jsxs("div",{className:"flex items-center justify-center h-64",children:[a.jsx(p,{size:"lg"}),a.jsx("span",{className:"ml-2 text-gray-600",children:"Carregando valida\xe7\xf5es..."})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Valida\xe7\xf5es"}),a.jsx("p",{className:"text-gray-600",children:"Acompanhe o status das valida\xe7\xf5es de produtos"})]}),a.jsxs("button",{className:"btn btn-primary",children:[a.jsx(t,{className:"h-4 w-4 mr-2"}),"Nova Valida\xe7\xe3o"]})]}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-4",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),a.jsxs("select",{value:w.status,onChange:e=>P({...w,status:e.target.value,page:1}),className:"w-full border border-gray-300 rounded-md px-3 py-2",children:[a.jsx("option",{value:"",children:"Todos os status"}),a.jsx("option",{value:"PENDING",children:"Pendente"}),a.jsx("option",{value:"APPROVED",children:"Aprovado"}),a.jsx("option",{value:"REJECTED",children:"Rejeitado"}),a.jsx("option",{value:"PARTIAL",children:"Parcial"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Buscar"}),a.jsxs("div",{className:"relative",children:[a.jsx(r,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),a.jsx("input",{type:"text",value:w.search,onChange:e=>P({...w,search:e.target.value,page:1}),placeholder:"Buscar por produto...",className:"w-full pl-10 border border-gray-300 rounded-md px-3 py-2"})]})]}),a.jsx("div",{className:"flex items-end",children:a.jsxs("button",{onClick:E,className:"btn btn-secondary",disabled:y,children:[a.jsx(s,{className:"h-4 w-4 mr-2"}),"Filtrar"]})})]})}),f&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(l,{className:"h-5 w-5 text-red-500 mr-2"}),a.jsx("span",{className:"text-red-700",children:f}),a.jsx("button",{onClick:E,className:"ml-auto text-red-600 hover:text-red-800 underline",children:"Tentar novamente"})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm border overflow-hidden",children:0!==N.length||y?a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Produto"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tipo"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"A\xe7\xf5es"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:N.map((e=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{children:[a.jsxs("div",{className:"text-sm font-medium text-gray-900",children:["Produto #",e.productId]}),a.jsx("div",{className:"text-sm text-gray-500",children:e.summary||"Sem resumo dispon\xedvel"})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[A(e.status),a.jsx("span",{className:`ml-2 inline-flex px-2 py-1 text-xs font-semibold rounded-full ${j(e.status)}`,children:R(e.status)})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:"LABORATORY"===e.type?"Laboratorial":"Manual"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(i,{className:"h-4 w-4 mr-1"}),e.validatedAt?u(new Date(e.validatedAt),{addSuffix:!0,locale:x}):u(new Date(e.createdAt),{addSuffix:!0,locale:x})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{className:"text-blue-600 hover:text-blue-900",children:a.jsx(d,{className:"h-4 w-4"})}),e.reportId&&a.jsx("button",{className:"text-green-600 hover:text-green-900",children:a.jsx(c,{className:"h-4 w-4"})})]})})]},e.id)))})]})}):a.jsxs("div",{className:"text-center py-12",children:[a.jsx(c,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhuma valida\xe7\xe3o encontrada"}),a.jsx("p",{className:"text-gray-600",children:w.status||w.search?"Tente ajustar os filtros para ver mais resultados.":"Comece criando sua primeira valida\xe7\xe3o de produto."})]})}),y&&N.length>0&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-4 flex items-center",children:[a.jsx(p,{size:"sm"}),a.jsx("span",{className:"ml-2",children:"Atualizando..."})]})})]})};export{N as default};
