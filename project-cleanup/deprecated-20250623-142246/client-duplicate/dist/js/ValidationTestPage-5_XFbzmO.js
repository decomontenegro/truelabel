import{r as e,j as a}from"./react-core-XCdXHkeW.js";import{d}from"./react-router-G9IXNjIc.js";import"./vendor-BcMaAnXF.js";import"./state-QrSTFgAv.js";import"./react-dom-BslC4xag.js";const r=()=>{var r,l,i,n,s,t,c;const{qrCode:o}=d(),[m,h]=e.useState(null),[u,p]=e.useState(!1),[g,b]=e.useState(null);return a.jsxs("div",{className:"container mx-auto px-4 py-8",children:[a.jsx("h1",{className:"text-2xl font-bold mb-6",children:"\ud83e\uddea Teste de Valida\xe7\xe3o"}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"QR Code da URL"}),a.jsx("input",{type:"text",value:o||"",readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50"})]}),a.jsx("button",{onClick:async()=>{if(o)try{p(!0),b(null);const e=`http://localhost:3000/api/qr/validate/${o}`,a=await fetch(e);if(!a.ok){const e=await a.text();throw new Error(`HTTP ${a.status}: ${e}`)}const d=await a.json();h(d)}catch(e){b(e.message)}finally{p(!1)}else b("Nenhum QR Code fornecido")},disabled:u||!o,className:"w-full btn btn-primary mb-4",children:u?"\u23f3 Testando...":"\ud83d\udd04 Testar Valida\xe7\xe3o"}),g&&a.jsxs("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-md",children:[a.jsx("h3",{className:"font-medium text-red-800",children:"Erro:"}),a.jsx("p",{className:"text-red-700",children:g})]}),m&&a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"p-4 bg-green-50 border border-green-200 rounded-md",children:a.jsx("h3",{className:"font-medium text-green-800",children:"\u2705 Valida\xe7\xe3o Bem-sucedida"})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"p-4 bg-gray-50 rounded-md",children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"\ud83d\udce6 Produto"}),a.jsxs("div",{className:"space-y-1 text-sm",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Nome:"})," ",null==(r=m.product)?void 0:r.name]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Marca:"})," ",null==(l=m.product)?void 0:l.brand]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Categoria:"})," ",null==(i=m.product)?void 0:i.category]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Claims:"})," ",null==(n=m.product)?void 0:n.claims]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Status:"})," ",null==(s=m.product)?void 0:s.status]})]})]}),a.jsxs("div",{className:"p-4 bg-gray-50 rounded-md",children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"\ud83d\udd2c Valida\xe7\xe3o"}),m.validation?a.jsxs("div",{className:"space-y-1 text-sm",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Status:"})," ",m.validation.status]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Laborat\xf3rio:"})," ",null==(t=m.validation.laboratory)?void 0:t.name]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Acredita\xe7\xe3o:"})," ",null==(c=m.validation.laboratory)?void 0:c.accreditation]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Resumo:"})," ",m.validation.summary]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Validado em:"})," ",new Date(m.validation.validatedAt).toLocaleString()]})]}):a.jsx("p",{className:"text-sm text-gray-500",children:"Nenhuma valida\xe7\xe3o encontrada"})]})]}),a.jsxs("div",{className:"p-4 bg-blue-50 rounded-md",children:[a.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"\ud83c\udff7\ufe0f Flags"}),a.jsxs("div",{className:"space-y-1 text-sm",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"\xc9 Validado:"})," ",m.isValidated?"\u2705 Sim":"\u274c N\xe3o"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"\xdaltima Atualiza\xe7\xe3o:"})," ",new Date(m.lastUpdated).toLocaleString()]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Acessado em:"})," ",new Date(m.accessedAt).toLocaleString()]})]})]}),a.jsxs("details",{className:"p-4 bg-gray-50 rounded-md",children:[a.jsx("summary",{className:"font-medium text-gray-900 cursor-pointer",children:"\ud83d\udccb Dados Raw (JSON)"}),a.jsx("pre",{className:"mt-2 text-xs bg-white p-2 rounded border overflow-auto",children:JSON.stringify(m,null,2)})]})]})]}),a.jsxs("div",{className:"mt-6 bg-gray-100 p-4 rounded-lg",children:[a.jsx("h3",{className:"font-semibold mb-2",children:"\ud83d\udccb Instru\xe7\xf5es:"}),a.jsxs("ul",{className:"text-sm space-y-1",children:[a.jsx("li",{children:"\u2022 Esta p\xe1gina testa a valida\xe7\xe3o de QR codes"}),a.jsx("li",{children:"\u2022 O QR code vem da URL: /test-validation/:qrCode"}),a.jsx("li",{children:'\u2022 Clique em "Testar Valida\xe7\xe3o" para fazer a chamada da API'}),a.jsx("li",{children:"\u2022 Verifique o console do navegador para logs detalhados"}),a.jsx("li",{children:"\u2022 Se funcionar aqui, o problema pode estar na p\xe1gina principal"})]})]})]})};export{r as default};
