import{r as e,j as a,z as s,ak as t,Q as r,a9 as l,Y as c,al as i,C as n,am as d,an as o,ao as m,ap as h,K as u,aq as p}from"./react-core-XCdXHkeW.js";import{L as N,b as x}from"./react-router-G9IXNjIc.js";import{p as g}from"./productService-CHIPryK1.js";import{g as v,e as f,f as y,h as w,u as b,i as C}from"./index-D7IercYq.js";import{u as R}from"./qrStore-DYdzASqr.js";import{P as j}from"./Pagination-CQIAWTMV.js";import"./vendor-BcMaAnXF.js";import"./state-QrSTFgAv.js";import"./react-dom-BslC4xag.js";import"./utils-BtzqxagS.js";import"./forms-Bk6aQ3xQ.js";const A=e.memo((({product:e,userRole:n,onQRCodeClick:d})=>{const o="BRAND"===n||"ADMIN"===n;return a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[e.imageUrl&&a.jsx("img",{className:"h-10 w-10 rounded-lg object-cover mr-3",src:e.imageUrl,alt:e.name,loading:"lazy"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.name}),a.jsxs("div",{className:"text-sm text-gray-500",children:[e.brand," \u2022 SKU: ",e.sku]})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.category}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${f(e.status)}`,children:v(e.status)})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:y(e.createdAt)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(N,{to:`/dashboard/products/${e.id}`,className:"text-primary-600 hover:text-primary-900",title:"Ver detalhes",children:a.jsx(s,{className:"h-4 w-4"})}),o&&a.jsxs(a.Fragment,{children:[a.jsx(N,{to:`/dashboard/products/${e.id}/edit`,className:"text-gray-600 hover:text-gray-900",title:"Editar",children:a.jsx(t,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>d(e),className:"text-green-600 hover:text-green-900",title:e.qrCode?"Ver QR Code":"Gerar QR Code",children:a.jsx(r,{className:"h-4 w-4"})}),a.jsx(N,{to:`/dashboard/products/${e.id}/seals`,className:"text-blue-600 hover:text-blue-900",title:"Gerenciar Selos",children:a.jsx(l,{className:"h-4 w-4"})}),a.jsx(N,{to:`/dashboard/products/${e.id}/traceability`,className:"text-purple-600 hover:text-purple-900",title:"Rastreabilidade",children:a.jsx(c,{className:"h-4 w-4"})})]}),a.jsx("button",{className:"text-gray-400 hover:text-gray-600",children:a.jsx(i,{className:"h-4 w-4"})})]})})]})}));A.displayName="ProductRow";const k=e.memo((({product:e,userRole:t,onQRCodeClick:c})=>{const i="BRAND"===t||"ADMIN"===t;return a.jsxs("div",{className:"card-hover border-b border-neutral-200 p-4 transition-all duration-200 ease-in-out hover:bg-neutral-50",children:[a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex items-center flex-1",children:[e.imageUrl&&a.jsx("img",{className:"h-12 w-12 rounded-lg object-cover mr-3 flex-shrink-0 transition-transform duration-200 hover:scale-105",src:e.imageUrl,alt:e.name,loading:"lazy"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"text-sm font-medium text-neutral-900 truncate",children:e.name}),a.jsx("p",{className:"text-sm text-neutral-500 truncate",children:e.brand}),a.jsxs("p",{className:"text-xs text-neutral-400",children:["SKU: ",e.sku]})]})]}),a.jsxs("div",{className:"flex items-center space-x-2 ml-2",children:[a.jsx(N,{to:`/dashboard/products/${e.id}`,className:"icon-btn text-primary-600 hover:text-primary-700",title:"Ver detalhes",children:a.jsx(s,{className:"h-4 w-4"})}),i&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>c(e),className:"icon-btn text-success-600 hover:text-success-700",title:e.qrCode?"Ver QR Code":"Gerar QR Code",children:a.jsx(r,{className:"h-4 w-4"})}),a.jsx(N,{to:`/dashboard/products/${e.id}/seals`,className:"icon-btn text-info-600 hover:text-info-700",title:"Gerenciar Selos",children:a.jsx(l,{className:"h-4 w-4"})})]})]})]}),a.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("span",{className:`badge ${f(e.status).replace("bg-","badge-").split(" ")[0]}`,children:v(e.status)}),a.jsx("span",{className:"text-xs text-neutral-500",children:e.category})]}),a.jsx("span",{className:"text-xs text-neutral-400",children:y(e.createdAt)})]})]})}));k.displayName="ProductCard";const P=({className:e,width:s,height:t})=>a.jsx("div",{className:w("animate-pulse bg-gray-200 dark:bg-gray-700 rounded",e),style:{width:s,height:t}}),D=({variant:e="card",count:s=1,className:t})=>{const r=()=>{switch(e){case"card":return a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 space-y-4",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx(P,{className:"h-12 w-12 rounded-full"}),a.jsxs("div",{className:"flex-1 space-y-2",children:[a.jsx(P,{className:"h-4 w-3/4"}),a.jsx(P,{className:"h-3 w-1/2"})]})]}),a.jsx(P,{className:"h-20 w-full"}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx(P,{className:"h-8 w-24"}),a.jsx(P,{className:"h-8 w-24"})]})]});case"list":return a.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx(P,{className:"h-10 w-10 rounded"}),a.jsxs("div",{className:"flex-1 space-y-2",children:[a.jsx(P,{className:"h-4 w-2/3"}),a.jsx(P,{className:"h-3 w-1/3"})]}),a.jsx(P,{className:"h-8 w-20"})]})});case"table":return a.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[a.jsx("div",{className:"p-4 border-b",children:a.jsx(P,{className:"h-8 w-full"})}),Array.from({length:5}).map(((e,s)=>a.jsxs("div",{className:"p-4 border-b flex items-center space-x-4",children:[a.jsx(P,{className:"h-4 w-8"}),a.jsx(P,{className:"h-4 flex-1"}),a.jsx(P,{className:"h-4 w-24"}),a.jsx(P,{className:"h-4 w-24"}),a.jsx(P,{className:"h-8 w-20"})]},s)))]});case"form":return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(P,{className:"h-4 w-24"}),a.jsx(P,{className:"h-10 w-full"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(P,{className:"h-4 w-32"}),a.jsx(P,{className:"h-10 w-full"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(P,{className:"h-4 w-28"}),a.jsx(P,{className:"h-24 w-full"})]}),a.jsx(P,{className:"h-10 w-32"})]});case"page":return a.jsxs("div",{className:"space-y-6",children:[a.jsx(P,{className:"h-8 w-64"}),a.jsx(P,{className:"h-4 w-96"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6}).map(((e,s)=>a.jsx("div",{children:l()},s)))})]});case"inline":return a.jsx(P,{className:"h-4 w-24 inline-block"});default:return null}},l=()=>a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 space-y-4",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx(P,{className:"h-12 w-12 rounded-full"}),a.jsxs("div",{className:"flex-1 space-y-2",children:[a.jsx(P,{className:"h-4 w-3/4"}),a.jsx(P,{className:"h-3 w-1/2"})]})]}),a.jsx(P,{className:"h-20 w-full"}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx(P,{className:"h-8 w-24"}),a.jsx(P,{className:"h-8 w-24"})]})]});return s>1&&"page"!==e&&"inline"!==e?a.jsx("div",{className:w("space-y-4",t),children:Array.from({length:s}).map(((e,s)=>a.jsx("div",{children:r()},s)))}):a.jsx("div",{className:t,children:r()})},E=({variant:e="default",icon:s,title:t,description:r,action:l,secondaryAction:c,className:i})=>{const h=s||{default:m,search:o,error:n,"no-data":d,"no-access":n}[e],u=(e,s=!0)=>{if(!e)return null;const t=w("inline-flex items-center justify-center px-4 py-2 rounded-md text-sm font-medium transition-colors",s?"bg-blue-600 text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500":"text-gray-700 bg-white border border-gray-300 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500");return e.href?a.jsx(N,{to:e.href,className:t,children:e.label}):a.jsx("button",{onClick:e.onClick,className:t,children:e.label})};return a.jsx("div",{className:w("text-center py-12",i),children:a.jsxs("div",{className:"mx-auto max-w-md",children:[a.jsx(h,{className:"mx-auto h-12 w-12 text-gray-400"}),a.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:t}),r&&a.jsx("p",{className:"mt-2 text-sm text-gray-500",children:r}),(l||c)&&a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row gap-3 justify-center",children:[u(l,!0),u(c,!1)]})]})})},Q=({onRetry:e,message:s})=>a.jsx(E,{variant:"error",title:"Something went wrong",description:s||"We encountered an error loading this content. Please try again.",action:e?{label:"Try Again",onClick:e}:void 0}),T=({loading:e,error:s,empty:t,loadingVariant:r="card",loadingCount:l=3,emptyTitle:c="No data found",emptyDescription:i,emptyAction:n,onRetry:d,children:o,className:m})=>{if(e)return a.jsx("div",{className:m,children:a.jsx(D,{variant:r,count:l})});if(s){const e="string"==typeof s?s:s.message||"An error occurred";return a.jsx("div",{className:m,children:a.jsx(Q,{message:e,onRetry:d})})}return t?a.jsx("div",{className:m,children:a.jsx(E,{title:c,description:i,action:n})}):a.jsx("div",{className:m,children:o})},I=()=>{const{user:s}=b(),{openModal:t}=R(),[r,l]=e.useState(""),[c,i]=e.useState(""),[n,d]=e.useState(""),[m,v]=e.useState(""),[f,y]=e.useState(1),w=e.useMemo((()=>C((e=>{i(e),y(1)}),300)),[]),P=e.useCallback((e=>{t(e.id,e.name)}),[t]),D=e.useCallback((e=>{const a=e.target.value;l(a),w(a)}),[w]),E=e.useCallback((e=>{d(e.target.value),y(1)}),[]),Q=e.useCallback((e=>{v(e.target.value),y(1)}),[]),{data:I,isLoading:S,error:V}=h({queryKey:["products",{search:c,category:n,status:m,page:f}],queryFn:()=>g.getProducts({search:c,category:n,status:m,page:f,limit:10})}),{data:$}=h({queryKey:["categories"],queryFn:g.getCategories}),q=(null==I?void 0:I.data)||[],G=null==I?void 0:I.pagination,B=x();return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Produtos"}),a.jsx("p",{className:"text-gray-600",children:"Gerencie seus produtos e valida\xe7\xf5es"})]}),("BRAND"===(null==s?void 0:s.role)||"ADMIN"===(null==s?void 0:s.role))&&a.jsxs(N,{to:"/dashboard/products/new",className:"btn-primary flex items-center mt-4 sm:mt-0",children:[a.jsx(u,{className:"h-4 w-4 mr-2"}),"Novo Produto"]})]}),a.jsx("div",{className:"card p-4",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(o,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-neutral-400 pointer-events-none"}),a.jsx("input",{type:"text",placeholder:"Buscar produtos...",value:r,onChange:D,className:"input pl-10"})]}),a.jsxs("select",{value:n,onChange:E,className:"select",children:[a.jsx("option",{value:"",children:"Todas as categorias"}),null==$?void 0:$.map((e=>a.jsx("option",{value:e,children:e},e)))]}),a.jsxs("select",{value:m,onChange:Q,className:"select",children:[a.jsx("option",{value:"",children:"Todos os status"}),a.jsx("option",{value:"DRAFT",children:"Rascunho"}),a.jsx("option",{value:"PENDING",children:"Pendente"}),a.jsx("option",{value:"VALIDATED",children:"Validado"}),a.jsx("option",{value:"REJECTED",children:"Rejeitado"}),a.jsx("option",{value:"EXPIRED",children:"Expirado"})]}),a.jsxs("button",{className:"btn-outline flex items-center justify-center",children:[a.jsx(p,{className:"h-4 w-4 mr-2"}),"Filtros"]})]})}),a.jsx(T,{loading:S,error:V,empty:0===q.length,loadingVariant:"list",loadingCount:5,emptyTitle:r||n||m?"Nenhum produto encontrado":"Nenhum produto cadastrado",emptyDescription:r||n||m?"Tente ajustar os filtros de busca.":"Comece cadastrando seu primeiro produto.",emptyAction:"BRAND"!==(null==s?void 0:s.role)&&"ADMIN"!==(null==s?void 0:s.role)||r||n||m?void 0:{label:"Cadastrar Produto",onClick:()=>B("/dashboard/products/new")},children:q.length>0&&a.jsxs("div",{className:"card overflow-hidden",children:[a.jsx("div",{className:"hidden md:block overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-neutral-200",children:[a.jsx("thead",{className:"bg-neutral-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider",children:"Produto"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Categoria"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Criado em"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"A\xe7\xf5es"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:q.map((e=>a.jsx(A,{product:e,userRole:null==s?void 0:s.role,onQRCodeClick:P},e.id)))})]})}),a.jsx("div",{className:"md:hidden",children:q.map((e=>a.jsx(k,{product:e,userRole:null==s?void 0:s.role,onQRCodeClick:P},e.id)))}),G&&G.totalPages>1&&a.jsx(j,{currentPage:f,totalPages:G.totalPages,totalItems:G.total,itemsPerPage:G.limit,onPageChange:y})]})})]})};export{I as default};
