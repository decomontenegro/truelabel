import{r as e,j as a,P as t,e as r,ak as s,a9 as l,Y as i,a8 as c,ar as d,as as m,at as n,Q as o,au as h,n as b,o as x}from"./react-core-XCdXHkeW.js";import{p}from"./productService-CHIPryK1.js";import{t as N,L as u}from"./index-D7IercYq.js";import{d as g,b as y}from"./react-router-G9IXNjIc.js";import"./vendor-BcMaAnXF.js";import"./state-QrSTFgAv.js";import"./react-dom-BslC4xag.js";import"./utils-BtzqxagS.js";import"./forms-Bk6aQ3xQ.js";const f=()=>{const{id:f}=g(),v=y(),[w,k]=e.useState(null),[j,L]=e.useState(!0),[S,C]=e.useState(!1);e.useEffect((()=>{f&&R()}),[f]);const R=async()=>{var e;try{L(!0);const e=await p.getProductById(f);k(e)}catch(a){404===(null==(e=a.response)?void 0:e.status)?(N.error("Produto n\xe3o encontrado"),v("/dashboard/products")):N.error("Erro ao carregar produto")}finally{L(!1)}},E=e=>new Date(e).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"});return j?a.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:a.jsx(u,{size:"lg"})}):w?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("button",{onClick:()=>v("/dashboard/products"),className:"btn btn-outline btn-sm flex items-center",children:[a.jsx(r,{className:"h-4 w-4 mr-2"}),"Voltar"]}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:w.name}),a.jsxs("p",{className:"text-gray-600",children:[w.brand," \u2022 ",w.category]})]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[(e=>{const t={PENDING:{color:"bg-yellow-100 text-yellow-800",icon:x,text:"Pendente"},VALIDATED:{color:"bg-green-100 text-green-800",icon:b,text:"Validado"},REJECTED:{color:"bg-red-100 text-red-800",icon:h,text:"Rejeitado"}}[e],r=t.icon;return a.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${t.color}`,children:[a.jsx(r,{className:"w-4 h-4 mr-1"}),t.text]})})(w.status),a.jsxs("button",{onClick:()=>v(`/dashboard/products/${f}/edit`),className:"btn btn-secondary flex items-center",children:[a.jsx(s,{className:"w-4 h-4 mr-2"}),"Editar"]}),a.jsxs("button",{onClick:()=>v(`/dashboard/products/${f}/seals`),className:"btn btn-secondary flex items-center",children:[a.jsx(l,{className:"w-4 h-4 mr-2"}),"Selos"]}),a.jsxs("button",{onClick:()=>v(`/dashboard/products/${f}/traceability`),className:"btn btn-primary flex items-center",children:[a.jsx(i,{className:"w-4 h-4 mr-2"}),"Rastreabilidade"]})]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informa\xe7\xf5es do Produto"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"SKU"}),a.jsx("p",{className:"text-gray-900 font-mono",children:w.sku})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Categoria"}),a.jsx("p",{className:"text-gray-900",children:w.category})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descri\xe7\xe3o"}),a.jsx("p",{className:"text-gray-900",children:w.description||"N\xe3o informado"})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Claims"}),a.jsx("p",{className:"text-gray-900",children:w.claims||"Nenhum claim informado"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Criado em"}),a.jsx("p",{className:"text-gray-900",children:E(w.createdAt)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Atualizado em"}),a.jsx("p",{className:"text-gray-900",children:E(w.updatedAt)})]})]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[a.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[a.jsx(c,{className:"w-5 h-5 mr-2"}),"Configura\xe7\xf5es SmartLabel"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-medium text-gray-900",children:"Ativar SmartLabel"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Quando ativado, os QR codes redirecionar\xe3o para uma p\xe1gina SmartLabel aprimorada com informa\xe7\xf5es detalhadas do produto."})]}),a.jsx("button",{onClick:async()=>{if(w)try{C(!0);const e=!w.enableSmartLabel,a=await p.updateSmartLabelPreference(w.id,e);k({...w,enableSmartLabel:e,smartLabelUrl:a.product.smartLabelUrl}),N.success(e?"SmartLabel ativado! Os QR codes agora redirecionar\xe3o para a p\xe1gina SmartLabel.":"SmartLabel desativado. Os QR codes voltar\xe3o \xe0 p\xe1gina de valida\xe7\xe3o padr\xe3o.")}catch(e){N.error("Erro ao atualizar prefer\xeancia SmartLabel")}finally{C(!1)}},disabled:S,className:"ml-4 relative inline-flex items-center cursor-pointer",children:S?a.jsx(u,{size:"sm"}):w.enableSmartLabel?a.jsx(d,{className:"w-12 h-12 text-primary-600"}):a.jsx(m,{className:"w-12 h-12 text-gray-400"})})]}),w.enableSmartLabel&&a.jsx("div",{className:"p-4 bg-primary-50 rounded-lg",children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx(n,{className:"w-5 h-5 text-primary-600 flex-shrink-0 mt-0.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium text-primary-900 mb-2",children:"SmartLabel est\xe1 ativo para este produto"}),w.smartLabelUrl&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-xs text-primary-700",children:"URL SmartLabel:"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("code",{className:"text-xs bg-white px-2 py-1 rounded border border-primary-200 flex-1",children:[window.location.origin,"/smart-label/",w.id]}),a.jsx("button",{onClick:()=>window.open(`/smart-label/${w.id}`,"_blank"),className:"btn btn-sm btn-primary",children:"Visualizar"})]})]})]})]})}),w.qrCode&&a.jsxs("div",{className:"text-sm text-gray-600",children:[a.jsx("p",{className:"font-medium mb-1",children:"QR Code do Produto:"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(o,{className:"w-5 h-5 text-gray-400"}),a.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded text-xs",children:w.qrCode})]})]})]})]}),w.nutritionalInfo&&a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informa\xe7\xf5es Nutricionais"}),a.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:a.jsx("pre",{className:"text-sm text-gray-800 whitespace-pre-wrap",children:JSON.stringify(w.nutritionalInfo,null,2)})})]})]}):a.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:a.jsxs("div",{className:"text-center",children:[a.jsx(t,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Produto n\xe3o encontrado"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"O produto solicitado n\xe3o existe ou foi removido."}),a.jsx("button",{onClick:()=>v("/dashboard/products"),className:"btn btn-primary",children:"Voltar para Produtos"})]})})};export{f as default};
